!function(){function $b32b8956930b87af10dd0def3bee748$export$queryKey(e){for(var t=[],r=0;r<e.length;r++){var o=e[r];if(!$b32b8956930b87af10dd0def3bee748$export$componentRegistered(o))throw new Error("Tried to create a query with an unregistered component");if("object"==typeof o){var a="not"===o.operator?"!":o.operator;t.push(a+o.Component._typeId)}else t.push(o._typeId)}return t.sort().join("-")}const $b32b8956930b87af10dd0def3bee748$export$hasWindow="undefined"!=typeof window,$b32b8956930b87af10dd0def3bee748$export$now=$b32b8956930b87af10dd0def3bee748$export$hasWindow&&void 0!==window.performance?performance.now.bind(performance):Date.now.bind(Date);function $b32b8956930b87af10dd0def3bee748$export$componentRegistered(e){return"object"==typeof e&&void 0!==e.Component._typeId||e.isComponent&&void 0!==e._typeId}class $d367eb233037e31e4295c9d8c7194fe$export$SystemManager{constructor(e){this._systems=[],this._executeSystems=[],this.world=e,this.lastExecutedSystem=null}registerSystem(e,t){if(!e.isSystem)throw new Error(`System '${e.name}' does not extend 'System' class`);if(void 0!==this.getSystem(e))return console.warn(`System '${e.getName()}' already registered.`),this;var r=new e(this.world,t);return r.init&&r.init(t),r.order=this._systems.length,this._systems.push(r),r.execute&&(this._executeSystems.push(r),this.sortSystems()),this}unregisterSystem(e){let t=this.getSystem(e);return void 0===t?(console.warn(`Can unregister system '${e.getName()}'. It doesn't exist.`),this):(this._systems.splice(this._systems.indexOf(t),1),t.execute&&this._executeSystems.splice(this._executeSystems.indexOf(t),1),this)}sortSystems(){this._executeSystems.sort((e,t)=>e.priority-t.priority||e.order-t.order)}getSystem(e){return this._systems.find(t=>t instanceof e)}getSystems(){return this._systems}removeSystem(e){var t=this._systems.indexOf(e);~t&&this._systems.splice(t,1)}executeSystem(e,t,r){if(e.initialized&&e.canExecute()){let o=$b32b8956930b87af10dd0def3bee748$export$now();e.execute(t,r),e.executeTime=$b32b8956930b87af10dd0def3bee748$export$now()-o,this.lastExecutedSystem=e,e.clearEvents()}}stop(){this._executeSystems.forEach(e=>e.stop())}execute(e,t,r){this._executeSystems.forEach(o=>(r||o.enabled)&&this.executeSystem(o,e,t))}stats(){for(var e={numSystems:this._systems.length,systems:{}},t=0;t<this._systems.length;t++){var r=this._systems[t],o=e.systems[r.getName()]={queries:{},executeTime:r.executeTime};for(var a in r.ctx)o.queries[a]=r.ctx[a].stats()}return e}}class $ef150b598b03c0e131b72120346b$export$ObjectPool{constructor(e,t){this.freeList=[],this.count=0,this.T=e,this.isObjectPool=!0,void 0!==t&&this.expand(t)}acquire(){return this.freeList.length<=0&&this.expand(Math.round(.2*this.count)+1),this.freeList.pop()}release(e){e.reset(),this.freeList.push(e)}expand(e){for(var t=0;t<e;t++){var r=new this.T;r._pool=this,this.freeList.push(r)}this.count+=e}totalSize(){return this.count}totalFree(){return this.freeList.length}totalUsed(){return this.count-this.freeList.length}}class $abb693e5b72de9d11942fa6f27c0bdc$export$default{constructor(){this._listeners={},this.stats={fired:0,handled:0}}addEventListener(e,t){let r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)}hasEventListener(e,t){return void 0!==this._listeners[e]&&-1!==this._listeners[e].indexOf(t)}removeEventListener(e,t){var r=this._listeners[e];if(void 0!==r){var o=r.indexOf(t);-1!==o&&r.splice(o,1)}}dispatchEvent(e,t,r){this.stats.fired++;var o=this._listeners[e];if(void 0!==o)for(var a=o.slice(0),n=0;n<a.length;n++)a[n].call(this,t,r)}resetCounters(){this.stats.fired=this.stats.handled=0}}class $cdd1f49103bcdafaddc56bdc1282f78$export$default{constructor(e,t){if(this.Components=[],this.NotComponents=[],e.forEach(e=>{"object"==typeof e?this.NotComponents.push(e.Component):this.Components.push(e)}),0===this.Components.length)throw new Error("Can't create a query without components");this.entities=[],this.eventDispatcher=new $abb693e5b72de9d11942fa6f27c0bdc$export$default,this.reactive=!1,this.key=$b32b8956930b87af10dd0def3bee748$export$queryKey(e);for(var r=0;r<t._entities.length;r++){var o=t._entities[r];this.match(o)&&(o.queries.push(this),this.entities.push(o))}}addEntity(e){e.queries.push(this),this.entities.push(e),this.eventDispatcher.dispatchEvent($cdd1f49103bcdafaddc56bdc1282f78$export$default.prototype.ENTITY_ADDED,e)}removeEntity(e){let t=this.entities.indexOf(e);~t&&(this.entities.splice(t,1),t=e.queries.indexOf(this),e.queries.splice(t,1),this.eventDispatcher.dispatchEvent($cdd1f49103bcdafaddc56bdc1282f78$export$default.prototype.ENTITY_REMOVED,e))}match(e){return e.hasAllComponents(this.Components)&&!e.hasAnyComponents(this.NotComponents)}toJSON(){return{key:this.key,reactive:this.reactive,components:{included:this.Components.map(e=>e.name),not:this.NotComponents.map(e=>e.name)},numEntities:this.entities.length}}stats(){return{numComponents:this.Components.length,numEntities:this.entities.length}}}$cdd1f49103bcdafaddc56bdc1282f78$export$default.prototype.ENTITY_ADDED="Query#ENTITY_ADDED",$cdd1f49103bcdafaddc56bdc1282f78$export$default.prototype.ENTITY_REMOVED="Query#ENTITY_REMOVED",$cdd1f49103bcdafaddc56bdc1282f78$export$default.prototype.COMPONENT_CHANGED="Query#COMPONENT_CHANGED";class $bb7a22901c31a1f8e2482ec272fa6965$export$default{constructor(e){this._world=e,this._queries={}}onEntityRemoved(e){for(var t in this._queries){var r=this._queries[t];-1!==e.queries.indexOf(r)&&r.removeEntity(e)}}onEntityComponentAdded(e,t){for(var r in this._queries){var o=this._queries[r];~o.NotComponents.indexOf(t)&&~o.entities.indexOf(e)?o.removeEntity(e):~o.Components.indexOf(t)&&o.match(e)&&!~o.entities.indexOf(e)&&o.addEntity(e)}}onEntityComponentRemoved(e,t){for(var r in this._queries){var o=this._queries[r];~o.NotComponents.indexOf(t)&&!~o.entities.indexOf(e)&&o.match(e)?o.addEntity(e):~o.Components.indexOf(t)&&~o.entities.indexOf(e)&&!o.match(e)&&o.removeEntity(e)}}getQuery(e){var t=$b32b8956930b87af10dd0def3bee748$export$queryKey(e),r=this._queries[t];return r||(this._queries[t]=r=new $cdd1f49103bcdafaddc56bdc1282f78$export$default(e,this._world)),r}stats(){var e={};for(var t in this._queries)e[t]=this._queries[t].stats();return e}}class $decf1c164269c27537fd8e1a6712$export$Component{constructor(e){if(!1!==e){const t=this.constructor.schema;for(const r in t)if(e&&e.hasOwnProperty(r))this[r]=e[r];else{const e=t[r];if(e.hasOwnProperty("default"))this[r]=e.type.clone(e.default);else{const t=e.type;this[r]=t.clone(t.default)}}0}this._pool=null}copy(e){const t=this.constructor.schema;for(const r in t){const o=t[r];e.hasOwnProperty(r)&&(this[r]=o.type.copy(e[r],this[r]))}return this}clone(){return(new this.constructor).copy(this)}reset(){const e=this.constructor.schema;for(const t in e){const r=e[t];if(r.hasOwnProperty("default"))this[t]=r.type.copy(r.default,this[t]);else{const e=r.type;this[t]=e.copy(e.default,this[t])}}}dispose(){this._pool&&this._pool.release(this)}getName(){return this.constructor.getName()}checkUndefinedAttributes(e){const t=this.constructor.schema;Object.keys(e).forEach(e=>{t.hasOwnProperty(e)||console.warn(`Trying to set attribute '${e}' not defined in the '${this.constructor.name}' schema. Please fix the schema, the attribute value won't be set`)})}}$decf1c164269c27537fd8e1a6712$export$Component.schema={},$decf1c164269c27537fd8e1a6712$export$Component.isComponent=!0,$decf1c164269c27537fd8e1a6712$export$Component.getName=function(){return this.displayName||this.name};class $b69371e4e37b26cc2cbfb5dfa5205b$export$SystemStateComponent extends $decf1c164269c27537fd8e1a6712$export$Component{}$b69371e4e37b26cc2cbfb5dfa5205b$export$SystemStateComponent.isSystemStateComponent=!0;class $c47de611a43b599657cbfd39c8ba$var$EntityPool extends $ef150b598b03c0e131b72120346b$export$ObjectPool{constructor(e,t,r){super(t,void 0),this.entityManager=e,void 0!==r&&this.expand(r)}expand(e){for(var t=0;t<e;t++){var r=new this.T(this.entityManager);r._pool=this,this.freeList.push(r)}this.count+=e}}class $c47de611a43b599657cbfd39c8ba$export$EntityManager{constructor(e){this.world=e,this.componentsManager=e.componentsManager,this._entities=[],this._nextEntityId=0,this._entitiesByNames={},this._queryManager=new $bb7a22901c31a1f8e2482ec272fa6965$export$default(this),this.eventDispatcher=new $abb693e5b72de9d11942fa6f27c0bdc$export$default,this._entityPool=new $c47de611a43b599657cbfd39c8ba$var$EntityPool(this,this.world.options.entityClass,this.world.options.entityPoolSize),this.entitiesWithComponentsToRemove=[],this.entitiesToRemove=[],this.deferredRemovalEnabled=!0}getEntityByName(e){return this._entitiesByNames[e]}createEntity(e){var t=this._entityPool.acquire();return t.alive=!0,t.name=e||"",e&&(this._entitiesByNames[e]?console.warn(`Entity name '${e}' already exist`):this._entitiesByNames[e]=t),this._entities.push(t),this.eventDispatcher.dispatchEvent($c47de611a43b599657cbfd39c8ba$var$ENTITY_CREATED,t),t}entityAddComponent(e,t,r){if(void 0===t._typeId&&!this.world.componentsManager._ComponentsMap[t._typeId])throw new Error(`Attempted to add unregistered component "${t.getName()}"`);if(!~e._ComponentTypes.indexOf(t)){e._ComponentTypes.push(t),t.__proto__===$b69371e4e37b26cc2cbfb5dfa5205b$export$SystemStateComponent&&e.numStateComponents++;var o=this.world.componentsManager.getComponentsPool(t),a=o?o.acquire():new t(r);o&&r&&a.copy(r),e._components[t._typeId]=a,this._queryManager.onEntityComponentAdded(e,t),this.world.componentsManager.componentAddedToEntity(t),this.eventDispatcher.dispatchEvent($c47de611a43b599657cbfd39c8ba$var$COMPONENT_ADDED,e,t)}}entityRemoveComponent(e,t,r){var o=e._ComponentTypes.indexOf(t);~o&&(this.eventDispatcher.dispatchEvent($c47de611a43b599657cbfd39c8ba$var$COMPONENT_REMOVE,e,t),r?this._entityRemoveComponentSync(e,t,o):(0===e._ComponentTypesToRemove.length&&this.entitiesWithComponentsToRemove.push(e),e._ComponentTypes.splice(o,1),e._ComponentTypesToRemove.push(t),e._componentsToRemove[t._typeId]=e._components[t._typeId],delete e._components[t._typeId]),this._queryManager.onEntityComponentRemoved(e,t),t.__proto__===$b69371e4e37b26cc2cbfb5dfa5205b$export$SystemStateComponent&&(e.numStateComponents--,0!==e.numStateComponents||e.alive||e.remove()))}_entityRemoveComponentSync(e,t,r){e._ComponentTypes.splice(r,1);var o=e._components[t._typeId];delete e._components[t._typeId],o.dispose(),this.world.componentsManager.componentRemovedFromEntity(t)}entityRemoveAllComponents(e,t){let r=e._ComponentTypes;for(let o=r.length-1;o>=0;o--)r[o].__proto__!==$b69371e4e37b26cc2cbfb5dfa5205b$export$SystemStateComponent&&this.entityRemoveComponent(e,r[o],t)}removeEntity(e,t){var r=this._entities.indexOf(e);if(!~r)throw new Error("Tried to remove entity not in list");e.alive=!1,0===e.numStateComponents&&(this.eventDispatcher.dispatchEvent($c47de611a43b599657cbfd39c8ba$var$ENTITY_REMOVED,e),this._queryManager.onEntityRemoved(e),!0===t?this._releaseEntity(e,r):this.entitiesToRemove.push(e)),this.entityRemoveAllComponents(e,t)}_releaseEntity(e,t){this._entities.splice(t,1),this._entitiesByNames[e.name]&&delete this._entitiesByNames[e.name],e._pool.release(e)}removeAllEntities(){for(var e=this._entities.length-1;e>=0;e--)this.removeEntity(this._entities[e])}processDeferredRemoval(){if(this.deferredRemovalEnabled){for(let e=0;e<this.entitiesToRemove.length;e++){let t=this.entitiesToRemove[e],r=this._entities.indexOf(t);this._releaseEntity(t,r)}this.entitiesToRemove.length=0;for(let t=0;t<this.entitiesWithComponentsToRemove.length;t++){let r=this.entitiesWithComponentsToRemove[t];for(;r._ComponentTypesToRemove.length>0;){let t=r._ComponentTypesToRemove.pop();var e=r._componentsToRemove[t._typeId];delete r._componentsToRemove[t._typeId],e.dispose(),this.world.componentsManager.componentRemovedFromEntity(t)}}this.entitiesWithComponentsToRemove.length=0}}queryComponents(e){return this._queryManager.getQuery(e)}count(){return this._entities.length}stats(){var e={numEntities:this._entities.length,numQueries:Object.keys(this._queryManager._queries).length,queries:this._queryManager.stats(),numComponentPool:Object.keys(this.componentsManager._componentPool).length,componentPool:{},eventDispatcher:this.eventDispatcher.stats};for(var t in this.componentsManager._componentPool){var r=this.componentsManager._componentPool[t];e.componentPool[r.T.getName()]={used:r.totalUsed(),size:r.count}}return e}}const $c47de611a43b599657cbfd39c8ba$var$ENTITY_CREATED="EntityManager#ENTITY_CREATE",$c47de611a43b599657cbfd39c8ba$var$ENTITY_REMOVED="EntityManager#ENTITY_REMOVED",$c47de611a43b599657cbfd39c8ba$var$COMPONENT_ADDED="EntityManager#COMPONENT_ADDED",$c47de611a43b599657cbfd39c8ba$var$COMPONENT_REMOVE="EntityManager#COMPONENT_REMOVE";class $aa6d1d7eaee5f3412c6fedf7c80e22a$export$ComponentManager{constructor(){this.Components=[],this._ComponentsMap={},this._componentPool={},this.numComponents={},this.nextComponentId=0}hasComponent(e){return-1!==this.Components.indexOf(e)}registerComponent(e,t){if(-1!==this.Components.indexOf(e))return void console.warn(`Component type: '${e.getName()}' already registered.`);const r=e.schema;if(!r)throw new Error(`Component "${e.getName()}" has no schema property.`);for(const t in r){if(!r[t].type)throw new Error(`Invalid schema for component "${e.getName()}". Missing type for "${t}" property.`)}e._typeId=this.nextComponentId++,this.Components.push(e),this._ComponentsMap[e._typeId]=e,this.numComponents[e._typeId]=0,void 0===t?t=new $ef150b598b03c0e131b72120346b$export$ObjectPool(e):!1===t&&(t=void 0),this._componentPool[e._typeId]=t}componentAddedToEntity(e){this.numComponents[e._typeId]++}componentRemovedFromEntity(e){this.numComponents[e._typeId]--}getComponentsPool(e){return this._componentPool[e._typeId]}}const $aa6bd1bc969bfad2624cf0423d6b2$export$Version="0.3.1",$ab7395adc21c2ae14f32b1fce3ec963$var$proxyMap=new WeakMap,$ab7395adc21c2ae14f32b1fce3ec963$var$proxyHandler={set(e,t){throw new Error(`Tried to write to "${e.constructor.getName()}#${String(t)}" on immutable component. Use .getMutableComponent() to modify a component.`)}};function $ab7395adc21c2ae14f32b1fce3ec963$export$default(e,t){if(void 0===t)return;let r=$ab7395adc21c2ae14f32b1fce3ec963$var$proxyMap.get(t);return r||(r=new Proxy(t,$ab7395adc21c2ae14f32b1fce3ec963$var$proxyHandler),$ab7395adc21c2ae14f32b1fce3ec963$var$proxyMap.set(t,r)),r}class $ca6f0b0076f1cac2f098e3f12a081$export$Entity{constructor(e){this._entityManager=e||null,this.id=e._nextEntityId++,this._ComponentTypes=[],this._components={},this._componentsToRemove={},this.queries=[],this._ComponentTypesToRemove=[],this.alive=!1,this.numStateComponents=0}getComponent(e,t){var r=this._components[e._typeId];return r||!0!==t||(r=this._componentsToRemove[e._typeId]),r}getRemovedComponent(e){const t=this._componentsToRemove[e._typeId];return t}getComponents(){return this._components}getComponentsToRemove(){return this._componentsToRemove}getComponentTypes(){return this._ComponentTypes}getMutableComponent(e){var t=this._components[e._typeId];if(t){for(var r=0;r<this.queries.length;r++){var o=this.queries[r];o.reactive&&-1!==o.Components.indexOf(e)&&o.eventDispatcher.dispatchEvent($cdd1f49103bcdafaddc56bdc1282f78$export$default.prototype.COMPONENT_CHANGED,this,t)}return t}}addComponent(e,t){return this._entityManager.entityAddComponent(this,e,t),this}removeComponent(e,t){return this._entityManager.entityRemoveComponent(this,e,t),this}hasComponent(e,t){return!!~this._ComponentTypes.indexOf(e)||!0===t&&this.hasRemovedComponent(e)}hasRemovedComponent(e){return!!~this._ComponentTypesToRemove.indexOf(e)}hasAllComponents(e){for(var t=0;t<e.length;t++)if(!this.hasComponent(e[t]))return!1;return!0}hasAnyComponents(e){for(var t=0;t<e.length;t++)if(this.hasComponent(e[t]))return!0;return!1}removeAllComponents(e){return this._entityManager.entityRemoveAllComponents(this,e)}copy(e){for(var t in e._components){var r=e._components[t];this.addComponent(r.constructor),this.getComponent(r.constructor).copy(r)}return this}clone(){return new $ca6f0b0076f1cac2f098e3f12a081$export$Entity(this._entityManager).copy(this)}reset(){for(var e in this.id=this._entityManager._nextEntityId++,this._ComponentTypes.length=0,this.queries.length=0,this._components)delete this._components[e]}remove(e){return this._entityManager.removeEntity(this,e)}}const $d869f60daaac5d27acba8efd631f22e$var$DEFAULT_OPTIONS={entityPoolSize:0,entityClass:$ca6f0b0076f1cac2f098e3f12a081$export$Entity};class $d869f60daaac5d27acba8efd631f22e$export$World{constructor(e={}){if(this.options=Object.assign({},$d869f60daaac5d27acba8efd631f22e$var$DEFAULT_OPTIONS,e),this.componentsManager=new $aa6d1d7eaee5f3412c6fedf7c80e22a$export$ComponentManager(this),this.entityManager=new $c47de611a43b599657cbfd39c8ba$export$EntityManager(this),this.systemManager=new $d367eb233037e31e4295c9d8c7194fe$export$SystemManager(this),this.enabled=!0,this.eventQueues={},$b32b8956930b87af10dd0def3bee748$export$hasWindow&&"undefined"!=typeof CustomEvent){var t=new CustomEvent("ecsy-world-created",{detail:{world:this,version:$aa6bd1bc969bfad2624cf0423d6b2$export$Version}});window.dispatchEvent(t)}this.lastTime=$b32b8956930b87af10dd0def3bee748$export$now()/1e3}registerComponent(e,t){return this.componentsManager.registerComponent(e,t),this}registerSystem(e,t){return this.systemManager.registerSystem(e,t),this}hasRegisteredComponent(e){return this.componentsManager.hasComponent(e)}unregisterSystem(e){return this.systemManager.unregisterSystem(e),this}getSystem(e){return this.systemManager.getSystem(e)}getSystems(){return this.systemManager.getSystems()}execute(e,t){e||(e=(t=$b32b8956930b87af10dd0def3bee748$export$now()/1e3)-this.lastTime,this.lastTime=t),this.enabled&&(this.systemManager.execute(e,t),this.entityManager.processDeferredRemoval())}stop(){this.enabled=!1}play(){this.enabled=!0}createEntity(e){return this.entityManager.createEntity(e)}stats(){return{entities:this.entityManager.stats(),system:this.systemManager.stats()}}}class $ec2b47e01b1dec22d8da0f20cfe1aed2$export$System{canExecute(){if(0===this._mandatoryQueries.length)return!0;for(let e=0;e<this._mandatoryQueries.length;e++){if(0===this._mandatoryQueries[e].entities.length)return!1}return!0}getName(){return this.constructor.getName()}constructor(e,t){if(this.world=e,this.enabled=!0,this._queries={},this.queries={},this.priority=0,this.executeTime=0,t&&t.priority&&(this.priority=t.priority),this._mandatoryQueries=[],this.initialized=!0,this.constructor.queries)for(var r in this.constructor.queries){var o=this.constructor.queries[r],a=o.components;if(!a||0===a.length)throw new Error("'components' attribute can't be empty in a query");let e=a.filter(e=>!$b32b8956930b87af10dd0def3bee748$export$componentRegistered(e));if(e.length>0)throw new Error(`Tried to create a query '${this.constructor.name}.${r}' with unregistered components: [${e.map(e=>e.getName()).join(", ")}]`);var n=this.world.entityManager.queryComponents(a);this._queries[r]=n,!0===o.mandatory&&this._mandatoryQueries.push(n),this.queries[r]={results:n.entities};var c=["added","removed","changed"];const t={added:$cdd1f49103bcdafaddc56bdc1282f78$export$default.prototype.ENTITY_ADDED,removed:$cdd1f49103bcdafaddc56bdc1282f78$export$default.prototype.ENTITY_REMOVED,changed:$cdd1f49103bcdafaddc56bdc1282f78$export$default.prototype.COMPONENT_CHANGED};o.listen&&c.forEach(e=>{if(this.execute||console.warn(`System '${this.getName()}' has defined listen events (${c.join(", ")}) for query '${r}' but it does not implement the 'execute' method.`),o.listen[e]){let a=o.listen[e];if("changed"===e){if(n.reactive=!0,!0===a){let t=this.queries[r][e]=[];n.eventDispatcher.addEventListener($cdd1f49103bcdafaddc56bdc1282f78$export$default.prototype.COMPONENT_CHANGED,e=>{-1===t.indexOf(e)&&t.push(e)})}else if(Array.isArray(a)){let t=this.queries[r][e]=[];n.eventDispatcher.addEventListener($cdd1f49103bcdafaddc56bdc1282f78$export$default.prototype.COMPONENT_CHANGED,(e,r)=>{-1!==a.indexOf(r.constructor)&&-1===t.indexOf(e)&&t.push(e)})}}else{let o=this.queries[r][e]=[];n.eventDispatcher.addEventListener(t[e],e=>{-1===o.indexOf(e)&&o.push(e)})}}})}}stop(){this.executeTime=0,this.enabled=!1}play(){this.enabled=!0}clearEvents(){for(let t in this.queries){var e=this.queries[t];if(e.added&&(e.added.length=0),e.removed&&(e.removed.length=0),e.changed)if(Array.isArray(e.changed))e.changed.length=0;else for(let t in e.changed)e.changed[t].length=0}}toJSON(){var e={name:this.getName(),enabled:this.enabled,executeTime:this.executeTime,priority:this.priority,queries:{}};if(this.constructor.queries){var t=this.constructor.queries;for(let r in t){let o=this.queries[r],a=t[r],n=e.queries[r]={key:this._queries[r].key};if(n.mandatory=!0===a.mandatory,n.reactive=a.listen&&(!0===a.listen.added||!0===a.listen.removed||!0===a.listen.changed||Array.isArray(a.listen.changed)),n.reactive){n.listen={};["added","removed","changed"].forEach(e=>{o[e]&&(n.listen[e]={entities:o[e].length})})}}}return e}}$ec2b47e01b1dec22d8da0f20cfe1aed2$export$System.isSystem=!0,$ec2b47e01b1dec22d8da0f20cfe1aed2$export$System.getName=function(){return this.displayName||this.name};class $dc8963011f322b64def151aba88ab$export$TagComponent extends $decf1c164269c27537fd8e1a6712$export$Component{constructor(){super(!1)}}$dc8963011f322b64def151aba88ab$export$TagComponent.isTagComponent=!0;const $cf1860c19e1a5c017204f0ab320c65$export$copyValue=e=>e,$cf1860c19e1a5c017204f0ab320c65$export$cloneValue=e=>e,$cf1860c19e1a5c017204f0ab320c65$export$copyArray=(e,t)=>{if(!e)return e;if(!t)return e.slice();t.length=0;for(let r=0;r<e.length;r++)t.push(e[r]);return t},$cf1860c19e1a5c017204f0ab320c65$export$cloneArray=e=>e&&e.slice(),$cf1860c19e1a5c017204f0ab320c65$export$copyJSON=e=>JSON.parse(JSON.stringify(e)),$cf1860c19e1a5c017204f0ab320c65$export$cloneJSON=e=>JSON.parse(JSON.stringify(e)),$cf1860c19e1a5c017204f0ab320c65$export$copyCopyable=(e,t)=>e?t?t.copy(e):e.clone():e,$cf1860c19e1a5c017204f0ab320c65$export$cloneClonable=e=>e&&e.clone();function $cf1860c19e1a5c017204f0ab320c65$export$createType(e){var t=["name","default","copy","clone"].filter(t=>!e.hasOwnProperty(t));if(t.length>0)throw new Error("createType expects a type definition with the following properties: "+t.join(", "));return e.isType=!0,e}const $cf1860c19e1a5c017204f0ab320c65$export$Types={Number:$cf1860c19e1a5c017204f0ab320c65$export$createType({name:"Number",default:0,copy:$cf1860c19e1a5c017204f0ab320c65$export$copyValue,clone:$cf1860c19e1a5c017204f0ab320c65$export$cloneValue}),Boolean:$cf1860c19e1a5c017204f0ab320c65$export$createType({name:"Boolean",default:!1,copy:$cf1860c19e1a5c017204f0ab320c65$export$copyValue,clone:$cf1860c19e1a5c017204f0ab320c65$export$cloneValue}),String:$cf1860c19e1a5c017204f0ab320c65$export$createType({name:"String",default:"",copy:$cf1860c19e1a5c017204f0ab320c65$export$copyValue,clone:$cf1860c19e1a5c017204f0ab320c65$export$cloneValue}),Array:$cf1860c19e1a5c017204f0ab320c65$export$createType({name:"Array",default:[],copy:$cf1860c19e1a5c017204f0ab320c65$export$copyArray,clone:$cf1860c19e1a5c017204f0ab320c65$export$cloneArray}),Ref:$cf1860c19e1a5c017204f0ab320c65$export$createType({name:"Ref",default:void 0,copy:$cf1860c19e1a5c017204f0ab320c65$export$copyValue,clone:$cf1860c19e1a5c017204f0ab320c65$export$cloneValue}),JSON:$cf1860c19e1a5c017204f0ab320c65$export$createType({name:"JSON",default:null,copy:$cf1860c19e1a5c017204f0ab320c65$export$copyJSON,clone:$cf1860c19e1a5c017204f0ab320c65$export$cloneJSON})};function $f37735f93f3ccd1ff0e4fe934d135eec$export$generateId(e){for(var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",o=r.length,a=0;a<e;a++)t+=r.charAt(Math.floor(Math.random()*o));return t}function $f37735f93f3ccd1ff0e4fe934d135eec$export$injectScript(e,t){var r=document.createElement("script");r.src=e,r.onload=t,(document.head||document.documentElement).appendChild(r)}var $ffc1136c8c47d2615866707064de931$exports=function(){var exports=this,module={exports:this};function hookConsoleAndErrors(e){["error","warning","log"].forEach(t=>{if("function"==typeof console[t]){var r=console[t].bind(console);console[t]=(...o)=>(e.send({method:"console",type:t,args:JSON.stringify(o)}),r.apply(null,o))}}),window.addEventListener("error",t=>{e.send({method:"error",error:JSON.stringify({message:t.error.message,stack:t.error.stack})})})}function includeRemoteIdHTML(e){let t=document.createElement("div");return t.style.cssText="\n    align-items: center;\n    background-color: #333;\n    color: #aaa;\n    display:flex;\n    font-family: Arial;\n    font-size: 1.1em;\n    height: 40px;\n    justify-content: center;\n    left: 0;\n    opacity: 0.9;\n    position: absolute;\n    right: 0;\n    text-align: center;\n    top: 0;\n  ",t.innerHTML=`Open ECSY devtools to connect to this page using the code:&nbsp;<b style="color: #fff">${e}</b>&nbsp;<button onClick="generateNewCode()">Generate new code</button>`,document.body.appendChild(t),t}function $ffc1136c8c47d2615866707064de931$export$enableRemoteDevtools(remoteId){if(!$b32b8956930b87af10dd0def3bee748$export$hasWindow)return void console.warn("Remote devtools not available outside the browser");window.generateNewCode=()=>{window.localStorage.clear(),remoteId=$f37735f93f3ccd1ff0e4fe934d135eec$export$generateId(6),window.localStorage.setItem("ecsyRemoteId",remoteId),window.location.reload(!1)},remoteId=remoteId||window.localStorage.getItem("ecsyRemoteId"),remoteId||(remoteId=$f37735f93f3ccd1ff0e4fe934d135eec$export$generateId(6),window.localStorage.setItem("ecsyRemoteId",remoteId));let infoDiv=includeRemoteIdHTML(remoteId);window.__ECSY_REMOTE_DEVTOOLS_INJECTED=!0,window.__ECSY_REMOTE_DEVTOOLS={};let Version="",worldsBeforeLoading=[],onWorldCreated=e=>{var t=e.detail.world;Version=e.detail.version,worldsBeforeLoading.push(t)};window.addEventListener("ecsy-world-created",onWorldCreated);let onLoaded=()=>{var peer=new Peer(remoteId,{host:"peerjs.ecsy.io",secure:!0,port:443,config:{iceServers:[{url:"stun:stun.l.google.com:19302"},{url:"stun:stun1.l.google.com:19302"},{url:"stun:stun2.l.google.com:19302"},{url:"stun:stun3.l.google.com:19302"},{url:"stun:stun4.l.google.com:19302"}]},debug:3});peer.on("open",()=>{peer.on("connection",connection=>{window.__ECSY_REMOTE_DEVTOOLS.connection=connection,connection.on("open",(function(){infoDiv.innerHTML="Connected",connection.on("data",(function(data){if("init"===data.type){var script=document.createElement("script");script.setAttribute("type","text/javascript"),script.onload=()=>{script.parentNode.removeChild(script),window.removeEventListener("ecsy-world-created",onWorldCreated),worldsBeforeLoading.forEach(e=>{var t=new CustomEvent("ecsy-world-created",{detail:{world:e,version:Version}});window.dispatchEvent(t)})},script.innerHTML=data.script,(document.head||document.documentElement).appendChild(script),script.onload(),hookConsoleAndErrors(connection)}else if("executeScript"===data.type){let value=eval(data.script);data.returnEval&&connection.send({method:"evalReturn",value:value})}}))}))})})};$f37735f93f3ccd1ff0e4fe934d135eec$export$injectScript("https://cdn.jsdelivr.net/npm/peerjs@0.3.20/dist/peer.min.js",onLoaded)}if(exports.__esModule=!0,exports.enableRemoteDevtools=$ffc1136c8c47d2615866707064de931$export$enableRemoteDevtools,$b32b8956930b87af10dd0def3bee748$export$hasWindow){const e=new URLSearchParams(window.location.search);e.has("enable-remote-devtools")&&$ffc1136c8c47d2615866707064de931$export$enableRemoteDevtools()}return module.exports}.call({});function $ca82fe984a10818c9db0c3ccdc68316c$var$_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $ca82fe984a10818c9db0c3ccdc68316c$var$_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $ca82fe984a10818c9db0c3ccdc68316c$var$_createClass(e,t,r){return t&&$ca82fe984a10818c9db0c3ccdc68316c$var$_defineProperties(e.prototype,t),r&&$ca82fe984a10818c9db0c3ccdc68316c$var$_defineProperties(e,r),e}$ffc1136c8c47d2615866707064de931$exports.enableRemoteDevtools;var $ca82fe984a10818c9db0c3ccdc68316c$export$Player=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;$ca82fe984a10818c9db0c3ccdc68316c$var$_classCallCheck(this,e),this.element=t,this.score=r}return $ca82fe984a10818c9db0c3ccdc68316c$var$_createClass(e,[{key:"copy",value:function(e){return this.score=e.score,this.element=e.element,this}},{key:"clone",value:function(){return new e(this.element,this.score)}}]),e}(),$ca82fe984a10818c9db0c3ccdc68316c$export$PlayerType=$cf1860c19e1a5c017204f0ab320c65$export$createType({name:"Player",default:new $ca82fe984a10818c9db0c3ccdc68316c$export$Player,copy:$cf1860c19e1a5c017204f0ab320c65$export$copyCopyable,clone:$cf1860c19e1a5c017204f0ab320c65$export$cloneClonable});function $f013ca1b753de4192844747a0a914fc1$var$_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $f013ca1b753de4192844747a0a914fc1$var$_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $f013ca1b753de4192844747a0a914fc1$var$_createClass(e,t,r){return t&&$f013ca1b753de4192844747a0a914fc1$var$_defineProperties(e.prototype,t),r&&$f013ca1b753de4192844747a0a914fc1$var$_defineProperties(e,r),e}var $f013ca1b753de4192844747a0a914fc1$export$Vector2=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;$f013ca1b753de4192844747a0a914fc1$var$_classCallCheck(this,e),this.x=t,this.y=r}return $f013ca1b753de4192844747a0a914fc1$var$_createClass(e,[{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"clone",value:function(){return new e(this.x,this.y)}}]),e}(),$f013ca1b753de4192844747a0a914fc1$export$Vector2Type=$cf1860c19e1a5c017204f0ab320c65$export$createType({name:"Vector2",default:new $f013ca1b753de4192844747a0a914fc1$export$Vector2,copy:$cf1860c19e1a5c017204f0ab320c65$export$copyCopyable,clone:$cf1860c19e1a5c017204f0ab320c65$export$cloneClonable});function $d87b2fc0173f558f40cf8a586c101d$var$_typeof(e){return($d87b2fc0173f558f40cf8a586c101d$var$_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $d87b2fc0173f558f40cf8a586c101d$var$_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $d87b2fc0173f558f40cf8a586c101d$var$_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$d87b2fc0173f558f40cf8a586c101d$var$_setPrototypeOf(e,t)}function $d87b2fc0173f558f40cf8a586c101d$var$_setPrototypeOf(e,t){return($d87b2fc0173f558f40cf8a586c101d$var$_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $d87b2fc0173f558f40cf8a586c101d$var$_createSuper(e){var t=$d87b2fc0173f558f40cf8a586c101d$var$_isNativeReflectConstruct();return function(){var r,o=$d87b2fc0173f558f40cf8a586c101d$var$_getPrototypeOf(e);if(t){var a=$d87b2fc0173f558f40cf8a586c101d$var$_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return $d87b2fc0173f558f40cf8a586c101d$var$_possibleConstructorReturn(this,r)}}function $d87b2fc0173f558f40cf8a586c101d$var$_possibleConstructorReturn(e,t){return!t||"object"!==$d87b2fc0173f558f40cf8a586c101d$var$_typeof(t)&&"function"!=typeof t?$d87b2fc0173f558f40cf8a586c101d$var$_assertThisInitialized(e):t}function $d87b2fc0173f558f40cf8a586c101d$var$_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $d87b2fc0173f558f40cf8a586c101d$var$_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function $d87b2fc0173f558f40cf8a586c101d$var$_getPrototypeOf(e){return($d87b2fc0173f558f40cf8a586c101d$var$_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $d87b2fc0173f558f40cf8a586c101d$var$_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $d87b2fc0173f558f40cf8a586c101d$export$BallComponent=function(e){$d87b2fc0173f558f40cf8a586c101d$var$_inherits(r,e);var t=$d87b2fc0173f558f40cf8a586c101d$var$_createSuper(r);function r(){return $d87b2fc0173f558f40cf8a586c101d$var$_classCallCheck(this,r),t.apply(this,arguments)}return r}($decf1c164269c27537fd8e1a6712$export$Component);function $a864a5be02647c0d657033e75a743b1f$var$_typeof(e){return($a864a5be02647c0d657033e75a743b1f$var$_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $a864a5be02647c0d657033e75a743b1f$var$_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $a864a5be02647c0d657033e75a743b1f$var$_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$a864a5be02647c0d657033e75a743b1f$var$_setPrototypeOf(e,t)}function $a864a5be02647c0d657033e75a743b1f$var$_setPrototypeOf(e,t){return($a864a5be02647c0d657033e75a743b1f$var$_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $a864a5be02647c0d657033e75a743b1f$var$_createSuper(e){var t=$a864a5be02647c0d657033e75a743b1f$var$_isNativeReflectConstruct();return function(){var r,o=$a864a5be02647c0d657033e75a743b1f$var$_getPrototypeOf(e);if(t){var a=$a864a5be02647c0d657033e75a743b1f$var$_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return $a864a5be02647c0d657033e75a743b1f$var$_possibleConstructorReturn(this,r)}}function $a864a5be02647c0d657033e75a743b1f$var$_possibleConstructorReturn(e,t){return!t||"object"!==$a864a5be02647c0d657033e75a743b1f$var$_typeof(t)&&"function"!=typeof t?$a864a5be02647c0d657033e75a743b1f$var$_assertThisInitialized(e):t}function $a864a5be02647c0d657033e75a743b1f$var$_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $a864a5be02647c0d657033e75a743b1f$var$_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function $a864a5be02647c0d657033e75a743b1f$var$_getPrototypeOf(e){return($a864a5be02647c0d657033e75a743b1f$var$_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $a864a5be02647c0d657033e75a743b1f$var$_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}$d87b2fc0173f558f40cf8a586c101d$var$_defineProperty($d87b2fc0173f558f40cf8a586c101d$export$BallComponent,"schema",{initialPosition:{type:$f013ca1b753de4192844747a0a914fc1$export$Vector2Type},initialVelocity:{type:$cf1860c19e1a5c017204f0ab320c65$export$Types.Number}});var $a864a5be02647c0d657033e75a743b1f$export$CanvasContextComponent=function(e){$a864a5be02647c0d657033e75a743b1f$var$_inherits(r,e);var t=$a864a5be02647c0d657033e75a743b1f$var$_createSuper(r);function r(){return $a864a5be02647c0d657033e75a743b1f$var$_classCallCheck(this,r),t.apply(this,arguments)}return r}($decf1c164269c27537fd8e1a6712$export$Component);function $d35c1c9888b410c27ffeb6e89367fa$var$_typeof(e){return($d35c1c9888b410c27ffeb6e89367fa$var$_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $d35c1c9888b410c27ffeb6e89367fa$var$_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $d35c1c9888b410c27ffeb6e89367fa$var$_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$d35c1c9888b410c27ffeb6e89367fa$var$_setPrototypeOf(e,t)}function $d35c1c9888b410c27ffeb6e89367fa$var$_setPrototypeOf(e,t){return($d35c1c9888b410c27ffeb6e89367fa$var$_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $d35c1c9888b410c27ffeb6e89367fa$var$_createSuper(e){var t=$d35c1c9888b410c27ffeb6e89367fa$var$_isNativeReflectConstruct();return function(){var r,o=$d35c1c9888b410c27ffeb6e89367fa$var$_getPrototypeOf(e);if(t){var a=$d35c1c9888b410c27ffeb6e89367fa$var$_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return $d35c1c9888b410c27ffeb6e89367fa$var$_possibleConstructorReturn(this,r)}}function $d35c1c9888b410c27ffeb6e89367fa$var$_possibleConstructorReturn(e,t){return!t||"object"!==$d35c1c9888b410c27ffeb6e89367fa$var$_typeof(t)&&"function"!=typeof t?$d35c1c9888b410c27ffeb6e89367fa$var$_assertThisInitialized(e):t}function $d35c1c9888b410c27ffeb6e89367fa$var$_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $d35c1c9888b410c27ffeb6e89367fa$var$_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function $d35c1c9888b410c27ffeb6e89367fa$var$_getPrototypeOf(e){return($d35c1c9888b410c27ffeb6e89367fa$var$_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $d35c1c9888b410c27ffeb6e89367fa$var$_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}$a864a5be02647c0d657033e75a743b1f$var$_defineProperty($a864a5be02647c0d657033e75a743b1f$export$CanvasContextComponent,"schema",{ctx:{type:$cf1860c19e1a5c017204f0ab320c65$export$Types.Ref},width:{type:$cf1860c19e1a5c017204f0ab320c65$export$Types.Number},height:{type:$cf1860c19e1a5c017204f0ab320c65$export$Types.Number}});var $d35c1c9888b410c27ffeb6e89367fa$export$CollisionBoxComponent=function(e){$d35c1c9888b410c27ffeb6e89367fa$var$_inherits(r,e);var t=$d35c1c9888b410c27ffeb6e89367fa$var$_createSuper(r);function r(){return $d35c1c9888b410c27ffeb6e89367fa$var$_classCallCheck(this,r),t.apply(this,arguments)}return r}($decf1c164269c27537fd8e1a6712$export$Component),$affda4f11426b71ec9c71d90894$var$_temp,$affda4f11426b71ec9c71d90894$var$_temp2,$affda4f11426b71ec9c71d90894$export$GameState,GameState,$affda4f11426b71ec9c71d90894$export$PlayerSchemeKeys,PlayerSchemeKeys;function $f4ff059be379072ec49371f7832aeab$var$_typeof(e){return($f4ff059be379072ec49371f7832aeab$var$_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $f4ff059be379072ec49371f7832aeab$var$_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $f4ff059be379072ec49371f7832aeab$var$_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$f4ff059be379072ec49371f7832aeab$var$_setPrototypeOf(e,t)}function $f4ff059be379072ec49371f7832aeab$var$_setPrototypeOf(e,t){return($f4ff059be379072ec49371f7832aeab$var$_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $f4ff059be379072ec49371f7832aeab$var$_createSuper(e){var t=$f4ff059be379072ec49371f7832aeab$var$_isNativeReflectConstruct();return function(){var r,o=$f4ff059be379072ec49371f7832aeab$var$_getPrototypeOf(e);if(t){var a=$f4ff059be379072ec49371f7832aeab$var$_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return $f4ff059be379072ec49371f7832aeab$var$_possibleConstructorReturn(this,r)}}function $f4ff059be379072ec49371f7832aeab$var$_possibleConstructorReturn(e,t){return!t||"object"!==$f4ff059be379072ec49371f7832aeab$var$_typeof(t)&&"function"!=typeof t?$f4ff059be379072ec49371f7832aeab$var$_assertThisInitialized(e):t}function $f4ff059be379072ec49371f7832aeab$var$_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $f4ff059be379072ec49371f7832aeab$var$_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function $f4ff059be379072ec49371f7832aeab$var$_getPrototypeOf(e){return($f4ff059be379072ec49371f7832aeab$var$_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $f4ff059be379072ec49371f7832aeab$var$_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}$d35c1c9888b410c27ffeb6e89367fa$var$_defineProperty($d35c1c9888b410c27ffeb6e89367fa$export$CollisionBoxComponent,"schema",{wallCollision:{type:$f013ca1b753de4192844747a0a914fc1$export$Vector2Type},collidingEntities:{type:$cf1860c19e1a5c017204f0ab320c65$export$Types.Array}}),GameState=$affda4f11426b71ec9c71d90894$export$GameState||($affda4f11426b71ec9c71d90894$var$_temp=$affda4f11426b71ec9c71d90894$export$GameState={},$affda4f11426b71ec9c71d90894$var$_temp),GameState[GameState.Waiting=0]="Waiting",GameState[GameState.Running=1]="Running",PlayerSchemeKeys=$affda4f11426b71ec9c71d90894$export$PlayerSchemeKeys||($affda4f11426b71ec9c71d90894$var$_temp2=$affda4f11426b71ec9c71d90894$export$PlayerSchemeKeys={},$affda4f11426b71ec9c71d90894$var$_temp2),PlayerSchemeKeys[PlayerSchemeKeys.ArrowUp=38]="ArrowUp",PlayerSchemeKeys[PlayerSchemeKeys.ArrowDown=40]="ArrowDown",PlayerSchemeKeys[PlayerSchemeKeys.W=87]="W",PlayerSchemeKeys[PlayerSchemeKeys.S=83]="S";var $f4ff059be379072ec49371f7832aeab$export$GameStateComponent=function(e){$f4ff059be379072ec49371f7832aeab$var$_inherits(r,e);var t=$f4ff059be379072ec49371f7832aeab$var$_createSuper(r);function r(){return $f4ff059be379072ec49371f7832aeab$var$_classCallCheck(this,r),t.apply(this,arguments)}return r}($decf1c164269c27537fd8e1a6712$export$Component);function $ba40b628c6cd9199ca9ca077fd40f61f$var$_typeof(e){return($ba40b628c6cd9199ca9ca077fd40f61f$var$_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $ba40b628c6cd9199ca9ca077fd40f61f$var$_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $ba40b628c6cd9199ca9ca077fd40f61f$var$_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$ba40b628c6cd9199ca9ca077fd40f61f$var$_setPrototypeOf(e,t)}function $ba40b628c6cd9199ca9ca077fd40f61f$var$_setPrototypeOf(e,t){return($ba40b628c6cd9199ca9ca077fd40f61f$var$_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $ba40b628c6cd9199ca9ca077fd40f61f$var$_createSuper(e){var t=$ba40b628c6cd9199ca9ca077fd40f61f$var$_isNativeReflectConstruct();return function(){var r,o=$ba40b628c6cd9199ca9ca077fd40f61f$var$_getPrototypeOf(e);if(t){var a=$ba40b628c6cd9199ca9ca077fd40f61f$var$_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return $ba40b628c6cd9199ca9ca077fd40f61f$var$_possibleConstructorReturn(this,r)}}function $ba40b628c6cd9199ca9ca077fd40f61f$var$_possibleConstructorReturn(e,t){return!t||"object"!==$ba40b628c6cd9199ca9ca077fd40f61f$var$_typeof(t)&&"function"!=typeof t?$ba40b628c6cd9199ca9ca077fd40f61f$var$_assertThisInitialized(e):t}function $ba40b628c6cd9199ca9ca077fd40f61f$var$_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $ba40b628c6cd9199ca9ca077fd40f61f$var$_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function $ba40b628c6cd9199ca9ca077fd40f61f$var$_getPrototypeOf(e){return($ba40b628c6cd9199ca9ca077fd40f61f$var$_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $ba40b628c6cd9199ca9ca077fd40f61f$var$_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}$f4ff059be379072ec49371f7832aeab$var$_defineProperty($f4ff059be379072ec49371f7832aeab$export$GameStateComponent,"schema",{state:{type:$cf1860c19e1a5c017204f0ab320c65$export$Types.Number,default:$affda4f11426b71ec9c71d90894$export$GameState.Waiting},player1:{type:$ca82fe984a10818c9db0c3ccdc68316c$export$PlayerType},player2:{type:$ca82fe984a10818c9db0c3ccdc68316c$export$PlayerType},pressedKeyCodes:{type:$cf1860c19e1a5c017204f0ab320c65$export$Types.Array}});var $ba40b628c6cd9199ca9ca077fd40f61f$export$MovementComponent=function(e){$ba40b628c6cd9199ca9ca077fd40f61f$var$_inherits(r,e);var t=$ba40b628c6cd9199ca9ca077fd40f61f$var$_createSuper(r);function r(){return $ba40b628c6cd9199ca9ca077fd40f61f$var$_classCallCheck(this,r),t.apply(this,arguments)}return r}($decf1c164269c27537fd8e1a6712$export$Component);function $d491668b4c0e44f7e919739ab3564$var$_typeof(e){return($d491668b4c0e44f7e919739ab3564$var$_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $d491668b4c0e44f7e919739ab3564$var$_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $d491668b4c0e44f7e919739ab3564$var$_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$d491668b4c0e44f7e919739ab3564$var$_setPrototypeOf(e,t)}function $d491668b4c0e44f7e919739ab3564$var$_setPrototypeOf(e,t){return($d491668b4c0e44f7e919739ab3564$var$_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $d491668b4c0e44f7e919739ab3564$var$_createSuper(e){var t=$d491668b4c0e44f7e919739ab3564$var$_isNativeReflectConstruct();return function(){var r,o=$d491668b4c0e44f7e919739ab3564$var$_getPrototypeOf(e);if(t){var a=$d491668b4c0e44f7e919739ab3564$var$_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return $d491668b4c0e44f7e919739ab3564$var$_possibleConstructorReturn(this,r)}}function $d491668b4c0e44f7e919739ab3564$var$_possibleConstructorReturn(e,t){return!t||"object"!==$d491668b4c0e44f7e919739ab3564$var$_typeof(t)&&"function"!=typeof t?$d491668b4c0e44f7e919739ab3564$var$_assertThisInitialized(e):t}function $d491668b4c0e44f7e919739ab3564$var$_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $d491668b4c0e44f7e919739ab3564$var$_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function $d491668b4c0e44f7e919739ab3564$var$_getPrototypeOf(e){return($d491668b4c0e44f7e919739ab3564$var$_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $d491668b4c0e44f7e919739ab3564$var$_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}$ba40b628c6cd9199ca9ca077fd40f61f$var$_defineProperty($ba40b628c6cd9199ca9ca077fd40f61f$export$MovementComponent,"schema",{direction:{type:$f013ca1b753de4192844747a0a914fc1$export$Vector2Type},velocity:{type:$cf1860c19e1a5c017204f0ab320c65$export$Types.Number},isEnabled:{type:$cf1860c19e1a5c017204f0ab320c65$export$Types.Boolean,default:!0}});var $d491668b4c0e44f7e919739ab3564$export$PaddleComponent=function(e){$d491668b4c0e44f7e919739ab3564$var$_inherits(r,e);var t=$d491668b4c0e44f7e919739ab3564$var$_createSuper(r);function r(){return $d491668b4c0e44f7e919739ab3564$var$_classCallCheck(this,r),t.apply(this,arguments)}return r}($decf1c164269c27537fd8e1a6712$export$Component);function $ab4789819c591cb9a2e8e468a95f481$var$_typeof(e){return($ab4789819c591cb9a2e8e468a95f481$var$_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $ab4789819c591cb9a2e8e468a95f481$var$_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $ab4789819c591cb9a2e8e468a95f481$var$_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$ab4789819c591cb9a2e8e468a95f481$var$_setPrototypeOf(e,t)}function $ab4789819c591cb9a2e8e468a95f481$var$_setPrototypeOf(e,t){return($ab4789819c591cb9a2e8e468a95f481$var$_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $ab4789819c591cb9a2e8e468a95f481$var$_createSuper(e){var t=$ab4789819c591cb9a2e8e468a95f481$var$_isNativeReflectConstruct();return function(){var r,o=$ab4789819c591cb9a2e8e468a95f481$var$_getPrototypeOf(e);if(t){var a=$ab4789819c591cb9a2e8e468a95f481$var$_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return $ab4789819c591cb9a2e8e468a95f481$var$_possibleConstructorReturn(this,r)}}function $ab4789819c591cb9a2e8e468a95f481$var$_possibleConstructorReturn(e,t){return!t||"object"!==$ab4789819c591cb9a2e8e468a95f481$var$_typeof(t)&&"function"!=typeof t?$ab4789819c591cb9a2e8e468a95f481$var$_assertThisInitialized(e):t}function $ab4789819c591cb9a2e8e468a95f481$var$_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $ab4789819c591cb9a2e8e468a95f481$var$_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function $ab4789819c591cb9a2e8e468a95f481$var$_getPrototypeOf(e){return($ab4789819c591cb9a2e8e468a95f481$var$_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $ab4789819c591cb9a2e8e468a95f481$var$_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}$d491668b4c0e44f7e919739ab3564$var$_defineProperty($d491668b4c0e44f7e919739ab3564$export$PaddleComponent,"schema",{playerIndex:{type:$cf1860c19e1a5c017204f0ab320c65$export$Types.Number}});var $ab4789819c591cb9a2e8e468a95f481$export$PositionComponent=function(e){$ab4789819c591cb9a2e8e468a95f481$var$_inherits(r,e);var t=$ab4789819c591cb9a2e8e468a95f481$var$_createSuper(r);function r(){return $ab4789819c591cb9a2e8e468a95f481$var$_classCallCheck(this,r),t.apply(this,arguments)}return r}($decf1c164269c27537fd8e1a6712$export$Component);function $aa6eafa48d1015cbfbef07b39b2694e$var$_typeof(e){return($aa6eafa48d1015cbfbef07b39b2694e$var$_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $aa6eafa48d1015cbfbef07b39b2694e$var$_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $aa6eafa48d1015cbfbef07b39b2694e$var$_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$aa6eafa48d1015cbfbef07b39b2694e$var$_setPrototypeOf(e,t)}function $aa6eafa48d1015cbfbef07b39b2694e$var$_setPrototypeOf(e,t){return($aa6eafa48d1015cbfbef07b39b2694e$var$_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $aa6eafa48d1015cbfbef07b39b2694e$var$_createSuper(e){var t=$aa6eafa48d1015cbfbef07b39b2694e$var$_isNativeReflectConstruct();return function(){var r,o=$aa6eafa48d1015cbfbef07b39b2694e$var$_getPrototypeOf(e);if(t){var a=$aa6eafa48d1015cbfbef07b39b2694e$var$_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return $aa6eafa48d1015cbfbef07b39b2694e$var$_possibleConstructorReturn(this,r)}}function $aa6eafa48d1015cbfbef07b39b2694e$var$_possibleConstructorReturn(e,t){return!t||"object"!==$aa6eafa48d1015cbfbef07b39b2694e$var$_typeof(t)&&"function"!=typeof t?$aa6eafa48d1015cbfbef07b39b2694e$var$_assertThisInitialized(e):t}function $aa6eafa48d1015cbfbef07b39b2694e$var$_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $aa6eafa48d1015cbfbef07b39b2694e$var$_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function $aa6eafa48d1015cbfbef07b39b2694e$var$_getPrototypeOf(e){return($aa6eafa48d1015cbfbef07b39b2694e$var$_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $aa6eafa48d1015cbfbef07b39b2694e$var$_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}$ab4789819c591cb9a2e8e468a95f481$var$_defineProperty($ab4789819c591cb9a2e8e468a95f481$export$PositionComponent,"schema",{value:{type:$f013ca1b753de4192844747a0a914fc1$export$Vector2Type}});var $aa6eafa48d1015cbfbef07b39b2694e$export$RenderComponent=function(e){$aa6eafa48d1015cbfbef07b39b2694e$var$_inherits(r,e);var t=$aa6eafa48d1015cbfbef07b39b2694e$var$_createSuper(r);function r(){return $aa6eafa48d1015cbfbef07b39b2694e$var$_classCallCheck(this,r),t.apply(this,arguments)}return r}($decf1c164269c27537fd8e1a6712$export$Component);function $e916af20538cb0bb41ac03079687$var$_typeof(e){return($e916af20538cb0bb41ac03079687$var$_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e916af20538cb0bb41ac03079687$var$_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $e916af20538cb0bb41ac03079687$var$_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e916af20538cb0bb41ac03079687$var$_setPrototypeOf(e,t)}function $e916af20538cb0bb41ac03079687$var$_setPrototypeOf(e,t){return($e916af20538cb0bb41ac03079687$var$_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $e916af20538cb0bb41ac03079687$var$_createSuper(e){var t=$e916af20538cb0bb41ac03079687$var$_isNativeReflectConstruct();return function(){var r,o=$e916af20538cb0bb41ac03079687$var$_getPrototypeOf(e);if(t){var a=$e916af20538cb0bb41ac03079687$var$_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return $e916af20538cb0bb41ac03079687$var$_possibleConstructorReturn(this,r)}}function $e916af20538cb0bb41ac03079687$var$_possibleConstructorReturn(e,t){return!t||"object"!==$e916af20538cb0bb41ac03079687$var$_typeof(t)&&"function"!=typeof t?$e916af20538cb0bb41ac03079687$var$_assertThisInitialized(e):t}function $e916af20538cb0bb41ac03079687$var$_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $e916af20538cb0bb41ac03079687$var$_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function $e916af20538cb0bb41ac03079687$var$_getPrototypeOf(e){return($e916af20538cb0bb41ac03079687$var$_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $e916af20538cb0bb41ac03079687$var$_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}$aa6eafa48d1015cbfbef07b39b2694e$var$_defineProperty($aa6eafa48d1015cbfbef07b39b2694e$export$RenderComponent,"schema",{primitive:{type:$cf1860c19e1a5c017204f0ab320c65$export$Types.String,default:"box"},isEnabled:{type:$cf1860c19e1a5c017204f0ab320c65$export$Types.Boolean,default:!0}});var $e916af20538cb0bb41ac03079687$export$SizeComponent=function(e){$e916af20538cb0bb41ac03079687$var$_inherits(r,e);var t=$e916af20538cb0bb41ac03079687$var$_createSuper(r);function r(){return $e916af20538cb0bb41ac03079687$var$_classCallCheck(this,r),t.apply(this,arguments)}return r}($decf1c164269c27537fd8e1a6712$export$Component);function $d3a480b899755da678d323dda19af2$export$createBall(e,t,r,o,a){return e.createEntity().addComponent($d87b2fc0173f558f40cf8a586c101d$export$BallComponent,{initialPosition:t,initialVelocity:a}).addComponent($aa6eafa48d1015cbfbef07b39b2694e$export$RenderComponent,{primitive:"circle"}).addComponent($ba40b628c6cd9199ca9ca077fd40f61f$export$MovementComponent,{direction:r,velocity:a}).addComponent($ab4789819c591cb9a2e8e468a95f481$export$PositionComponent,{value:t}).addComponent($e916af20538cb0bb41ac03079687$export$SizeComponent,{value:new $f013ca1b753de4192844747a0a914fc1$export$Vector2(2*o,2*o)}).addComponent($d35c1c9888b410c27ffeb6e89367fa$export$CollisionBoxComponent)}function $db73b6f84524b92100f3085$export$createPaddle(e,t,r,o,a,n){return e.createEntity().addComponent($d491668b4c0e44f7e919739ab3564$export$PaddleComponent,{playerIndex:t}).addComponent($aa6eafa48d1015cbfbef07b39b2694e$export$RenderComponent,{primitive:"rect"}).addComponent($ba40b628c6cd9199ca9ca077fd40f61f$export$MovementComponent,{direction:o,velocity:a}).addComponent($ab4789819c591cb9a2e8e468a95f481$export$PositionComponent,{value:r}).addComponent($e916af20538cb0bb41ac03079687$export$SizeComponent,{value:n}).addComponent($d35c1c9888b410c27ffeb6e89367fa$export$CollisionBoxComponent)}function $e65c8e9d999c72762961f10946c1f01$var$_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $e65c8e9d999c72762961f10946c1f01$var$_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $e65c8e9d999c72762961f10946c1f01$var$_createClass(e,t,r){return t&&$e65c8e9d999c72762961f10946c1f01$var$_defineProperties(e.prototype,t),r&&$e65c8e9d999c72762961f10946c1f01$var$_defineProperties(e,r),e}$e916af20538cb0bb41ac03079687$var$_defineProperty($e916af20538cb0bb41ac03079687$export$SizeComponent,"schema",{value:{type:$f013ca1b753de4192844747a0a914fc1$export$Vector2Type}});var $e65c8e9d999c72762961f10946c1f01$export$BoxCollision=function(){function e(){$e65c8e9d999c72762961f10946c1f01$var$_classCallCheck(this,e)}return $e65c8e9d999c72762961f10946c1f01$var$_createClass(e,null,[{key:"isColliding",value:function(e,t){return e.position.x<t.position.x+t.dimensions.x&&e.position.x+e.dimensions.x>t.position.x&&e.position.y<t.position.y+t.dimensions.y&&e.position.y+e.dimensions.y>t.position.y}}]),e}();function $b28d6e99c9483ae9394ee9301dc$var$_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $b28d6e99c9483ae9394ee9301dc$var$_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $b28d6e99c9483ae9394ee9301dc$var$_createClass(e,t,r){return t&&$b28d6e99c9483ae9394ee9301dc$var$_defineProperties(e.prototype,t),r&&$b28d6e99c9483ae9394ee9301dc$var$_defineProperties(e,r),e}var $b28d6e99c9483ae9394ee9301dc$export$Random=function(){function e(){$b28d6e99c9483ae9394ee9301dc$var$_classCallCheck(this,e)}return $b28d6e99c9483ae9394ee9301dc$var$_createClass(e,null,[{key:"getRandomArbitrary",value:function(e,t){return Math.random()*(t-e)+e}},{key:"getMinusOrPlusOne",value:function(){return e.getRandomArbitrary(0,1)<.5?-1:1}},{key:"getRandomDirection",value:function(){return new $f013ca1b753de4192844747a0a914fc1$export$Vector2(e.getMinusOrPlusOne(),e.getMinusOrPlusOne())}}]),e}();function $f4a8a8c1ff5238d9a30016ceb72df614$var$_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $f4a8a8c1ff5238d9a30016ceb72df614$var$_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $f4a8a8c1ff5238d9a30016ceb72df614$var$_createClass(e,t,r){return t&&$f4a8a8c1ff5238d9a30016ceb72df614$var$_defineProperties(e.prototype,t),r&&$f4a8a8c1ff5238d9a30016ceb72df614$var$_defineProperties(e,r),e}var $f4a8a8c1ff5238d9a30016ceb72df614$export$VectorMath=function(){function e(){$f4a8a8c1ff5238d9a30016ceb72df614$var$_classCallCheck(this,e)}return $f4a8a8c1ff5238d9a30016ceb72df614$var$_createClass(e,null,[{key:"add",value:function(e,t){return new $f013ca1b753de4192844747a0a914fc1$export$Vector2(e.x+t.x,e.y+t.y)}},{key:"multiply",value:function(e,t){return t instanceof $f013ca1b753de4192844747a0a914fc1$export$Vector2?new $f013ca1b753de4192844747a0a914fc1$export$Vector2(e.x*t.x,e.y*t.y):new $f013ca1b753de4192844747a0a914fc1$export$Vector2(e.x*t,e.y*t)}}]),e}();function $b82e31d5677b27b49704821aed2e85bc$var$_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $b82e31d5677b27b49704821aed2e85bc$var$_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $b82e31d5677b27b49704821aed2e85bc$var$_createClass(e,t,r){return t&&$b82e31d5677b27b49704821aed2e85bc$var$_defineProperties(e.prototype,t),r&&$b82e31d5677b27b49704821aed2e85bc$var$_defineProperties(e,r),e}var $b82e31d5677b27b49704821aed2e85bc$export$PongScene=function(){function e(){$b82e31d5677b27b49704821aed2e85bc$var$_classCallCheck(this,e)}return $b82e31d5677b27b49704821aed2e85bc$var$_createClass(e,[{key:"load",value:function(e,t){this.ball=$d3a480b899755da678d323dda19af2$export$createBall(e,new $f013ca1b753de4192844747a0a914fc1$export$Vector2(t.width/2-10,t.height/2-10),$b28d6e99c9483ae9394ee9301dc$export$Random.getRandomDirection(),10,3);var r=new $f013ca1b753de4192844747a0a914fc1$export$Vector2(20,120);this.paddle1=$db73b6f84524b92100f3085$export$createPaddle(e,0,new $f013ca1b753de4192844747a0a914fc1$export$Vector2(10,t.height/2-r.y/2),new $f013ca1b753de4192844747a0a914fc1$export$Vector2,6,r),this.paddle2=$db73b6f84524b92100f3085$export$createPaddle(e,1,new $f013ca1b753de4192844747a0a914fc1$export$Vector2(t.width-r.x-10,t.height/2-r.y/2),new $f013ca1b753de4192844747a0a914fc1$export$Vector2,6,r)}},{key:"unload",value:function(){this.ball.remove(),this.paddle1.remove(),this.paddle2.remove()}}]),e}();function $f48a2a2b9199163fa5dec0294a3b4556$var$_typeof(e){return($f48a2a2b9199163fa5dec0294a3b4556$var$_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $f48a2a2b9199163fa5dec0294a3b4556$var$_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $f48a2a2b9199163fa5dec0294a3b4556$var$_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $f48a2a2b9199163fa5dec0294a3b4556$var$_createClass(e,t,r){return t&&$f48a2a2b9199163fa5dec0294a3b4556$var$_defineProperties(e.prototype,t),r&&$f48a2a2b9199163fa5dec0294a3b4556$var$_defineProperties(e,r),e}function $f48a2a2b9199163fa5dec0294a3b4556$var$_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$f48a2a2b9199163fa5dec0294a3b4556$var$_setPrototypeOf(e,t)}function $f48a2a2b9199163fa5dec0294a3b4556$var$_setPrototypeOf(e,t){return($f48a2a2b9199163fa5dec0294a3b4556$var$_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $f48a2a2b9199163fa5dec0294a3b4556$var$_createSuper(e){var t=$f48a2a2b9199163fa5dec0294a3b4556$var$_isNativeReflectConstruct();return function(){var r,o=$f48a2a2b9199163fa5dec0294a3b4556$var$_getPrototypeOf(e);if(t){var a=$f48a2a2b9199163fa5dec0294a3b4556$var$_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return $f48a2a2b9199163fa5dec0294a3b4556$var$_possibleConstructorReturn(this,r)}}function $f48a2a2b9199163fa5dec0294a3b4556$var$_possibleConstructorReturn(e,t){return!t||"object"!==$f48a2a2b9199163fa5dec0294a3b4556$var$_typeof(t)&&"function"!=typeof t?$f48a2a2b9199163fa5dec0294a3b4556$var$_assertThisInitialized(e):t}function $f48a2a2b9199163fa5dec0294a3b4556$var$_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $f48a2a2b9199163fa5dec0294a3b4556$var$_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function $f48a2a2b9199163fa5dec0294a3b4556$var$_getPrototypeOf(e){return($f48a2a2b9199163fa5dec0294a3b4556$var$_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $f48a2a2b9199163fa5dec0294a3b4556$var$_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $f48a2a2b9199163fa5dec0294a3b4556$export$BallSystem=function(e){$f48a2a2b9199163fa5dec0294a3b4556$var$_inherits(r,e);var t=$f48a2a2b9199163fa5dec0294a3b4556$var$_createSuper(r);function r(){return $f48a2a2b9199163fa5dec0294a3b4556$var$_classCallCheck(this,r),t.apply(this,arguments)}return $f48a2a2b9199163fa5dec0294a3b4556$var$_createClass(r,[{key:"execute",value:function(){var e=this.queries.gameState.results[0],t=this.queries.balls.results,r=e.getMutableComponent($f4ff059be379072ec49371f7832aeab$export$GameStateComponent);t.forEach((function(e){var t=e.getComponent($d35c1c9888b410c27ffeb6e89367fa$export$CollisionBoxComponent),o=t.wallCollision,a=t.collidingEntities,n=e.getComponent($e916af20538cb0bb41ac03079687$export$SizeComponent),c=e.getMutableComponent($ab4789819c591cb9a2e8e468a95f481$export$PositionComponent),f=e.getMutableComponent($ba40b628c6cd9199ca9ca077fd40f61f$export$MovementComponent);if(a.length){var i=a[0],s=i.getComponent($ab4789819c591cb9a2e8e468a95f481$export$PositionComponent),$=i.getComponent($e916af20538cb0bb41ac03079687$export$SizeComponent);f.direction.x=-f.direction.x,c.value.x=s.value.x+$.value.x*f.direction.x}if(0!==o.y&&(f.direction.y=-f.direction.y,f.velocity+=.2,c.value.y=c.value.y+n.value.x/2*f.direction.y),0!==o.x){var b=e.getComponent($d87b2fc0173f558f40cf8a586c101d$export$BallComponent),d=b.initialPosition,p=b.initialVelocity;f.velocity=p,c.value=d,f.direction=new $f013ca1b753de4192844747a0a914fc1$export$Vector2(f.direction.x,$b28d6e99c9483ae9394ee9301dc$export$Random.getMinusOrPlusOne()),r[1==o.x?"player1":"player2"].score++,r.state=$affda4f11426b71ec9c71d90894$export$GameState.Waiting}}))}}]),r}($ec2b47e01b1dec22d8da0f20cfe1aed2$export$System);function $f0bb9551e2cd7964850f026a75c1$var$_typeof(e){return($f0bb9551e2cd7964850f026a75c1$var$_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $f0bb9551e2cd7964850f026a75c1$var$_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $f0bb9551e2cd7964850f026a75c1$var$_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $f0bb9551e2cd7964850f026a75c1$var$_createClass(e,t,r){return t&&$f0bb9551e2cd7964850f026a75c1$var$_defineProperties(e.prototype,t),r&&$f0bb9551e2cd7964850f026a75c1$var$_defineProperties(e,r),e}function $f0bb9551e2cd7964850f026a75c1$var$_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$f0bb9551e2cd7964850f026a75c1$var$_setPrototypeOf(e,t)}function $f0bb9551e2cd7964850f026a75c1$var$_setPrototypeOf(e,t){return($f0bb9551e2cd7964850f026a75c1$var$_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $f0bb9551e2cd7964850f026a75c1$var$_createSuper(e){var t=$f0bb9551e2cd7964850f026a75c1$var$_isNativeReflectConstruct();return function(){var r,o=$f0bb9551e2cd7964850f026a75c1$var$_getPrototypeOf(e);if(t){var a=$f0bb9551e2cd7964850f026a75c1$var$_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return $f0bb9551e2cd7964850f026a75c1$var$_possibleConstructorReturn(this,r)}}function $f0bb9551e2cd7964850f026a75c1$var$_possibleConstructorReturn(e,t){return!t||"object"!==$f0bb9551e2cd7964850f026a75c1$var$_typeof(t)&&"function"!=typeof t?$f0bb9551e2cd7964850f026a75c1$var$_assertThisInitialized(e):t}function $f0bb9551e2cd7964850f026a75c1$var$_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $f0bb9551e2cd7964850f026a75c1$var$_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function $f0bb9551e2cd7964850f026a75c1$var$_getPrototypeOf(e){return($f0bb9551e2cd7964850f026a75c1$var$_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $f0bb9551e2cd7964850f026a75c1$var$_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}$f48a2a2b9199163fa5dec0294a3b4556$var$_defineProperty($f48a2a2b9199163fa5dec0294a3b4556$export$BallSystem,"queries",{gameState:{components:[$f4ff059be379072ec49371f7832aeab$export$GameStateComponent]},balls:{components:[$d87b2fc0173f558f40cf8a586c101d$export$BallComponent]}});var $f0bb9551e2cd7964850f026a75c1$export$CollisionSystem=function(e){$f0bb9551e2cd7964850f026a75c1$var$_inherits(r,e);var t=$f0bb9551e2cd7964850f026a75c1$var$_createSuper(r);function r(){return $f0bb9551e2cd7964850f026a75c1$var$_classCallCheck(this,r),t.apply(this,arguments)}return $f0bb9551e2cd7964850f026a75c1$var$_createClass(r,[{key:"execute",value:function(){var e=this.queries.canvas.results[0],t=this.queries.collidables.results,r=e.getComponent($a864a5be02647c0d657033e75a743b1f$export$CanvasContextComponent);t.forEach((function(e){var o=e.getMutableComponent($d35c1c9888b410c27ffeb6e89367fa$export$CollisionBoxComponent),a=e.getMutableComponent($ab4789819c591cb9a2e8e468a95f481$export$PositionComponent),n=e.getComponent($e916af20538cb0bb41ac03079687$export$SizeComponent);o.collidingEntities=[],a.value.y>r.height-n.value.y?o.wallCollision.y=1:a.value.y<0?o.wallCollision.y=-1:o.wallCollision.y=0,a.value.x>r.width-n.value.x?o.wallCollision.x=1:a.value.x<0?o.wallCollision.x=-1:o.wallCollision.x=0,t.filter((function(t){return t.id!=e.id})).forEach((function(e){var t=e.getComponent($e916af20538cb0bb41ac03079687$export$SizeComponent),r=e.getComponent($ab4789819c591cb9a2e8e468a95f481$export$PositionComponent);$e65c8e9d999c72762961f10946c1f01$export$BoxCollision.isColliding({dimensions:n.value,position:a.value},{dimensions:t.value,position:r.value})&&o.collidingEntities.push(e)}))}))}}]),r}($ec2b47e01b1dec22d8da0f20cfe1aed2$export$System);function $cd3a77234b430729b1b3bc71af9e0d3f$var$_typeof(e){return($cd3a77234b430729b1b3bc71af9e0d3f$var$_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $cd3a77234b430729b1b3bc71af9e0d3f$var$_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $cd3a77234b430729b1b3bc71af9e0d3f$var$_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $cd3a77234b430729b1b3bc71af9e0d3f$var$_createClass(e,t,r){return t&&$cd3a77234b430729b1b3bc71af9e0d3f$var$_defineProperties(e.prototype,t),r&&$cd3a77234b430729b1b3bc71af9e0d3f$var$_defineProperties(e,r),e}function $cd3a77234b430729b1b3bc71af9e0d3f$var$_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$cd3a77234b430729b1b3bc71af9e0d3f$var$_setPrototypeOf(e,t)}function $cd3a77234b430729b1b3bc71af9e0d3f$var$_setPrototypeOf(e,t){return($cd3a77234b430729b1b3bc71af9e0d3f$var$_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $cd3a77234b430729b1b3bc71af9e0d3f$var$_createSuper(e){var t=$cd3a77234b430729b1b3bc71af9e0d3f$var$_isNativeReflectConstruct();return function(){var r,o=$cd3a77234b430729b1b3bc71af9e0d3f$var$_getPrototypeOf(e);if(t){var a=$cd3a77234b430729b1b3bc71af9e0d3f$var$_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return $cd3a77234b430729b1b3bc71af9e0d3f$var$_possibleConstructorReturn(this,r)}}function $cd3a77234b430729b1b3bc71af9e0d3f$var$_possibleConstructorReturn(e,t){return!t||"object"!==$cd3a77234b430729b1b3bc71af9e0d3f$var$_typeof(t)&&"function"!=typeof t?$cd3a77234b430729b1b3bc71af9e0d3f$var$_assertThisInitialized(e):t}function $cd3a77234b430729b1b3bc71af9e0d3f$var$_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $cd3a77234b430729b1b3bc71af9e0d3f$var$_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function $cd3a77234b430729b1b3bc71af9e0d3f$var$_getPrototypeOf(e){return($cd3a77234b430729b1b3bc71af9e0d3f$var$_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $cd3a77234b430729b1b3bc71af9e0d3f$var$_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}$f0bb9551e2cd7964850f026a75c1$var$_defineProperty($f0bb9551e2cd7964850f026a75c1$export$CollisionSystem,"queries",{canvas:{components:[$a864a5be02647c0d657033e75a743b1f$export$CanvasContextComponent]},collidables:{components:[$d35c1c9888b410c27ffeb6e89367fa$export$CollisionBoxComponent,$e916af20538cb0bb41ac03079687$export$SizeComponent]}});var $cd3a77234b430729b1b3bc71af9e0d3f$export$GameSystem=function(e){$cd3a77234b430729b1b3bc71af9e0d3f$var$_inherits(r,e);var t=$cd3a77234b430729b1b3bc71af9e0d3f$var$_createSuper(r);function r(){return $cd3a77234b430729b1b3bc71af9e0d3f$var$_classCallCheck(this,r),t.apply(this,arguments)}return $cd3a77234b430729b1b3bc71af9e0d3f$var$_createClass(r,[{key:"execute",value:function(){var e,t=this.queries.gameState.added[0];if(t){var r=t.getMutableComponent($f4ff059be379072ec49371f7832aeab$export$GameStateComponent),o=r.player1,a=r.player2;return o.element=document.querySelector('[data-player="1"]'),void(a.element=document.querySelector('[data-player="2"]'))}var n=this.queries.gameState.results[0].getMutableComponent($f4ff059be379072ec49371f7832aeab$export$GameStateComponent);($cd3a77234b430729b1b3bc71af9e0d3f$var$_defineProperty(e={},$affda4f11426b71ec9c71d90894$export$GameState.Waiting,this.waitingState),$cd3a77234b430729b1b3bc71af9e0d3f$var$_defineProperty(e,$affda4f11426b71ec9c71d90894$export$GameState.Running,this.runningState),e)[n.state](n)}},{key:"waitingState",value:function(e){var t=e.player1,r=e.player2;t.element.innerText="".concat(t.score),r.element.innerText="".concat(r.score),[$affda4f11426b71ec9c71d90894$export$PlayerSchemeKeys.ArrowUp,$affda4f11426b71ec9c71d90894$export$PlayerSchemeKeys.ArrowDown,$affda4f11426b71ec9c71d90894$export$PlayerSchemeKeys.W,$affda4f11426b71ec9c71d90894$export$PlayerSchemeKeys.S].some((function(t){return e.pressedKeyCodes.includes(t)}))&&(e.state=$affda4f11426b71ec9c71d90894$export$GameState.Running)}},{key:"runningState",value:function(e){}},{key:"pausedState",value:function(e){}}]),r}($ec2b47e01b1dec22d8da0f20cfe1aed2$export$System);function $afeebf4f20a2f0156935757fd79c25$var$_typeof(e){return($afeebf4f20a2f0156935757fd79c25$var$_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $afeebf4f20a2f0156935757fd79c25$var$_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $afeebf4f20a2f0156935757fd79c25$var$_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $afeebf4f20a2f0156935757fd79c25$var$_createClass(e,t,r){return t&&$afeebf4f20a2f0156935757fd79c25$var$_defineProperties(e.prototype,t),r&&$afeebf4f20a2f0156935757fd79c25$var$_defineProperties(e,r),e}function $afeebf4f20a2f0156935757fd79c25$var$_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$afeebf4f20a2f0156935757fd79c25$var$_setPrototypeOf(e,t)}function $afeebf4f20a2f0156935757fd79c25$var$_setPrototypeOf(e,t){return($afeebf4f20a2f0156935757fd79c25$var$_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $afeebf4f20a2f0156935757fd79c25$var$_createSuper(e){var t=$afeebf4f20a2f0156935757fd79c25$var$_isNativeReflectConstruct();return function(){var r,o=$afeebf4f20a2f0156935757fd79c25$var$_getPrototypeOf(e);if(t){var a=$afeebf4f20a2f0156935757fd79c25$var$_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return $afeebf4f20a2f0156935757fd79c25$var$_possibleConstructorReturn(this,r)}}function $afeebf4f20a2f0156935757fd79c25$var$_possibleConstructorReturn(e,t){return!t||"object"!==$afeebf4f20a2f0156935757fd79c25$var$_typeof(t)&&"function"!=typeof t?$afeebf4f20a2f0156935757fd79c25$var$_assertThisInitialized(e):t}function $afeebf4f20a2f0156935757fd79c25$var$_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $afeebf4f20a2f0156935757fd79c25$var$_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function $afeebf4f20a2f0156935757fd79c25$var$_getPrototypeOf(e){return($afeebf4f20a2f0156935757fd79c25$var$_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $afeebf4f20a2f0156935757fd79c25$var$_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}$cd3a77234b430729b1b3bc71af9e0d3f$var$_defineProperty($cd3a77234b430729b1b3bc71af9e0d3f$export$GameSystem,"queries",{gameState:{components:[$f4ff059be379072ec49371f7832aeab$export$GameStateComponent],listen:{added:!0}}});var $afeebf4f20a2f0156935757fd79c25$export$MovementSystem=function(e){$afeebf4f20a2f0156935757fd79c25$var$_inherits(r,e);var t=$afeebf4f20a2f0156935757fd79c25$var$_createSuper(r);function r(){return $afeebf4f20a2f0156935757fd79c25$var$_classCallCheck(this,r),t.apply(this,arguments)}return $afeebf4f20a2f0156935757fd79c25$var$_createClass(r,[{key:"execute",value:function(){var e=this.queries.gameState.results[0],t=this.queries.movable.results;e.getComponent($f4ff059be379072ec49371f7832aeab$export$GameStateComponent).state==$affda4f11426b71ec9c71d90894$export$GameState.Running&&t.forEach((function(e){var t=e.getMutableComponent($ba40b628c6cd9199ca9ca077fd40f61f$export$MovementComponent),r=e.getMutableComponent($ab4789819c591cb9a2e8e468a95f481$export$PositionComponent);if(t.isEnabled){var o=$f4a8a8c1ff5238d9a30016ceb72df614$export$VectorMath.multiply(t.direction,t.velocity);r.value=$f4a8a8c1ff5238d9a30016ceb72df614$export$VectorMath.add(r.value,o)}}))}}]),r}($ec2b47e01b1dec22d8da0f20cfe1aed2$export$System);function $b864c06b0908bee283e0ec866ded58e$var$_typeof(e){return($b864c06b0908bee283e0ec866ded58e$var$_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $b864c06b0908bee283e0ec866ded58e$var$_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $b864c06b0908bee283e0ec866ded58e$var$_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $b864c06b0908bee283e0ec866ded58e$var$_createClass(e,t,r){return t&&$b864c06b0908bee283e0ec866ded58e$var$_defineProperties(e.prototype,t),r&&$b864c06b0908bee283e0ec866ded58e$var$_defineProperties(e,r),e}function $b864c06b0908bee283e0ec866ded58e$var$_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$b864c06b0908bee283e0ec866ded58e$var$_setPrototypeOf(e,t)}function $b864c06b0908bee283e0ec866ded58e$var$_setPrototypeOf(e,t){return($b864c06b0908bee283e0ec866ded58e$var$_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $b864c06b0908bee283e0ec866ded58e$var$_createSuper(e){var t=$b864c06b0908bee283e0ec866ded58e$var$_isNativeReflectConstruct();return function(){var r,o=$b864c06b0908bee283e0ec866ded58e$var$_getPrototypeOf(e);if(t){var a=$b864c06b0908bee283e0ec866ded58e$var$_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return $b864c06b0908bee283e0ec866ded58e$var$_possibleConstructorReturn(this,r)}}function $b864c06b0908bee283e0ec866ded58e$var$_possibleConstructorReturn(e,t){return!t||"object"!==$b864c06b0908bee283e0ec866ded58e$var$_typeof(t)&&"function"!=typeof t?$b864c06b0908bee283e0ec866ded58e$var$_assertThisInitialized(e):t}function $b864c06b0908bee283e0ec866ded58e$var$_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $b864c06b0908bee283e0ec866ded58e$var$_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function $b864c06b0908bee283e0ec866ded58e$var$_getPrototypeOf(e){return($b864c06b0908bee283e0ec866ded58e$var$_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $b864c06b0908bee283e0ec866ded58e$var$_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}$afeebf4f20a2f0156935757fd79c25$var$_defineProperty($afeebf4f20a2f0156935757fd79c25$export$MovementSystem,"queries",{gameState:{components:[$f4ff059be379072ec49371f7832aeab$export$GameStateComponent]},movable:{components:[$ba40b628c6cd9199ca9ca077fd40f61f$export$MovementComponent,$ab4789819c591cb9a2e8e468a95f481$export$PositionComponent]}});var $b864c06b0908bee283e0ec866ded58e$export$PaddleSystem=function(e){$b864c06b0908bee283e0ec866ded58e$var$_inherits(r,e);var t=$b864c06b0908bee283e0ec866ded58e$var$_createSuper(r);function r(){var e;$b864c06b0908bee283e0ec866ded58e$var$_classCallCheck(this,r);for(var o=arguments.length,a=new Array(o),n=0;n<o;n++)a[n]=arguments[n];return $b864c06b0908bee283e0ec866ded58e$var$_defineProperty($b864c06b0908bee283e0ec866ded58e$var$_assertThisInitialized(e=t.call.apply(t,[this].concat(a))),"playersControlSchemes",{0:{up:$affda4f11426b71ec9c71d90894$export$PlayerSchemeKeys.W,down:$affda4f11426b71ec9c71d90894$export$PlayerSchemeKeys.S},1:{up:$affda4f11426b71ec9c71d90894$export$PlayerSchemeKeys.ArrowUp,down:$affda4f11426b71ec9c71d90894$export$PlayerSchemeKeys.ArrowDown}}),e}return $b864c06b0908bee283e0ec866ded58e$var$_createClass(r,[{key:"execute",value:function(){var e=this,t=this.queries.paddles.results,r=this.queries.gameState.results[0].getComponent($f4ff059be379072ec49371f7832aeab$export$GameStateComponent);t.forEach((function(t){var o=t.getComponent($d491668b4c0e44f7e919739ab3564$export$PaddleComponent),a=t.getMutableComponent($ba40b628c6cd9199ca9ca077fd40f61f$export$MovementComponent),n=t.getComponent($d35c1c9888b410c27ffeb6e89367fa$export$CollisionBoxComponent),c=e.playersControlSchemes[o.playerIndex];a.direction.y=0,r.pressedKeyCodes.includes(c.up)&&-1!=n.wallCollision.y&&(a.direction.y-=1),r.pressedKeyCodes.includes(c.down)&&1!=n.wallCollision.y&&(a.direction.y+=1)}))}}]),r}($ec2b47e01b1dec22d8da0f20cfe1aed2$export$System);function $f0b105540f9506dbe0dc33848$var$_typeof(e){return($f0b105540f9506dbe0dc33848$var$_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $f0b105540f9506dbe0dc33848$var$_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $f0b105540f9506dbe0dc33848$var$_defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $f0b105540f9506dbe0dc33848$var$_createClass(e,t,r){return t&&$f0b105540f9506dbe0dc33848$var$_defineProperties(e.prototype,t),r&&$f0b105540f9506dbe0dc33848$var$_defineProperties(e,r),e}function $f0b105540f9506dbe0dc33848$var$_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$f0b105540f9506dbe0dc33848$var$_setPrototypeOf(e,t)}function $f0b105540f9506dbe0dc33848$var$_setPrototypeOf(e,t){return($f0b105540f9506dbe0dc33848$var$_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $f0b105540f9506dbe0dc33848$var$_createSuper(e){var t=$f0b105540f9506dbe0dc33848$var$_isNativeReflectConstruct();return function(){var r,o=$f0b105540f9506dbe0dc33848$var$_getPrototypeOf(e);if(t){var a=$f0b105540f9506dbe0dc33848$var$_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return $f0b105540f9506dbe0dc33848$var$_possibleConstructorReturn(this,r)}}function $f0b105540f9506dbe0dc33848$var$_possibleConstructorReturn(e,t){return!t||"object"!==$f0b105540f9506dbe0dc33848$var$_typeof(t)&&"function"!=typeof t?$f0b105540f9506dbe0dc33848$var$_assertThisInitialized(e):t}function $f0b105540f9506dbe0dc33848$var$_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $f0b105540f9506dbe0dc33848$var$_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function $f0b105540f9506dbe0dc33848$var$_getPrototypeOf(e){return($f0b105540f9506dbe0dc33848$var$_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $f0b105540f9506dbe0dc33848$var$_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}$b864c06b0908bee283e0ec866ded58e$var$_defineProperty($b864c06b0908bee283e0ec866ded58e$export$PaddleSystem,"queries",{paddles:{components:[$d491668b4c0e44f7e919739ab3564$export$PaddleComponent]},gameState:{components:[$f4ff059be379072ec49371f7832aeab$export$GameStateComponent]}});var $f0b105540f9506dbe0dc33848$export$RendererSystem=function(e){$f0b105540f9506dbe0dc33848$var$_inherits(r,e);var t=$f0b105540f9506dbe0dc33848$var$_createSuper(r);function r(){return $f0b105540f9506dbe0dc33848$var$_classCallCheck(this,r),t.apply(this,arguments)}return $f0b105540f9506dbe0dc33848$var$_createClass(r,[{key:"execute",value:function(){var e=this,t=this.queries.canvas.results[0].getComponent($a864a5be02647c0d657033e75a743b1f$export$CanvasContextComponent),r=t.ctx,o=t.width,a=t.height;r.fillStyle="black",r.fillRect(0,0,o,a),r.strokeStyle="gray",r.fillStyle="gray",r.beginPath(),r.moveTo(o/2,0),r.lineTo(o/2,a),r.stroke(),r.beginPath(),r.arc(o/2,a/2,10,0,2*Math.PI,!1),r.fill(),this.queries.renderables.results.forEach((function(t){var o=t.getComponent($aa6eafa48d1015cbfbef07b39b2694e$export$RenderComponent),a=o.primitive,n=o.isEnabled,c=t.getComponent($ab4789819c591cb9a2e8e468a95f481$export$PositionComponent),f=t.getComponent($e916af20538cb0bb41ac03079687$export$SizeComponent);if(n){var i={rect:e.renderRect,circle:e.renderCircle};i[a]?i[a](r,c,f):console.log("".concat(a," primitive does not implement a render function"))}}))}},{key:"renderRect",value:function(e,t,r){e.beginPath(),e.rect(t.value.x,t.value.y,r.value.x,r.value.y),e.fillStyle="white",e.fill()}},{key:"renderCircle",value:function(e,t,r){e.beginPath(),e.arc(t.value.x+r.value.x/2,t.value.y+r.value.y/2,r.value.x/2,0,2*Math.PI,!1),e.fillStyle="white",e.fill()}}]),r}($ec2b47e01b1dec22d8da0f20cfe1aed2$export$System);function $b04660a404e967a338647ceb28cef6e$var$_toConsumableArray(e){return $b04660a404e967a338647ceb28cef6e$var$_arrayWithoutHoles(e)||$b04660a404e967a338647ceb28cef6e$var$_iterableToArray(e)||$b04660a404e967a338647ceb28cef6e$var$_unsupportedIterableToArray(e)||$b04660a404e967a338647ceb28cef6e$var$_nonIterableSpread()}function $b04660a404e967a338647ceb28cef6e$var$_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $b04660a404e967a338647ceb28cef6e$var$_unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return $b04660a404e967a338647ceb28cef6e$var$_arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$b04660a404e967a338647ceb28cef6e$var$_arrayLikeToArray(e,t):void 0}}function $b04660a404e967a338647ceb28cef6e$var$_iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function $b04660a404e967a338647ceb28cef6e$var$_arrayWithoutHoles(e){if(Array.isArray(e))return $b04660a404e967a338647ceb28cef6e$var$_arrayLikeToArray(e)}function $b04660a404e967a338647ceb28cef6e$var$_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}$f0b105540f9506dbe0dc33848$var$_defineProperty($f0b105540f9506dbe0dc33848$export$RendererSystem,"queries",{canvas:{components:[$a864a5be02647c0d657033e75a743b1f$export$CanvasContextComponent]},renderables:{components:[$aa6eafa48d1015cbfbef07b39b2694e$export$RenderComponent]}});var $b04660a404e967a338647ceb28cef6e$export$world=new $d869f60daaac5d27acba8efd631f22e$export$World;$b04660a404e967a338647ceb28cef6e$export$world.registerComponent($d87b2fc0173f558f40cf8a586c101d$export$BallComponent).registerComponent($a864a5be02647c0d657033e75a743b1f$export$CanvasContextComponent).registerComponent($d35c1c9888b410c27ffeb6e89367fa$export$CollisionBoxComponent).registerComponent($f4ff059be379072ec49371f7832aeab$export$GameStateComponent).registerComponent($ba40b628c6cd9199ca9ca077fd40f61f$export$MovementComponent).registerComponent($ab4789819c591cb9a2e8e468a95f481$export$PositionComponent).registerComponent($d491668b4c0e44f7e919739ab3564$export$PaddleComponent).registerComponent($aa6eafa48d1015cbfbef07b39b2694e$export$RenderComponent).registerComponent($e916af20538cb0bb41ac03079687$export$SizeComponent).registerSystem($cd3a77234b430729b1b3bc71af9e0d3f$export$GameSystem).registerSystem($afeebf4f20a2f0156935757fd79c25$export$MovementSystem).registerSystem($f0bb9551e2cd7964850f026a75c1$export$CollisionSystem).registerSystem($b864c06b0908bee283e0ec866ded58e$export$PaddleSystem).registerSystem($f48a2a2b9199163fa5dec0294a3b4556$export$BallSystem).registerSystem($f0b105540f9506dbe0dc33848$export$RendererSystem);var $b04660a404e967a338647ceb28cef6e$var$gameStateEntity=$b04660a404e967a338647ceb28cef6e$export$world.createEntity().addComponent($f4ff059be379072ec49371f7832aeab$export$GameStateComponent),$b04660a404e967a338647ceb28cef6e$var$gameState=$b04660a404e967a338647ceb28cef6e$var$gameStateEntity.getMutableComponent($f4ff059be379072ec49371f7832aeab$export$GameStateComponent),$b04660a404e967a338647ceb28cef6e$var$canvas=document.getElementById("game");$b04660a404e967a338647ceb28cef6e$export$world.createEntity().addComponent($a864a5be02647c0d657033e75a743b1f$export$CanvasContextComponent,{ctx:$b04660a404e967a338647ceb28cef6e$var$canvas.getContext("2d"),width:$b04660a404e967a338647ceb28cef6e$var$canvas.width,height:$b04660a404e967a338647ceb28cef6e$var$canvas.height});var $b04660a404e967a338647ceb28cef6e$var$pongScene=new $b82e31d5677b27b49704821aed2e85bc$export$PongScene;function $b04660a404e967a338647ceb28cef6e$var$update(){$b04660a404e967a338647ceb28cef6e$export$world.execute(),requestAnimationFrame($b04660a404e967a338647ceb28cef6e$var$update)}$b04660a404e967a338647ceb28cef6e$var$pongScene.load($b04660a404e967a338647ceb28cef6e$export$world,$b04660a404e967a338647ceb28cef6e$var$canvas),window.addEventListener("keydown",(function(e){[$affda4f11426b71ec9c71d90894$export$PlayerSchemeKeys.ArrowDown,$affda4f11426b71ec9c71d90894$export$PlayerSchemeKeys.ArrowUp].includes(e.keyCode)&&e.preventDefault(),$b04660a404e967a338647ceb28cef6e$var$gameState.pressedKeyCodes=[].concat($b04660a404e967a338647ceb28cef6e$var$_toConsumableArray($b04660a404e967a338647ceb28cef6e$var$gameState.pressedKeyCodes),[e.keyCode])}),!1),window.addEventListener("keyup",(function(e){$b04660a404e967a338647ceb28cef6e$var$gameState.pressedKeyCodes=$b04660a404e967a338647ceb28cef6e$var$gameState.pressedKeyCodes.filter((function(t){return t!==e.keyCode}))}),!1),$b04660a404e967a338647ceb28cef6e$var$update()}();
//# sourceMappingURL=pong-ecsy.ee54f195.js.map
