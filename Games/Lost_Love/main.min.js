!(function () {
  "use strict";
  function e() {
    return "undefined" != typeof AudioContext
      ? new AudioContext()
      : "undefined" != typeof webkitAudioContext
      ? new webkitAudioContext()
      : "undefined" != typeof mozAudioContext
      ? new mozAudioContext()
      : (($ = !0), void console.log("Web Audio API is not supported"));
  }
  function t(e) {
    return e > 0 ? 1 : -1;
  }
  function a(e, t, a, n, r) {
    return n + ((e - t) / (a - t)) * (r - n);
  }
  function n(e, t, a, n) {
    return (a * e) / n + t;
  }
  function r(e) {
    if (e >= U) return f(1), p("LOST LOVE"), void (be = !1);
    for (
      f(pe[e].m),
        p(pe[e].id),
        be = !1,
        oe.length = 0,
        we = pe[e].w,
        I = we.length / 9,
        E = 0;
      E < I;
      E++
    )
      ((V = {}).x1 = 10 * parseInt(we.substr(1 + 9 * E, 2), 16)),
        (V.y1 = 10 * parseInt(we.substr(3 + 9 * E, 2), 16)),
        (V.x2 = 10 * parseInt(we.substr(5 + 9 * E, 2), 16)),
        (V.y2 = 10 * parseInt(we.substr(7 + 9 * E, 2), 16)),
        (V.v = parseInt(we.substr(0 + 9 * E, 1), 16)),
        oe.push(V);
    o(e);
  }
  function o(e) {
    (re = 0),
      (ye.x = pe[e].hx),
      (ye.y = pe[e].hy),
      (me.x = pe[e].px),
      (me.y = pe[e].py),
      (ne = pe[e].t);
  }
  function c() {
    ye.t++,
      (ye.s = n(ye.t, 1.2, 0.6, 150)),
      _ && (me.x += ue),
      ee && (me.x -= ue),
      te && (me.y -= ue),
      ae && (me.y += ue),
      i(),
      u();
  }
  function i() {
    ne - ++re / 60 <= 0 &&
      ((be = !1), (le = !0), se--, v(), 0 === se ? (f(2), (de = !0)) : f(3)),
      L(ne - re / 60);
  }
  function u() {
    for (I = oe.length, E = 0; E < I; E++)
      (V = oe[E]).v
        ? me.y >= V.y1 - me.q &&
          me.y < V.y2 + me.q &&
          ((N = me.x - V.x1),
          Math.abs(N) < me.r && ((me.x += 15 * t(N)), y(!0)))
        : me.x >= V.x1 - me.q &&
          me.x < V.x2 + me.q &&
          ((R = me.y - V.y1),
          Math.abs(R) < me.r && ((me.y += 15 * t(R)), y(!0)));
    (N = ye.x - me.x),
      (R = ye.y - me.y),
      (H = Math.sqrt(N * N + R * R)),
      (ye.v = Math.max(0, a(H, 500, 30, 0, 1))),
      H < me.r + ye.r && (y("h"), (ye.v = 0), r(++xe));
  }
  function s() {
    M.clearRect(0, 0, J, Q),
      (M.fillStyle = me.h),
      C(),
      M.arc(me.x, me.y, me.r, 0, j),
      M.fill(),
      l(),
      m();
  }
  function l() {
    (M.fillStyle = ye.h),
      C(),
      d(11, -3, 11, -3),
      d(11, -9, 8, -11),
      d(4, -13, 0, -9),
      d(-3, -13, -7, -11),
      d(-10, -9, -10, -3),
      d(-10, 3, 0, 11),
      d(11, 3, 11, -3),
      M.fill();
  }
  function d(e, t, a, n) {
    M.quadraticCurveTo(
      ye.x + e * ye.s,
      ye.y + t * ye.s,
      ye.x + a * ye.s,
      ye.y + n * ye.s
    );
  }
  function m() {
    for (I = oe.length, E = 0; E < I; E++)
      (V = oe[E]),
        (ce.x = 65 * (V.x1 - me.x)),
        (ce.y = 65 * (V.y1 - me.y)),
        (ie.x = 65 * (V.x2 - me.x)),
        (ie.y = 65 * (V.y2 - me.y)),
        (M.fillStyle = "rgba(0,0,0,.7)"),
        C(),
        S(V.x1, V.y1),
        O(ce.x, ce.y),
        O(ie.x, ie.y),
        O(V.x2, V.y2),
        M.fill(),
        C(),
        (M.strokeStyle = "#000"),
        (M.lineWidth = "7"),
        S(V.x1, V.y1),
        O(V.x2, V.y2),
        M.stroke();
  }
  function y(e) {
    if (!$) {
      var t = F.createGain(),
        a = F.createOscillator();
      switch (
        (t.connect(F.destination),
        t.gain.setValueAtTime(0, F.currentTime),
        t.gain.linearRampToValueAtTime(e ? 1 : ye.v, F.currentTime + 0.001 * X),
        t.gain.linearRampToValueAtTime(0, F.currentTime + 0.001 * Z),
        e)
      ) {
        case !0:
          B = 82;
          break;
        case "h":
          B = 233;
          break;
        default:
          B = 92;
      }
      (a.frequency.value = B),
        a.connect(t),
        a.start(0),
        setTimeout(function () {
          a.stop(0), a.disconnect(t), t.disconnect(F.destination);
        }, Z);
    }
  }
  function b() {
    (ye.t = 0),
      y(),
      setTimeout(function () {
        (ye.t = 0), y();
      }, 350),
      setTimeout(function () {
        b();
      }, 1500);
  }
  function h() {
    be && (c(), s(), requestAnimFrame(h));
  }
  function f(e) {
    (z.style.display = "block"),
      (he.length = 0),
      (W = 0),
      (G = ""),
      (he = fe[e].split(" ")),
      (z.innerHTML = ""),
      x();
  }
  function x() {
    var e = he[W++];
    void 0 === e && (e = ""),
      (G += e + " "),
      (z.innerHTML = G),
      W < he.length ? (K = setTimeout(x, 100)) : T();
  }
  function w() {
    z.innerHTML = "";
  }
  function p(e) {
    D.innerHTML = "LEVEL " + (xe + 1) + ": &ldquo;" + e + "&rdquo;";
  }
  function v() {
    P.className = "l" + se;
  }
  function L(e) {
    Y.innerHTML = "TIME:" + (Math.ceil(e) < 10 ? "0" : "") + Math.ceil(e);
  }
  function T() {
    z.addEventListener("click", g, !1);
  }
  function k() {
    z.removeEventListener("click", g, !1);
  }
  function g(e) {
    (z.style.display = "none"),
      k(),
      w(),
      de && ((de = !1), (se = 3), v()),
      le && ((le = !1), o(xe)),
      (be = !0),
      xe === U && ((xe = 0), (se = 3), v(), r(xe), s(), clearTimeout(K), f(0)),
      h();
  }
  function A(e) {
    switch (e.keyCode) {
      case 37:
      case 65:
        ee = !0;
        break;
      case 38:
      case 87:
        te = !0;
        break;
      case 39:
      case 68:
        _ = !0;
        break;
      case 40:
      case 83:
        ae = !0;
    }
  }
  function q(e) {
    switch (e.keyCode) {
      case 37:
      case 65:
        ee = !1;
        break;
      case 38:
      case 87:
        te = !1;
        break;
      case 39:
      case 68:
        _ = !1;
        break;
      case 40:
      case 83:
        ae = !1;
    }
  }
  window.requestAnimFrame =
    window.requestAnimationFrame ||
    window.webkitRequestAnimationFrame ||
    window.mozRequestAnimationFrame ||
    window.oRequestAnimationFrame ||
    window.msRequestAnimationFrame ||
    function (e, t) {
      window.setTimeout(e, 1e3 / 60);
    };
  var E,
    I,
    M,
    C,
    S,
    O,
    F,
    B,
    N,
    R,
    H,
    V,
    Y,
    z,
    D,
    P,
    W,
    G,
    K,
    U,
    j = 2 * Math.PI,
    J = 800,
    Q = 600,
    X = 50,
    Z = 400,
    $ = !1,
    _ = !1,
    ee = !1,
    te = !1,
    ae = !1,
    ne = 9,
    re = 0,
    oe = [],
    ce = { x: 0, y: 0 },
    ie = { x: 0, y: 0 },
    ue = 3,
    se = 3,
    le = !1,
    de = !1,
    me = { r: 15, q: 5, h: "#eee" },
    ye = { r: 10, h: "#f11", v: 0 },
    be = !1,
    he = [],
    fe = [
      "LOST LOVE     <br><br>Your passion is bright but will you be able to beat the 7 trials and find Love in the shadows . . . <br>. . . in time?    <br><br>Use AWSD or arrow keys (&lArr;&uArr;&dArr;&rArr;) to move     <br><br><em>Click here to PLAY</em>",
      "You walked away in order to find Love, and overcame Love&rsquo;s seven trials!    <br><br>You found the Lost and Lasting Love!    <br><br><em>Throw it all away and search again?</em>",
      "You&rsquo;ve had all your chances    <br><br>Maybe you should ...    <br><em>try again!</em>",
      "Too slow!    <br><br>Love doesn&rsquo;t wait around    <br><em>Try faster</em>",
      "Love was in the air!   <br><br>But blew away in the wind.    <br><br><em>Next Level ...</em>",
      "Love led you a merry dance.   <br><br>And skipped away.    <br><br><em>Next Level ...</em>",
      "Did Love leave you in a spin?!   <br><br>Don&rsquo;t be dizzy.    <br><br><em>Next Level ...</em>",
      "There is no lasting Love before the mast.    <br><br>Time to cast off.    <br><br><em>Next Level ...</em>",
      "You walked the pathway LOST    <br><br>One more trial for Love be found.   <br><br><em>Next Level ...</em>",
      "Did I say ONE more?    <br><br>Sorry, but there&rsquo;s another. Love can be cruel like that.   <br><br><em>Final level.    Honest.</em>",
    ],
    xe = 0,
    we = "",
    pe = [];
  pe.push({
    px: 400,
    py: 350,
    hx: 400,
    hy: 150,
    t: 20,
    m: 0,
    id: "First Kiss",
    w: "0000050000003c503c10000003c15000503c000140a14014143c140461450140001e231e02d1e501e00028232802d285028000320a32014323c32046325032",
  }),
    pe.push({
      px: 750,
      py: 550,
      hx: 50,
      hy: 500,
      t: 30,
      m: 4,
      id: "Square Dance",
      w: "0000050000003c503c10000003c15000503c00a0a460a01e143c1401e1e3c1e02828462801432503210a0a0a3c11414143211e1e1e3213c143c1e1460a4628",
    }),
    pe.push({
      px: 450,
      py: 150,
      hx: 750,
      hy: 250,
      t: 30,
      m: 5,
      id: "Snail",
      w: "0000050000003c503c10000003c15000503c0000a280a0320a460a014143c1404614501401e1e321e02828322800a32143202832463210a140a3211414143211e1e1e3c1321e322813c143c321460a4632",
    }),
    pe.push({
      px: 550,
      py: 150,
      hx: 650,
      hy: 550,
      t: 25,
      m: 6,
      id: "Pirate&rsquo;s Skull",
      w: "0000050000003c503c10000003c15000503c00a0a1e0a0320a460a000140a14014141e1403214461401e1e3c1e014282828032283c2800a32463211414142811e0a1e1412800281e1282828321320a321413c1e3c2814632463c",
    }),
    pe.push({
      px: 50,
      py: 150,
      hx: 650,
      hy: 550,
      t: 25,
      m: 7,
      id: "L O S T",
      w: "0000050000003c503c10000003c15000503c0000a0a0a0140a460a0281446140461e501e0281e3c1e00a28322800032143202832323210a000a281140a141e11e141e2811e321e3c12814281e13214321e13228323213c0a3c1413c1e3c3c1461e463c",
    }),
    pe.push({
      px: 350,
      py: 350,
      hx: 450,
      hy: 350,
      t: 30,
      m: 8,
      id: "Think Outside the Box",
      w: "0-a-a5a-a0000050000003c503c0-a465a461-a-a-a4610000001e10028003c12800283c15000501e15028503c15a-a5a46",
    }),
    pe.push({
      px: 350,
      py: 450,
      hx: 550,
      hy: 450,
      t: 45,
      m: 9,
      id: "Love can be Cruel",
      w: "014-f3c-f0-a-a14-a03c-a5a-a01e-532-50-f00-a00000000a00032003c000460050000-50a000a00a0a1e0a0-f14-a14028143c14050145a140321e461e0003c283c0323c503c0-a460a4601e463c46046465a460145046501-f00-f141-a-a-a001-a14-a4610000001e10028003c10a000a0a10a3c0a46114-f14001143c145011e-51e0a12814283c132-532001321e323c13c-f3c-a13c003c1413c3c3c4614600461e14646465015000502815032503c15a-a5a46",
    }),
    (U = pe.length),
    (function () {
      (Y = document.getElementById("t")),
        (P = document.getElementById("l")),
        (z = document.getElementById("m")),
        (D = document.getElementById("n"));
      var t = document.createElement("canvas", J, Q);
      (t.width = J),
        (t.height = Q),
        document.getElementById("w").appendChild(t),
        ((M = t.getContext("2d")).lineCap = "round"),
        (F = e()),
        (C = function () {
          return M.beginPath();
        }),
        (S = function (e, t) {
          return M.moveTo(e, t);
        }),
        (O = function (e, t) {
          return M.lineTo(e, t);
        }),
        (document.onkeydown = A),
        (document.onkeyup = q),
        r(xe),
        s(),
        clearTimeout(K),
        f(0);
    })(),
    b(),
    h();
})();
