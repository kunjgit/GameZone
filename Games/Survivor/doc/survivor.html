<!DOCTYPE html>

<html>
<head>
  <title>survivor.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>survivor.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>﻿<span class="comment">/** @license
 *
 * SURVIVOR: A HTML + CSS + JavaScript prototype
 * based on the Commodore 64 version of Survivor from 1983
 * -------------------------------------------------------
 * http://schillmania.com/survivor/
 * http://www.schillmania.com/content/entries/2012/survivor-c64-html-remake/
 * http://www.flickr.com/photos/schill/sets/72157628885315581/
 * https://github.com/scottschiller/SURVIVOR
 *
 * Scott Schiller wrote this beginning in December 2011, while on a plane to Hawaii.
 * Code provided under the Attribution-NonCommercial 3.0 Unported (CC BY-NC 3.0) License:
 * http://creativecommons.org/licenses/by-nc/3.0/
 *
 */</span>

<span class="comment">/*global window, console, document, navigator, setTimeout, setInterval, clearInterval, soundManager */</span>
<span class="comment">/*jslint vars: true, regexp: true, sloppy: true, white: true, nomen: true, plusplus: true, todo: true */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>5.25.2013: The jslint gods have been appeased.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="comment">/**
 *
 * The TODO: list (written on an old laptop while on a plane to Hawaii, 12/21/2011)
 * --------------------------------------------------------------------------------
 *
 * Map (grid) of space
 * -------------------
 *
 * Main UI
 * -------
 *  - ship always in center
 *  - inertia? some inertia.
 *  - slight parallax on background stars? maybe a blur/streak effect? why not.
 *  - fixed screen size, center or no?
 *  - fixed grid item size? 20x20px?
 *  - world should be able to wrap around. Draw in tiles?
 *  - debug mode should show outlines, overlays, collision detection etc. in CSS.
 *
 * Collision detection
 * -------------------
 *  - player vs. bricks, bad guys, gunfire (= death)
 *  - x/y + vector -&gt; row/col? player can occupy potentially 4 grid spaces at once with overlap?
 *  - when in a row/column, determine exactly what is in contact. isOverlappingGrid({x, y, row, col}) or somesuch.
 *  - spaceballs should reverse course and randomly flip the other axis when they hit a boundary (wall, or another spaceball.)
 *  - bad guys only collide with spaceship. absolutely-positioned for everything else.
 * 
 * Graphic elements
 * ----------------
 *  - blocks
 *  - "bases" (structures which hold turrets)
 *  - turrets themselves
 *  - turret gunfire
 *  - bad guys
 *  - spaceballs
 *
 * Things that move, object collision etc.
 * ---------------------------------------
 *  - blocks (can be shot, disappear)
 *  - bad guys
 *  - spaceballs (immune to shots, move randomly)
 *  - turret gunfire
 *
 * Sound effects
 * -------------
 *  - welcome screen "flight of the valkyries" music?
 *  - initial game start / "warp" sound
 *  - spaceship thrust
 *  - bad guy cartoon noises (one per bad guy? simultaneous allowed?)
 *  - bad guy single-frozen-note death sound
 *  - box shot/popping sounds (incremental sounds?)
 *  - ship explosion noise
 *  - base explosion (60 Hz, louder, BOOM) sound
 *  - background pulse noise set to "frame rate" of level
 *
 * UI considerations
 * -----------------
 *  - mobile, iOS: No sound, or single-channel sound hack?
 *  - touch controls - finger on screen = direction? circle-based joystick UI?
 *  - touch controls - fire button, smartbomb button?
 *
 * Game logic
 * ----------
 *  - intro screen, retro font etc.?
 *  - ability to choose start level?
 *  - begin game: startGame({ level: x, lives: y, smartbombs: z }); ?
 *  - points/scoring? who cares?
 *  - level finished animation sequence - large explosions, show next "level X" screen etc.
 *
 * BEHAVIOURS
 * ----------
 *  - gunfire
 *    + from turret, fixed target distance and speed
 *    + once target is reached, fires again (any delay?)
 *    + collides only with spaceship
 *  - base
 *    + explodes once all turrets are shot out
 *    + noise, animation, increases points, increases game speed(?)
 *  - spaceballs
 *    + wander aimlessly around the world
 *    + bounce off walls and each other
 *    + collision logic: see above, or spaceship (death)
 *    + absorb spaceship fire? turret gunfire?
 *  - bad guys
 *    + show up at random intervals, depending on level/difficulty?
 *    + start randomly off-screen, seek out player
 *    + jittery motion (animation) and movement
 *    + bird, face, "X", ?
 *  - squares/boxes ("building blocks")
 *    + form walls around bases
 *    + worth some points(?)
 *    + take two hits
 *    + increase global "box pop" sound when hit, eventually resets
 *    + collide with spaceship, kill on contact
 *    + a few different box designs
 *    + up to 4 frames of animation
 */</span>

<span class="keyword">var</span> survivor;

(<span class="keyword">function</span>(window) {

<span class="keyword">if</span> (window.console === <span class="literal">undefined</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>hax</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  window.console = {
    log: <span class="keyword">function</span>() {
      <span class="keyword">return</span> <span class="literal">false</span>;
    }
  };
}

<span class="keyword">var</span> IS_MUTED = window.location.href.toString().match(<span class="regexp">/mute/i</span>);
<span class="keyword">var</span> winloc = window.location.toString();

<span class="function"><span class="keyword">function</span> <span class="title">Survivor</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>internal reference</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="keyword">var</span> game,
      data,
      dom,
      objects,
      mapTypes,
      mapData,
      isIE = navigator.userAgent.match(<span class="regexp">/msie/i</span>),
      oldIE = navigator.userAgent.match(<span class="regexp">/msie 6/i</span>),</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>adds debug elements to the grid, UI etc.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      DEBUG_MODE = (winloc.match(<span class="regexp">/debug/i</span>)),</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>?profile=1, ?profiling=1, whatever.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      PERFORMANCE_MODE = (winloc.match(<span class="regexp">/profil/i</span>)),

      <span class="comment">/**
       * Chrome-specific GPU-accelerated positioning (vs .style.left + .style.top) and compositing / layer promotion
       * Safari doesn't like this so much. #usetransform to enable, #notransform to disable.
       */</span>
      USE_TRANSFORM = ((navigator.userAgent.match(<span class="regexp">/chrome/i</span>) &amp;&amp; !winloc.match(<span class="regexp">/notransform/i</span>)) || winloc.match(<span class="regexp">/usetransform/i</span>)),

      <span class="comment">/**
       * Additional: translate3d() for block / world pulse effect, attempt at GPU compositing / reducing paints. Step-based keyframe animations for pulse effect, as well.
       * Performs worse as of 06/2013, presumably due to doubled number of DOM elements (~1100) and thus expensive "recalculate style" work.
       * Related screenshot: http://flic.kr/p/eHbgpf
       */</span>
      USE_EXPERIMENTAL_TRANSFORM = (winloc.match(<span class="regexp">/experimentaltransform/i</span>)),

      DEFAULT_LIVES = <span class="number">3</span>,
      DEFAULT_SMARTBOMBS = <span class="number">3</span>,
      DEFAULT_HOME_ROW = <span class="number">20</span>,
      DEFAULT_HOME_COL = <span class="number">8</span>,
      DEFAULT_SPACEBALLS = <span class="number">8</span>,

      spaceBallTemplate,
      spaceBallCounter = <span class="number">0</span>,
      audioPitchCounter = <span class="number">0</span>,
      audioPitchCounterMax = <span class="number">15</span>,
      audioBoomScale = [<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>],
      lastAudioIncrement = <span class="keyword">new</span> Date(),
      audioIncrementThrottle = <span class="number">333</span>,

      <span class="comment">/**
      * NOTE: UTF-8 character encoding required for map parsing to work.
      * reference: http://en.wikipedia.org/wiki/Box-drawing_characters
      * empty space inside walls is marked by a period character - "."
      * space inside bases, not safe to be occupied is marked by a middle dot - Georgian comma (&amp;middot;) - "·"
      */</span>

      MAP_FREE_SPACE_CHAR = <span class="string">' '</span>,
      MAP_ALT_FREE_SPACE_CHAR = <span class="string">'_'</span>,
      MAP_INSIDE_BASE_CHAR = <span class="string">'·'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>var MAP_INSIDE_WALLS_CHAR = &#39;.&#39;;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  mapData = [
    <span class="string">'                                                                         '</span>,
    <span class="string">'                                                                         '</span>,
    <span class="string">'    000000000000000000000000000                                          '</span>,
    <span class="string">'    000000000000000000000000000                                          '</span>,
    <span class="string">'    00.......................00                                          '</span>,
    <span class="string">'    00.......................00                                          '</span>,
    <span class="string">'    00..............┏┻━┓.....00            333333333333333333            '</span>,
    <span class="string">'    00.........┏┻━━┻┛┏━┛.....00           33333333333333333333           '</span>,
    <span class="string">'    00...┏┻┓...┃·····┣.......00          33..................33          '</span>,
    <span class="string">'    00...┗┓┗┻━┻┛·····┗━┓.....00         33....................33         '</span>,
    <span class="string">'    00....┫┏━━━━┓····┏━┛.....00        33.......╔╩╗............33        '</span>,
    <span class="string">'    00....┃┃....┫····┣.......00       33........╚╗╚═╩═╩╗........33       '</span>,
    <span class="string">'    00....┫┗┓┏━━┛····┗━┓.....0033333333..........╣╔╦╗··╠.........33      '</span>,
    <span class="string">'    00....┗━┛┃·┏━┳━┳┓┏┳┛.....0033333333.........╔╝│.│╔╦╝.........33      '</span>,
    <span class="string">'    00.......┗┳┛....┗┛.......00       33........╚╦╝.╚╝..........33       '</span>,
    <span class="string">'    00.......................00        33......................33        '</span>,
    <span class="string">'    00.......................00         33....................33         '</span>,
    <span class="string">'    000000000000000000000000000          33..................33          '</span>,
    <span class="string">'    000000000000000000000000000           33333333333333333333           '</span>,
    <span class="string">'          00                               333333333333333333            '</span>,
    <span class="string">'          00                                            33               '</span>,
    <span class="string">'          00                                            33               '</span>,
    <span class="string">'          11                                            33               '</span>,
    <span class="string">'          11                                            33               '</span>,
    <span class="string">'          11                               2            222              '</span>,
    <span class="string">'          11                              222           2222             '</span>,
    <span class="string">'          11                             22.22         22..22            '</span>,
    <span class="string">'         111                            22...22       22....22           '</span>,
    <span class="string">'        11.11                          22.....22     22......22          '</span>,
    <span class="string">'       11...11                        22.......22   22........22         '</span>,
    <span class="string">'      11.....11                      22.........22222..........22        '</span>,
    <span class="string">'     11.┌┐.┌┐.11                    22..╓╨─╨╖╓╨╖.222..╓╖........22       '</span>,
    <span class="string">'    11.┌┘└┴┘└┐.11                  22...╢·╓─╜╙╖╙╖...╓╨╜╟.........22      '</span>,
    <span class="string">'   11..└┐···┌┘..11                22....╙╖╟···╙╖╙╨─╨╜╓─╜..........22     '</span>,
    <span class="string">'  11....┤···├....11111           22......╢║····╢·····╟.............22    '</span>,
    <span class="string">'  11...┌┘···└┐.....111111111111222.......║╟····║·····╙──╖...........22   '</span>,
    <span class="string">'   11..┤┌┬-┬┐├..111111111111111222.......╢╙────╜········╟............22  '</span>,
    <span class="string">'    11.└┘...└┘.11                22....╓─╜·╓╥╖·······╓──╜...........22   '</span>,
    <span class="string">'     11.......11                  22...╙╖··║.║·······╟.............22    '</span>,
    <span class="string">'      11.....11                    22...╢╓─╜.║·╓╥─╥╖·╙─╖..........22     '</span>,
    <span class="string">'       11...11                      22..╙╜...╙╥╜...╙─╥╖╟.........22      '</span>,
    <span class="string">'        11.11                        22...........222.╙╜........22       '</span>,
    <span class="string">'         111                          22.........22222.........22        '</span>,
    <span class="string">'          1                            22...2...22   22...2...22         '</span>,
    <span class="string">'                                        22.222.22     22.222.22          '</span>,
    <span class="string">'                                         222 222       222 222           '</span>,
    <span class="string">'                                          2   2         2   2            '</span>,
    <span class="string">'                                                                         '</span>,
    <span class="string">'                                                                         '</span>
  ];</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>for transform-based window scrolling vs. traditional scrolling, transform() may be faster under Firefox
(but causes some visual glitches in Webkit)
is_firefox = !!(navigator.userAgent.match(/firefox/i));</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  objects = {</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>instances of controllers, major objects and so forth</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    baseController: <span class="literal">null</span>,
    badGuyController: <span class="literal">null</span>,
    blockController: <span class="literal">null</span>,
    gameLoop: <span class="literal">null</span>,
    focusMonitor: <span class="literal">null</span>,
    keyboardMonitor: <span class="literal">null</span>,
    levelEndSequence: <span class="literal">null</span>,
    mapData: <span class="literal">null</span>,
    gameController: <span class="literal">null</span>,
    ship: <span class="literal">null</span>,
    shipGunfireMap: <span class="literal">null</span>,
    smartbombController: <span class="literal">null</span>,
    statsController: <span class="literal">null</span>,
    turretGunfireMap: <span class="literal">null</span>,
    badGuyMap: <span class="literal">null</span>,
    badGuys: [],
    screen: <span class="literal">null</span>,
    spaceBalls: [],
    spaceBallMap: <span class="literal">null</span>

  };

  data = {

    map: [],
    NODE_WIDTH: <span class="number">32</span>,
    NODE_HEIGHT: <span class="number">32</span>,
    world_width: <span class="number">0</span>,
    world_height: <span class="number">0</span>,
    world_cols: <span class="number">0</span>,
    world_rows: <span class="number">0</span>

  };</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>special case: inner <div> for transform: translate3d() GPU-accelerated sprite animation.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="keyword">var</span> itemTemplate = document.createElement(<span class="string">'div'</span>);
  <span class="keyword">var</span> innerNode;

  <span class="keyword">if</span> (USE_EXPERIMENTAL_TRANSFORM) { 
    innerNode = document.createElement(<span class="string">'div'</span>);
    innerNode.className = <span class="string">'transform-sprite'</span>;
    itemTemplate.appendChild(innerNode);
    world.className = <span class="string">'use-experimental-transforms'</span>;
  }

  dom = {

    gridItemTemplate: itemTemplate,
    world: document.getElementById(<span class="string">'world'</span>),
    worldContainer: document.getElementById(<span class="string">'world-container'</span>),
    worldFragment: document.createDocumentFragment()

  };</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>for internal reference</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  game = {

    data: data,
    dom: dom,
    objects: objects

  };

  <span class="function"><span class="keyword">function</span> <span class="title">getAudioPitch</span><span class="params">()</span> {</span>
    <span class="keyword">return</span> Math.floor(audioPitchCounter);
  }

  <span class="function"><span class="keyword">function</span> <span class="title">incrementAudioPitch</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>throttle audible pitch increase calls</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> now = <span class="keyword">new</span> Date();
    <span class="keyword">if</span> (now - lastAudioIncrement &gt; audioIncrementThrottle) {
      
      lastAudioIncrement = now;
      audioPitchCounter += <span class="number">0.5</span>;
      <span class="keyword">if</span> (audioPitchCounter &gt;= audioPitchCounterMax) {
        audioPitchCounter = <span class="number">0</span>;
      }
    }
    <span class="keyword">return</span> getAudioPitch();
  }

  <span class="keyword">var</span> soundSprites;

  soundSprites = {

    popSpriteCounter: <span class="number">0</span>,
    popSpriteCounterMax: <span class="number">4</span>,
    boomSpriteCounter: <span class="number">0</span>,
    boomSpriteCounterMax: <span class="number">4</span>,

    playBoom: <span class="keyword">function</span>(scale) {

      <span class="keyword">var</span> sID = <span class="string">'boom-sprite-'</span> + soundSprites.boomSpriteCounter;

      soundManager.play(sID, {
        from: (scale * <span class="number">1000</span>),
        to: (scale * <span class="number">1000</span>) + <span class="number">750</span>
      });

      soundSprites.boomSpriteCounter++;

      <span class="keyword">if</span> (soundSprites.boomSpriteCounter &gt;= soundSprites.boomSpriteCounterMax) {
        soundSprites.boomSpriteCounter = <span class="number">0</span>;
      }

    },

    playPop: <span class="keyword">function</span>(audioPitch) {

      soundManager.play(<span class="string">'pop-sprite-'</span> + soundSprites.popSpriteCounter, {
        from: (audioPitch*<span class="number">400</span>) - <span class="number">10</span>,
         to: (audioPitch*<span class="number">400</span>) + <span class="number">350</span>
      });

      soundSprites.popSpriteCounter++;

      <span class="keyword">if</span> (soundSprites.popSpriteCounter &gt;= soundSprites.popSpriteCounterMax) {
        soundSprites.popSpriteCounter = <span class="number">0</span>;
      }

    }

  };

  <span class="keyword">var</span> utils;

  utils = {

    css: (<span class="keyword">function</span>() {

      <span class="function"><span class="keyword">function</span> <span class="title">hasClass</span><span class="params">(o, cStr)</span> {</span>

        <span class="keyword">return</span> (o.className !== <span class="literal">undefined</span> ? <span class="keyword">new</span> RegExp(<span class="string">'(^|\\s)'</span>+cStr+<span class="string">'(\\s|$)'</span>).test(o.className) : <span class="literal">false</span>);

      }

      <span class="function"><span class="keyword">function</span> <span class="title">addClass</span><span class="params">(o, cStr)</span> {</span>

        <span class="keyword">if</span> (!o || !cStr || hasClass(o,cStr)) {
          <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// safety net</span>
        }
        o.className = (o.className?o.className+<span class="string">' '</span>:<span class="string">''</span>)+cStr;

      }

      <span class="function"><span class="keyword">function</span> <span class="title">removeClass</span><span class="params">(o, cStr)</span> {</span>

        <span class="keyword">if</span> (!o || !cStr || !hasClass(o,cStr)) {
          <span class="keyword">return</span> <span class="literal">false</span>;
        }
        o.className = o.className.replace(<span class="keyword">new</span> RegExp(<span class="string">'( '</span>+cStr+<span class="string">')|('</span>+cStr+<span class="string">')'</span>,<span class="string">'g'</span>),<span class="string">''</span>);

      }

      <span class="function"><span class="keyword">function</span> <span class="title">swapClass</span><span class="params">(o, cStr1, cStr2)</span> {</span>

        <span class="keyword">var</span> tmpClass = {
          className: o.className
        };

        removeClass(tmpClass, cStr1);
        addClass(tmpClass, cStr2);

        o.className = tmpClass.className;

      }

      <span class="function"><span class="keyword">function</span> <span class="title">toggleClass</span><span class="params">(o, cStr)</span> {</span>

        (hasClass(o, cStr)?removeClass:addClass)(o, cStr);

      }

      <span class="keyword">return</span> {
        has: hasClass,
        add: addClass,
        remove: removeClass,
        swap: swapClass,
        toggle: toggleClass
      };

    }()),

    events: (<span class="keyword">function</span>() {

      <span class="keyword">var</span> add, remove, preventDefault;

      add = (window.addEventListener !== <span class="literal">undefined</span> ? <span class="keyword">function</span>(o, evtName, evtHandler) {
        <span class="keyword">return</span> o.addEventListener(evtName,evtHandler,<span class="literal">false</span>);
      } : <span class="keyword">function</span>(o, evtName, evtHandler) {
        o.attachEvent(<span class="string">'on'</span>+evtName,evtHandler);
      });

      remove = (window.removeEventListener !== <span class="literal">undefined</span> ? <span class="keyword">function</span>(o, evtName, evtHandler) {
        <span class="keyword">return</span> o.removeEventListener(evtName,evtHandler,<span class="literal">false</span>);
      } : <span class="keyword">function</span>(o, evtName, evtHandler) {
        <span class="keyword">return</span> o.detachEvent(<span class="string">'on'</span>+evtName,evtHandler);
      });

      preventDefault = <span class="keyword">function</span>(e) {
        <span class="keyword">if</span> (e.preventDefault) {
          e.preventDefault();
        } <span class="keyword">else</span> {
          e.returnValue = <span class="literal">false</span>;
          e.cancelBubble = <span class="literal">true</span>;
        }
      };

      <span class="keyword">return</span> {
        add: add,
        preventDefault: preventDefault,
        remove: remove
      };

    }())

  };

  <span class="keyword">var</span> features;

  <span class="keyword">var</span> testDiv = document.createElement(<span class="string">'div'</span>);

  features = (<span class="keyword">function</span>() {

    <span class="keyword">var</span> getAnimationFrame;

    <span class="comment">/**
     * hat tip: paul irish
     * http://paulirish.com/2011/requestanimationframe-for-smart-animating/
     * https://gist.github.com/838785
     */</span>

    <span class="keyword">var</span> _animationFrame = (window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.oRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        <span class="literal">null</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>apply to window, avoid &quot;illegal invocation&quot; errors in Chrome</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    getAnimationFrame = _animationFrame ? <span class="keyword">function</span>() {
      <span class="keyword">return</span> _animationFrame.apply(window, arguments);
    } : <span class="literal">null</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>requestAnimationFrame is still somewhat slower in this case than an old-skool setInterval(). Not sure why.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (getAnimationFrame &amp;&amp; winloc.match(<span class="regexp">/raf=1/i</span>)) {
      console.log(<span class="string">'preferring requestAnimationFrame for game loop'</span>);
    } <span class="keyword">else</span> {
      getAnimationFrame = <span class="literal">null</span>;
    }

    <span class="keyword">var</span> transform, styles, prop;

    <span class="function"><span class="keyword">function</span> <span class="title">has</span><span class="params">(prop)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>test for feature support</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">var</span> result = testDiv.style[prop];
      <span class="keyword">return</span> (result !== <span class="literal">undefined</span> ? prop : <span class="literal">null</span>);

    }</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>note local scope.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> features = {

      audio: <span class="literal">false</span>, <span class="comment">// set later via SM2</span>

      opacity: (<span class="keyword">function</span>(){
        <span class="keyword">try</span> {
          testDiv.style.opacity = <span class="string">'0.5'</span>;
        } <span class="keyword">catch</span>(e) {
          <span class="keyword">return</span> <span class="literal">false</span>;
        }
        <span class="keyword">return</span> <span class="literal">true</span>;
      }()),

      transform: {
        ie:  has(<span class="string">'-ms-transform'</span>),
        moz: has(<span class="string">'MozTransform'</span>),
        opera: has(<span class="string">'OTransform'</span>),
        webkit: has(<span class="string">'webkitTransform'</span>),
        w3: has(<span class="string">'transform'</span>),
        prop: <span class="literal">null</span> <span class="comment">// the normalized property value</span>
      },

      rotate: {
        has3D: <span class="literal">false</span>,
        prop: <span class="literal">null</span>
      },

      <span class="string">'getAnimationFrame'</span>: getAnimationFrame

    };

    features.transform.prop = (
      features.transform.w3 || 
      features.transform.moz ||
      features.transform.webkit ||
      features.transform.ie ||
      features.transform.opera
    );

    <span class="function"><span class="keyword">function</span> <span class="title">attempt</span><span class="params">(style)</span> {</span>

      <span class="keyword">try</span> {
        testDiv.style[transform] = style;
      } <span class="keyword">catch</span>(e) {</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>that <em>definitely</em> didn&#39;t work.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">return</span> <span class="literal">false</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>if we can read back the style, it should be cool.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">return</span> !!testDiv.style[transform];

    }

    <span class="keyword">if</span> (features.transform.prop) {</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>try to derive the rotate/3D support.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      transform = features.transform.prop;
      styles = {
        css_2d: <span class="string">'rotate(0deg)'</span>,
        css_3d: <span class="string">'rotate3d(0,0,0,0deg)'</span>
      };

      <span class="keyword">if</span> (attempt(styles.css_3d)) {
        features.rotate.has3D = <span class="literal">true</span>;
        prop = <span class="string">'rotate3d'</span>;
      } <span class="keyword">else</span> <span class="keyword">if</span> (attempt(styles.css_2d)) {
        prop = <span class="string">'rotate'</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>soundManager._wD(&#39;Has 3D rotate: &#39;+features.rotate.has3D);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      features.rotate.prop = prop;

    }

    console.log(<span class="string">'user agent feature test:'</span>, features);

    console.log(<span class="string">'requestAnimationFrame() is'</span> + (features.getAnimationFrame ? <span class="string">''</span> : <span class="string">' not'</span>) + <span class="string">' available'</span>);

    <span class="keyword">return</span> features;

  }());

  <span class="keyword">var</span> _slice = Array.prototype.slice;

  <span class="function"><span class="keyword">function</span> <span class="title">mixin</span><span class="params">(oMain, oAdd)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>non-destructive merge</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> o1 = {}, i, o2, o;</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>clone c1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">for</span> (i <span class="keyword">in</span> oMain) {
      <span class="keyword">if</span> (oMain.hasOwnProperty(i)) {
        o1[i] = oMain[i];
      }
    }

    o2 = (oAdd === <span class="literal">undefined</span> ? {} : oAdd);
    <span class="keyword">for</span> (o <span class="keyword">in</span> o2) {
      <span class="keyword">if</span> (o2.hasOwnProperty(o) &amp;&amp; o1[o] === <span class="literal">undefined</span>) {
        o1[o] = o2[o];
      }
    }
    <span class="keyword">return</span> o1;

  }

  <span class="function"><span class="keyword">function</span> <span class="title">makeGridItem</span><span class="params">(oOptions)</span> {</span>

    <span class="keyword">var</span> o,
        x, y,
        type, subType,
        oNode = oOptions.node;

    x = oOptions.x;
    y = oOptions.y;
    type = oOptions.type;
    subType = oOptions.subType;

    o = dom.gridItemTemplate.cloneNode(<span class="literal">true</span>);

    o.style.left = (game.data.NODE_WIDTH * x) + <span class="string">'px'</span>;
    o.style.top = (game.data.NODE_HEIGHT * y) + <span class="string">'px'</span>;

    o.className = type + <span class="string">' '</span> + subType;

    <span class="keyword">return</span> o;

  }

  <span class="function"><span class="keyword">function</span> <span class="title">animateSpaceBalls</span><span class="params">()</span> {</span>

    <span class="keyword">var</span> i, j, k, l;

    <span class="keyword">for</span> (i=<span class="number">0</span>, j=objects.spaceBalls.length; i&lt;j; i++) {
      objects.spaceBalls[i].animate();
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>also do &quot;own&quot; collision check</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">for</span> (i=<span class="number">0</span>, j=objects.spaceBalls.length; i&lt;j; i++) {

      <span class="keyword">for</span> (k=<span class="number">0</span>, l=objects.spaceBalls.length; k&lt;l; k++) {</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>don&#39;t compare against self...</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (k !== i &amp;&amp; objects.spaceBalls[i].data.row === objects.spaceBalls[k].data.row &amp;&amp; objects.spaceBalls[i].data.col === objects.spaceBalls[k].data.col) {</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>console.log(&#39;spaceball vs. spaceball!&#39;);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          objects.spaceBalls[i].bounce();
          <span class="keyword">break</span>;

        }

      }

    }

  }

  <span class="function"><span class="keyword">function</span> <span class="title">GameLoop</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>the timer and main loop which drives everything</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="keyword">var</span> counter = <span class="number">0</span>;
    <span class="keyword">var</span> oStats;
    <span class="keyword">var</span> fpsCounter = <span class="number">0</span>;
    <span class="keyword">var</span> heartbeatCounter = <span class="number">0</span>;
    <span class="keyword">var</span> lastExec = <span class="keyword">new</span> Date();

    <span class="keyword">var</span> css, data, events, getNextFrame;

    css = {

      <span class="string">'phase0'</span>: <span class="string">''</span>, <span class="comment">// default state</span>
      <span class="string">'phase1'</span>: <span class="string">'phase-1'</span>,
      <span class="string">'phase2'</span>: <span class="string">'phase-2'</span>,
      <span class="string">'phase3'</span>: <span class="string">'phase-3'</span>,
      <span class="string">'phase4'</span>: <span class="string">'phase-4'</span>

    };

    data = {

      GAME_SPEED: <span class="number">1</span>, <span class="comment">// the game speed multiplier</span>
      loopTimer: <span class="literal">null</span>,
      loopInterval: <span class="number">1000</span>/<span class="number">33</span>, <span class="comment">// aim for 33 fps</span>
      lastPhase: <span class="literal">null</span>,
      pulseCount: <span class="number">0</span>,
      pulseStage: <span class="number">0</span>,
      pulsePhases: <span class="number">4</span>,
      pulseTimer: <span class="literal">null</span>, <span class="comment">// will inherit default</span>
      pulseIntervals: {
        <span class="string">'stage0'</span>: <span class="number">500</span>,
        <span class="string">'stage1'</span>: <span class="number">366.67</span>,
        <span class="string">'stage2'</span>: <span class="number">233.33</span>,
        <span class="string">'stage3'</span>: <span class="number">100</span>
      },
      speedMultiplier: <span class="number">1</span>,
      speedMultipliers: {
        <span class="string">'stage0'</span>: <span class="number">1</span>,
        <span class="string">'stage1'</span>: <span class="number">1.1</span>,
        <span class="string">'stage2'</span>: <span class="number">1.2</span>,
        <span class="string">'stage3'</span>: <span class="number">1.3</span>
      },
      statsTimer: <span class="literal">null</span>,
      statsInterval: <span class="number">1000</span>

    };

    events = {

      loop: <span class="keyword">function</span>() {

<span class="comment">/*
        var now = new Date();

        if (now - lastExec &lt; data.loopThrottle) {</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>exit if this loop is running too fast</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          return false;
        }

        lastExec = now;
*/</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>based on game state, animate or wait for input or ?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        counter++;
        fpsCounter++;

        <span class="keyword">if</span> (game.objects.levelEndSequence.data.active) {

          game.objects.levelEndSequence.animate();
          <span class="keyword">return</span> <span class="literal">false</span>;

        }

        game.objects.ship.animate();

        <span class="keyword">if</span> (counter % <span class="number">5</span> === <span class="number">0</span>) {
          game.objects.ship.maybeFire();
        }

        game.objects.baseController.events.animate();

        game.objects.badGuyController.animate();

        game.objects.blockController.animate();

        game.objects.smartbombController.animate();</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>don&#39;t animate certain objects if ship is exploding (dying/dead)
if (game.objects.ship.isAlive()) {</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
          animateSpaceBalls();</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>}</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      },

      pulse: <span class="keyword">function</span>() {

        <span class="keyword">var</span> currentPhase;</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>don&#39;t animate the world if the ship is dying/dead.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (!game.objects.ship.isAlive()) {
          <span class="keyword">return</span> <span class="literal">false</span>;
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>the world heartbeat, per se.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        data.pulseCount++;

        <span class="keyword">if</span> (data.pulseCount &gt;= data.pulsePhases) {
          data.pulseCount = <span class="number">0</span>;
        }

        currentPhase = css[<span class="string">'phase'</span> + data.pulseCount];

        <span class="keyword">if</span> (!oldIE &amp;&amp; !USE_EXPERIMENTAL_TRANSFORM) {
          utils.css.swap(game.dom.world, data.lastPhase, currentPhase);
        }

        data.lastPhase = currentPhase;

        <span class="keyword">if</span> (heartbeatCounter % <span class="number">2</span> === <span class="number">0</span>) {

          <span class="keyword">if</span> (features.audio) {

            soundManager.play(<span class="string">'heartbeat'</span>);

          }

          game.objects.baseController.events.pulse();

        }

        heartbeatCounter++;

      },

      statsUpdate: <span class="keyword">function</span>() {

        <span class="keyword">var</span> fpsCount = parseInt(fpsCounter, <span class="number">10</span>);

        <span class="keyword">if</span> (oStats) {
          oStats.innerHTML = (!isNaN(fpsCount) ? fpsCount : <span class="string">'N/A'</span>);
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>data.GAME_SPEED = (fpsCount &gt;= 15 ? 1 : 15 / fpsCount);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        fpsCounter = <span class="number">0</span>;

      }

    };

    <span class="function"><span class="keyword">function</span> <span class="title">refreshAnimationCallback</span><span class="params">()</span> {</span>

      <span class="keyword">var</span> now = <span class="keyword">new</span> Date(),
          delta = now - lastExec;

      <span class="keyword">if</span> (delta &gt;= data.loopInterval) {

        lastExec = now;</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>do work, son</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        events.loop();

      }

      <span class="keyword">if</span> (data.loopTimer) {</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>and repeat the process</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        getNextFrame();
      }

    }

    getNextFrame = <span class="keyword">function</span>() {

      features.getAnimationFrame(refreshAnimationCallback);

    };

    <span class="function"><span class="keyword">function</span> <span class="title">stopPulse</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (data.pulseTimer) {
        window.clearInterval(data.pulseTimer);
        data.pulseTimer = <span class="literal">null</span>;
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">getPulseStage</span><span class="params">()</span> {</span>

      <span class="keyword">return</span> data.pulseStage;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">setPulseStage</span><span class="params">(nStage)</span> {</span>

      <span class="keyword">var</span> css = {
        className: game.dom.world.className
      };

      stopPulse();

      <span class="keyword">if</span> (!nStage) {
        nStage = <span class="number">0</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>determine new pulse interval CSS</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      utils.css.remove(css, <span class="string">'pulse-interval-'</span> + data.pulseStage);
      utils.css.add(css, <span class="string">'pulse-interval-'</span> + nStage);

      data.pulseStage = nStage;</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>apply to the world (CSS animations)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      game.dom.world.className = css.className;</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>TODO: clean up</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      data.pulseInterval = data.pulseIntervals[<span class="string">'stage'</span> + nStage];
      data.speedMultiplier = data.speedMultipliers[<span class="string">'stage'</span> + nStage];

      console.log(<span class="string">'set pulse stage '</span> + nStage +<span class="string">', interval '</span> + data.pulseInterval);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">nextPulseStage</span><span class="params">()</span> {</span>

      setPulseStage(getPulseStage()+<span class="number">1</span>);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">startPulse</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>check and set default, if needed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">if</span> (!data.pulseTimer &amp;&amp; !data.pulseInterval) {
        setPulseStage();
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>re-start.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      stopPulse();

      <span class="keyword">if</span> (!data.pulseTimer) {
        data.pulseTimer = window.setInterval(events.pulse, data.pulseInterval);
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">startTimer</span><span class="params">()</span> {</span>

      startPulse();

      <span class="keyword">if</span> (!data.loopTimer) {

        <span class="keyword">if</span> (!features.getAnimationFrame) {

          data.loopTimer = window.setInterval(events.loop, data.loopInterval);

        } <span class="keyword">else</span> {

          data.loopTimer = <span class="literal">true</span>;
          getNextFrame();

        }

        <span class="keyword">if</span> (oStats) {
          data.statsTimer = window.setInterval(events.statsUpdate, data.statsInterval);
        }

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">stopTimer</span><span class="params">()</span> {</span>

      stopPulse();

      <span class="keyword">if</span> (data.loopTimer) {

        window.clearInterval(data.loopTimer);
        data.loopTimer = <span class="literal">null</span>;

        window.clearInterval(data.statsTimer);
        data.statsTimer = <span class="literal">null</span>;

        fpsCounter = <span class="number">0</span>;

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">pause</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>TODO: this.paused check?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (features.audio) {
        soundManager.mute();
      }
      stopTimer();

    }

    <span class="function"><span class="keyword">function</span> <span class="title">resume</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (features.audio) {
        soundManager.unmute();
      }
      startTimer();

    }

    <span class="function"><span class="keyword">function</span> <span class="title">isActive</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>is the game running?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">return</span> !!data.loopTimer;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>set default state? welcome screen, etc.?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>     oStats = document.getElementById(<span class="string">'fps'</span>);

     startTimer();

    }

    <span class="keyword">return</span> {
      data: data,
      init: init,
      isActive: isActive,
      pause: pause,
      resume: resume,
      nextPulseStage: nextPulseStage,
      setPulseStage: setPulseStage,
      startTimer: startTimer,
      stopTimer: stopTimer
    };

  }

  <span class="function"><span class="keyword">function</span> <span class="title">BlockController</span><span class="params">()</span> {</span>

    <span class="comment">/**
     * maintains an array of blocks actively being hit
     * and animates them, removing from the array once finished
     */</span>

    <span class="keyword">var</span> objects = {
      blocks_hash: {},
      blocks: []
    };

    <span class="function"><span class="keyword">function</span> <span class="title">animate</span><span class="params">()</span> {</span>

      <span class="keyword">var</span> i;

      <span class="keyword">if</span> (!objects.blocks.length) {
        <span class="keyword">return</span> <span class="literal">false</span>;
      }

      <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;objects.blocks.length; i++) {

        <span class="keyword">if</span> (objects.blocks[i].animate()) {</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>if true is returned, animation is complete - remove from the array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">delete</span> objects.blocks_hash[objects.blocks[i].data.id];

          objects.blocks.splice(i, <span class="number">1</span>);

          <span class="keyword">if</span> (PERFORMANCE_MODE || DEBUG_MODE) {
            console.log(<span class="string">'removed animating block; new count: '</span> + objects.blocks.length);

          }

        }

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">startAnimation</span><span class="params">(oBlock)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>we have something that should now be animating.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (objects.blocks_hash[oBlock.data.id] === <span class="literal">undefined</span>) {

        objects.blocks_hash[oBlock.data.id] = <span class="literal">true</span>;
        objects.blocks.push(oBlock);

      }

    }
 
    <span class="keyword">return</span> {
      animate: animate,
      startAnimation: startAnimation
    };

  }

  objects.blockController = <span class="keyword">new</span> BlockController();

  <span class="keyword">var</span> blockCounter = <span class="number">0</span>;

  <span class="function"><span class="keyword">function</span> <span class="title">Block</span><span class="params">(oOptions)</span> {</span>

    <span class="keyword">var</span> o;

    <span class="keyword">var</span> objectInterface;

    <span class="keyword">var</span> defaults = {
      power: <span class="number">2</span>
    };

    <span class="keyword">var</span> data = {

      id: <span class="string">'block_'</span> + (blockCounter++),
      power: defaults.power, <span class="comment">// when 0: dead</span>
      points: <span class="number">10</span>,
      dead: <span class="literal">false</span>,
      x: oOptions.x * game.data.NODE_WIDTH,
      y: oOptions.y * game.data.NODE_HEIGHT,
      w: game.data.NODE_WIDTH,
      h: game.data.NODE_HEIGHT,
      type: oOptions.type,
      subType: oOptions.subType,
      hitFrame: <span class="number">0</span>,
      hitFrames: <span class="number">6</span>

    };

    <span class="function"><span class="keyword">function</span> <span class="title">hittable</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>this thing can be hit (or collide with the ship), provied it is active.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">return</span> !data.dead;
    }

    <span class="function"><span class="keyword">function</span> <span class="title">pixelCollisionCheck</span><span class="params">(oOptions)</span> {</span>

      <span class="keyword">var</span> hit;
      <span class="keyword">var</span> collision = game.objects.collision;

      hit = collision.checkSprites({
         object1: oOptions,
         object2: {
           type: <span class="string">'block-type-generic'</span>,
           x: data.x,
           y: data.y,
           w: data.w,
           h: data.h
         }
      });

      <span class="keyword">return</span> hit;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">applyFrame</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (o) {
        o.style.backgroundPosition = <span class="string">'0px '</span> + (data.hitFrame * -<span class="number">32</span>) + <span class="string">'px'</span>;
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">animationComplete</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>go back to letting CSS do its thing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        o.style.backgroundPosition = <span class="string">''</span>;

        utils.css.remove(o, <span class="string">'exploding'</span>);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">animationStart</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>register animation sequence with controller...</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        game.objects.blockController.startAnimation(objectInterface);
        utils.css.add(o, <span class="string">'exploding'</span>);
        applyFrame();

    }

    <span class="function"><span class="keyword">function</span> <span class="title">hit</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>explode?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (!data.dead &amp;&amp; data.power) {

        data.power--;
        objects.gameController.addPoints(data.points);
        animationStart();

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">destruct</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>clean-up: remove from the DOM.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      o.parentNode.removeChild(o);
      o = <span class="literal">null</span>;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">dead</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>after explosion sequence has finished</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (data.power === <span class="number">0</span>) {

          data.dead = <span class="literal">true</span>;
          o.style.display = <span class="string">'none'</span>;
          game.objects.statsController.record(<span class="string">'block'</span>);
          destruct();

        }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (!o) {

        o = makeGridItem({
          x: oOptions.x,
          y: oOptions.y,
          type: data.type,
          subType: data.subType
        });

      }

      dom.worldFragment.appendChild(o);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">restore</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>reset state and re-init</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">if</span> (o) {
        o.style.backgroundPosition = <span class="string">''</span>;
        utils.css.remove(o, <span class="string">'dead'</span>);
      }

      data.dead = <span class="literal">false</span>;
      data.power = defaults.power;

      init();

    }

    <span class="function"><span class="keyword">function</span> <span class="title">animate</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>hit / death sequence</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        <span class="keyword">if</span> (data.dead) {</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>edge case (and tell controller this should not be animated any more.)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">return</span> <span class="literal">true</span>;
        }

        <span class="keyword">var</span> complete = <span class="literal">false</span>;

        <span class="keyword">if</span> (data.hitFrame &gt;= data.hitFrames) {</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>animation sequence is complete</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
          data.hitFrame = <span class="number">0</span>;

          animationComplete();

          <span class="keyword">if</span> (data.power === <span class="number">0</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>it&#39;s all over.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            dead();
          }

          complete = <span class="literal">true</span>;

        } <span class="keyword">else</span> {

          applyFrame();

        }

        data.hitFrame++;

        <span class="keyword">return</span> complete;

    }

    init();

    objectInterface = {
      animate: animate,
      data: data,
      hit: hit,
      hittable: hittable,
      pixelCollisionCheck: pixelCollisionCheck,
      restore: restore
    };

    <span class="keyword">return</span> objectInterface;

  }

  <span class="keyword">var</span> badGuyTemplate = document.createElement(<span class="string">'div'</span>);
  badGuyTemplate.innerHTML = <span class="string">'&lt;div class="icon"&gt;&lt;/div&gt;'</span>;
  badGuyTemplate.className = <span class="string">'bad-guy'</span>;

  <span class="keyword">var</span> badGuyCounter = <span class="number">0</span>;

  <span class="function"><span class="keyword">function</span> <span class="title">BadGuy</span><span class="params">()</span> {</span>

    <span class="keyword">var</span> o,
        oIcon,
        css,
        data,
        objectInterface,</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>for centering around ship</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        centerOffset = <span class="number">12</span>,
        counter = <span class="number">0</span>,
        sound,
        nodeParent = game.dom.world;

    css = {
      <span class="string">'bird'</span>: <span class="string">'bird'</span>,
      <span class="string">'smiley'</span>: <span class="string">'smiley'</span>,
      <span class="string">'x'</span>: <span class="string">'x'</span>,
      <span class="string">'exploding'</span>: <span class="string">'exploding'</span>
    };

    data = {
      active: <span class="literal">false</span>,
      dead: <span class="literal">false</span>,
      visible: <span class="literal">false</span>,
      id: <span class="string">'badGuy'</span> + badGuyCounter++,
      exploding: <span class="literal">false</span>,
      x: <span class="literal">null</span>,
      y: <span class="literal">null</span>,
      w: <span class="number">24</span>, <span class="comment">// HACK: container is actually 32 (for explosion), character is 24x24.</span>
      h: <span class="number">24</span>,
      containerW: <span class="number">32</span>,
      containerH: <span class="number">32</span>,
      vX: (game.data.NODE_WIDTH/<span class="number">16</span> + Math.random() * <span class="number">0.5</span>) * game.objects.gameLoop.data.GAME_SPEED,
      vY: (game.data.NODE_HEIGHT/<span class="number">16</span> + Math.random() * <span class="number">0.5</span>) * game.objects.gameLoop.data.GAME_SPEED,
      points: <span class="number">200</span>,
      explosionFrame: <span class="number">0</span>,
      explosionFrames: <span class="number">10</span>,
      jitterX: <span class="number">0</span>,
      jitterY: <span class="number">0</span>,
      lastX: <span class="literal">null</span>,
      lastY: <span class="literal">null</span>,
      row: <span class="literal">null</span>,
      col: <span class="literal">null</span>,
      type: <span class="literal">null</span>,
      types: [<span class="string">'bird'</span>, <span class="string">'smiley'</span>, <span class="string">'x'</span>],
      frame: <span class="number">0</span>,
      frameCount: <span class="number">0</span>,
      frameCounts: {
        bird: <span class="number">3</span>,
        smiley: <span class="number">3</span>,
        x: <span class="number">4</span>
      }
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>die when fire hits end of screen?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="function"><span class="keyword">function</span> <span class="title">hide</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (data.visible) {
        data.visible = <span class="literal">false</span>;
        o.style.visibility = <span class="string">'hidden'</span>;
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">show</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (!data.visible) {
        data.visible = <span class="literal">true</span>;
        o.style.visibility = <span class="string">'visible'</span>;
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">getRandomJitter</span><span class="params">()</span> {</span>

      <span class="keyword">return</span> parseInt(Math.random() * centerOffset, <span class="number">10</span>) * Math.random() &gt; <span class="number">0.5</span> ? <span class="number">1</span> : -<span class="number">1</span>;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">randomizeJitter</span><span class="params">()</span> {</span>

      data.jitterX = centerOffset + getRandomJitter();
      data.jitterY = centerOffset + getRandomJitter();

    }

    <span class="function"><span class="keyword">function</span> <span class="title">moveTo</span><span class="params">(x,y)</span> {</span>

      <span class="keyword">var</span> location;

      <span class="keyword">if</span> (o) {

        <span class="keyword">if</span> (game.objects.screen.isInView(data.col, data.row)) {

          o.style.left = Math.floor(x) + <span class="string">'px'</span>;
          o.style.top = Math.floor(y) + <span class="string">'px'</span>;

          <span class="keyword">if</span> (counter % <span class="number">3</span> === <span class="number">0</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>only apply jitter every so often</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
            o.style.marginLeft = data.jitterX + <span class="string">'px'</span>;
            o.style.marginTop = data.jitterY + <span class="string">'px'</span>;

            randomizeJitter();

          } <span class="keyword">else</span> {

            o.style.marginLeft = centerOffset + <span class="string">'px'</span>;
            o.style.marginTop = centerOffset + <span class="string">'px'</span>;

          }

          show();

        } <span class="keyword">else</span> {

          hide();

        }

        data.lastX = x;
        data.lastY = y;</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>TODO: Review vs. coordinate checks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        location = game.objects.collision.xyToRowCol(x + data.jitterX, y + data.jitterY);

        <span class="keyword">if</span> (location.col !== data.col || location.row !== data.row) {

          data.col = location.col;
          data.row = location.row;

          game.objects.badGuyMap.registerLocation({
            object: objectInterface,
            id: data.id,
            col: data.col,
            row: data.row
          });

        }

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">moveBy</span><span class="params">(x,y)</span> {</span> <span class="comment">// TODO: labels for relative grid item values?</span></pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>move and do collision check?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      data.x += (x * game.objects.gameLoop.data.speedMultiplier);
      data.y += (y * game.objects.gameLoop.data.speedMultiplier);

      moveTo(data.x, data.y);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">applyFrame</span><span class="params">(frame)</span> {</span>

      <span class="keyword">if</span> (oIcon) {
        oIcon.style.backgroundPosition = <span class="string">'0px '</span> + (frame * -data.h) + <span class="string">'px'</span>;
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">applyFrameX</span><span class="params">(frame)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>for horizontal sprites</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">if</span> (o) {
        o.style.backgroundPosition = (frame * -data.containerW) + <span class="string">'px 0px'</span>;
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">targetPlayer</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>home in on player coordinates.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">var</span> ship = game.objects.ship;

      <span class="keyword">return</span> {
        deltaX: (data.x &lt; ship.data.x - (ship.data.w/<span class="number">2</span>) ? <span class="number">1</span> : -<span class="number">1</span>),
        deltaY: (data.y &lt; ship.data.y - (ship.data.h/<span class="number">2</span>) ? <span class="number">1</span> : -<span class="number">1</span>)
      };

    }

    <span class="function"><span class="keyword">function</span> <span class="title">randomizePosition</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>warp to a random row/col. give &#39;er.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">var</span> row, col, x, y;

      row = parseInt(Math.random() * game.data.world_rows, <span class="number">10</span>);
      col = parseInt(Math.random() * game.data.world_cols, <span class="number">10</span>);

      x = (col * game.data.NODE_WIDTH);
      y = (row * game.data.NODE_HEIGHT);

      data.x = x;
      data.y = y;

      moveTo(x, y);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">setRandomType</span><span class="params">()</span> {</span>

      data.type = data.types[parseInt(Math.random() * data.types.length, <span class="number">10</span>)];

      data.frameCount = data.frameCounts[data.type];</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>append relevant CSS</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      utils.css.add(o, css[data.type]);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">reset</span><span class="params">()</span> {</span>

      hide();

      utils.css.remove(css.exploding);

      data.active = <span class="literal">false</span>;
      data.exploding = <span class="literal">false</span>;
      data.explosionFrame = <span class="number">0</span>;

      moveTo(<span class="number">0</span>,<span class="number">0</span>);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">startAttack</span><span class="params">()</span> {</span>

      randomizePosition();</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>play sound on loop, annoy user?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (features.audio) {
        sound = soundManager.getSoundById(<span class="string">'badguy-loop-'</span> + (Math.random() &gt; <span class="number">0.5</span> ? <span class="number">1</span> : <span class="number">0</span>));
        <span class="keyword">if</span> (sound &amp;&amp; !sound.playState) {
          sound.play();
        }
      }

      <span class="keyword">if</span> (!data.active) {
        data.active = <span class="literal">true</span>;
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">die</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <p>explosion effect/noise</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (!data.dead &amp;&amp; !data.exploding) {

        objects.gameController.addPoints(data.points);

        <span class="keyword">if</span> (features.audio) {
          incrementAudioPitch();
          <span class="keyword">if</span> (sound) {
            sound.stop();
          }
          soundSprites.playBoom(audioBoomScale[getAudioPitch()]);
        }

        data.exploding = <span class="literal">true</span>;
        utils.css.add(o, css.exploding);</pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <p>and remove from the collision map.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        game.objects.badGuyMap.clearLocation(data.id);

        game.objects.statsController.record(<span class="string">'badGuy'</span>);

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">collisionCheck</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p>did the bad guy hit its target, or turret fire, or ?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">var</span> i, j,
          ship = game.objects.ship,
          hit = <span class="literal">false</span>,
          turretGunfire = <span class="literal">null</span>,
          thisPoint,
          fire,</pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>gunfireObject,</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          location;

      <span class="keyword">if</span> (!data.active || data.exploding || data.dead) {
        <span class="keyword">return</span> <span class="literal">false</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <p>check ship
check ship gunfire
check turrent gunfire
check other bad guys
check spaceballs?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      thisPoint = {
        x: data.x + data.jitterX,
        y: data.y + data.jitterY,
        w: data.w,
        h: data.h
      };</pre></div></div>
            
        </li>
        
        
        <li id="section-72">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <p>did the bad guy hit the ship?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      hit = game.objects.ship.collisionCheck(thisPoint);

      <span class="keyword">if</span> (hit) {
        console.log(<span class="string">'bad guy hit the ship'</span>);
        die();
        ship.die();
        <span class="keyword">return</span> <span class="literal">true</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-73">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              <p>did we hit a bullet?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      fire = game.objects.ship.objects.shipGunfire;

      <span class="keyword">if</span> (fire.length) {

        <span class="keyword">for</span> (i=<span class="number">0</span>, j=fire.length; i&lt;j; i++) {

          hit = game.objects.collision.check(thisPoint, {
            x: fire[i].data.x,
            y: fire[i].data.y,
            w: fire[i].data.w,
            h: fire[i].data.h
          });

          <span class="keyword">if</span> (hit) {</pre></div></div>
            
        </li>
        
        
        <li id="section-74">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              <p>we have a winner.
let gunfire pass through, per original game rules.
fire[i].die();</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="keyword">break</span>;
          }

        }

      }</pre></div></div>
            
        </li>
        
        
        <li id="section-75">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              <p>TODO: Make new map-based method work better.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="comment">/*
      gunfireObject = game.objects.shipGunfireMap.check(data.row, data.col);

      if (gunfireObject &amp;&amp; !gunfireObject.data.dead) {</pre></div></div>
            
        </li>
        
        
        <li id="section-76">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              <p>we have a (potential) winner.
do more precise coordinate check within grid.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        hit = game.objects.collision.check(thisPoint, {
          x: gunfireObject.data.x,
          y: gunfireObject.data.y,
          w: gunfireObject.data.w,
          h: gunfireObject.data.h
        });
      }
*/

      if (hit) {

        console.log('bad guy hit ship gunfire');
        die();

      } else {</pre></div></div>
            
        </li>
        
        
        <li id="section-77">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>
              <p>did the bad guy hit turret gunfire?</p>

            </div>
            
        </li>
        
        
        <li id="section-78">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-78">&#182;</a>
              </div>
              <p>if heading down or right, base coordinates on far edges.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        location = game.objects.collision.xyToRowCol(data.x + (data.w/<span class="number">2</span>), data.y + (data.h/<span class="number">2</span>));</pre></div></div>
            
        </li>
        
        
        <li id="section-79">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-79">&#182;</a>
              </div>
              <p>var location = game.objects.collision.xyToRowCol(data.x, data.y);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        turretGunfire = game.objects.turretGunfireMap.check(location.row, location.col);

        <span class="keyword">if</span> (turretGunfire) {</pre></div></div>
            
        </li>
        
        
        <li id="section-80">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-80">&#182;</a>
              </div>
              <p>we have an object. do a collision check.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          hit = turretGunfire.collisionCheck();

          <span class="keyword">if</span> (hit) {
            die();
          }

        }

      }

      <span class="keyword">return</span> hit;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">destruct</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-81">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-81">&#182;</a>
              </div>
              <p>remove from the dom, etc.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (o) {
        <span class="keyword">if</span> (o.parentNode) {
          o.parentNode.removeChild(o);
        }
        o = <span class="literal">null</span>;
        oIcon = <span class="literal">null</span>;
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">dead</span><span class="params">()</span> {</span>

        data.exploding = <span class="literal">false</span>;
        data.dead = <span class="literal">true</span>;
        reset();
        destruct();

    }

    <span class="function"><span class="keyword">function</span> <span class="title">animate</span><span class="params">()</span> {</span>

      <span class="keyword">var</span> deltas;</pre></div></div>
            
        </li>
        
        
        <li id="section-82">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-82">&#182;</a>
              </div>
              <p>may be inactive, or died and awaiting cleanup</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (!data.active || data.dead) {
        <span class="keyword">return</span> <span class="literal">false</span>;
      }

      counter++;

      <span class="keyword">if</span> (!data.exploding) {

        <span class="keyword">if</span> (counter % <span class="number">2</span> === <span class="number">0</span>) {

          data.frame++;

          <span class="keyword">if</span> (data.frame &gt;= data.frameCount) {
            data.frame = <span class="number">0</span>;
          }</pre></div></div>
            
        </li>
        
        
        <li id="section-83">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-83">&#182;</a>
              </div>
              <p>apply background position</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          applyFrame(data.frame);

        }</pre></div></div>
            
        </li>
        
        
        <li id="section-84">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-84">&#182;</a>
              </div>
              <p>figure out direction.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        deltas = targetPlayer();</pre></div></div>
            
        </li>
        
        
        <li id="section-85">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-85">&#182;</a>
              </div>
              <p>increase frame count, move vX + vY</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        moveBy(data.vX * deltas.deltaX * game.objects.gameLoop.data.GAME_SPEED, data.vY * deltas.deltaY * game.objects.gameLoop.data.GAME_SPEED);</pre></div></div>
            
        </li>
        
        
        <li id="section-86">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-86">&#182;</a>
              </div>
              <p>and do collision check?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        collisionCheck();

      } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-87">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-87">&#182;</a>
              </div>
              <p>explosion/death sequence</p>

            </div>
            
        </li>
        
        
        <li id="section-88">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-88">&#182;</a>
              </div>
              <pre><code>   if (counter % 2 === 0) {</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>
          data.explosionFrame++;

          applyFrameX(data.explosionFrame);

          <span class="keyword">if</span> (data.explosionFrame &gt;= data.explosionFrames) {</pre></div></div>
            
        </li>
        
        
        <li id="section-89">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-89">&#182;</a>
              </div>
              <p>it&#39;s all over.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            dead();
          }</pre></div></div>
            
        </li>
        
        
        <li id="section-90">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-90">&#182;</a>
              </div>
              <pre><code>   }</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (!o) {

         o = badGuyTemplate.cloneNode(<span class="literal">true</span>);
         oIcon = o.childNodes[<span class="number">0</span>];

        setRandomType();

        nodeParent.appendChild(o);

      }

    }</pre></div></div>
            
        </li>
        
        
        <li id="section-91">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-91">&#182;</a>
              </div>
              <p>hack/convenience: start right away?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    init();</pre></div></div>
            
        </li>
        
        
        <li id="section-92">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-92">&#182;</a>
              </div>
              <p>hack/testing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    startAttack();

    objectInterface = {
      animate: animate,
      collisionCheck: collisionCheck,
      data: data,
      die: die,
      init: init,
      startAttack: startAttack
    };

    <span class="keyword">return</span> objectInterface;

  }

  <span class="function"><span class="keyword">function</span> <span class="title">BadGuyController</span><span class="params">()</span> {</span>

    <span class="keyword">var</span> objects = {

      badGuys: game.objects.badGuys

    };

    <span class="function"><span class="keyword">function</span> <span class="title">animate</span><span class="params">()</span> {</span>

      <span class="keyword">var</span> items = objects.badGuys,
          i, j;

      <span class="keyword">for</span> (i=<span class="number">0</span>, j=items.length; i&lt;j; i++) {
        items[i].animate();
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">collision</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (features.audio) {</pre></div></div>
            
        </li>
        
        
        <li id="section-93">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-93">&#182;</a>
              </div>
              <p>make noise.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        incrementAudioPitch();
        soundSprites.playBoom(audioBoomScale[getAudioPitch()]);
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">selfCollisionCheck</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-94">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-94">&#182;</a>
              </div>
              <p>did one bad guy crash into another?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">var</span> items = objects.badGuys,
          i, j, hit, thisPoint;

      <span class="keyword">if</span> (items.length) {

        <span class="keyword">for</span> (j=items.length-<span class="number">1</span>; j&gt;=<span class="number">0</span>; j--) {

          thisPoint = {
            x: items[j].data.x,
            y: items[j].data.y,
            w: items[j].data.w,
            h: items[j].data.h
          };

          <span class="keyword">for</span> (i=items.length-<span class="number">1</span>; i&gt;=<span class="number">0</span>; i--) {</pre></div></div>
            
        </li>
        
        
        <li id="section-95">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-95">&#182;</a>
              </div>
              <p>don&#39;t compare to self, or dead things...</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="keyword">if</span> (i !== j &amp;&amp; items[i].data.active &amp;&amp; !items[i].data.exploding &amp;&amp; items[j].data.active &amp;&amp; !items[j].data.exploding) {

              hit = game.objects.collision.check(thisPoint, {
                x: items[i].data.x,
                y: items[i].data.y,
                w: items[i].data.w,
                h: items[i].data.h
              });

              <span class="keyword">if</span> (hit) {</pre></div></div>
            
        </li>
        
        
        <li id="section-96">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-96">&#182;</a>
              </div>
              <p>double-boom, all the way!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                items[i].die();
                items[j].die();
              }

            }

          }

        }

        <span class="keyword">if</span> (hit) {
          collision();
        }

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">collisionCheck</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-97">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-97">&#182;</a>
              </div>
              <p>check bad guy objects for collision</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">var</span> items = objects.badGuys,
          i, j;

      <span class="keyword">var</span> hit;

      <span class="keyword">if</span> (items.length) {

        <span class="keyword">for</span> (i=<span class="number">0</span>, j=items.length; i&lt;j; i++) {
          hit = items[i].collisionCheck();
          <span class="keyword">if</span> (hit) {
            hit = <span class="literal">true</span>;
            <span class="keyword">break</span>;
          }
        }

      }</pre></div></div>
            
        </li>
        
        
        <li id="section-98">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-98">&#182;</a>
              </div>
              <p>TODO: needless optimization?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (!hit) {
        selfCollisionCheck();
      }

      <span class="keyword">if</span> (hit) {
        collision();
      }

      <span class="keyword">return</span> hit;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">createBadGuy</span><span class="params">()</span> {</span>

      <span class="keyword">var</span> i;</pre></div></div>
            
        </li>
        
        
        <li id="section-99">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-99">&#182;</a>
              </div>
              <p>hack: check and clean up any dead ones, first.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;objects.badGuys.length; i++) {
        <span class="keyword">if</span> (objects.badGuys[i].data.dead) {
          objects.badGuys.splice(i, <span class="number">1</span>);
        }
      }

      objects.badGuys.push(<span class="keyword">new</span> BadGuy());

    }

    <span class="function"><span class="keyword">function</span> <span class="title">killAll</span><span class="params">()</span> {</span>

      <span class="keyword">var</span> i, j;</pre></div></div>
            
        </li>
        
        
        <li id="section-100">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-100">&#182;</a>
              </div>
              <p>the effect of a smartbomb.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">for</span> (i=<span class="number">0</span>, j=objects.badGuys.length; i&lt;j; i++) {</pre></div></div>
            
        </li>
        
        
        <li id="section-101">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-101">&#182;</a>
              </div>
              <p>TODO: active check?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        objects.badGuys[i].die();
      }

    }

    <span class="keyword">return</span> {
      animate: animate,
      collisionCheck: collisionCheck,
      createBadGuy: createBadGuy,
      killAll: killAll,
      objects: objects
    };

  }

  objects.badGuyController = <span class="keyword">new</span> BadGuyController();

  spaceBallTemplate = document.createElement(<span class="string">'div'</span>);
  spaceBallTemplate.className = <span class="string">'spaceball'</span>;

  <span class="function"><span class="keyword">function</span> <span class="title">SpaceBall</span><span class="params">(oOptions)</span> {</span>

    <span class="comment">/**
     * "it's like a meatball, but in space!"
     * a mysterious asteroid blob that idly floats around the world.
     * it doesn't judge, it doesn't blame, it just *is*.
     * oblivious to ship and turret gunfire.
     * destroys everything in its path.
     * bounces off of blocks, walls and other spaceballs.
     */</span>

    <span class="keyword">var</span> o,
        data,
        objectInterface,
        nodeParent = game.dom.world;

    data = {
      active: <span class="literal">false</span>,
      visible: <span class="literal">false</span>,
      id: <span class="string">'spaceBall'</span> + spaceBallCounter++,
      x: <span class="literal">null</span>,
      y: <span class="literal">null</span>,
      w: <span class="number">32</span>,
      h: <span class="number">32</span>,
      vX: <span class="number">0</span>,
      vY: <span class="number">0</span>,
      lastX: <span class="literal">null</span>,
      lastY: <span class="literal">null</span>,
      row: oOptions.row,
      col: oOptions.col
    };

    <span class="function"><span class="keyword">function</span> <span class="title">setDirection</span><span class="params">(noAxisFlip)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-102">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-102">&#182;</a>
              </div>
              <p>randomly choose a direction.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">var</span> xAxis = Math.random() &gt; <span class="number">0.5</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-103">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-103">&#182;</a>
              </div>
              <p>randomly choose +/-</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          velocity = (game.data.NODE_WIDTH/<span class="number">16</span>) * (Math.random() &gt; <span class="number">0.5</span> ? <span class="number">1</span> : -<span class="number">1</span>) * game.objects.gameLoop.data.GAME_SPEED;</pre></div></div>
            
        </li>
        
        
        <li id="section-104">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-104">&#182;</a>
              </div>
              <p>HACK: for now, just be stupid and reverse course.
current bug exists where reversing direction causes minute up/down/left/right movements, resulting in imperfect grid alignment</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      noAxisFlip = <span class="literal">true</span>;

      <span class="keyword">if</span> (!noAxisFlip) {

        data.vX = (xAxis ? velocity: <span class="number">0</span>);
        data.vY = (xAxis ? <span class="number">0</span> : velocity);

      } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-105">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-105">&#182;</a>
              </div>
              <p>reverse direction on the current axis.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        data.vX *= xAxis ? <span class="number">1</span> : -<span class="number">1</span>;
        data.vY *= xAxis ? <span class="number">1</span> : -<span class="number">1</span>;

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">hide</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (data.visible) {
        data.visible = <span class="literal">false</span>;
        <span class="keyword">if</span> (nodeParent &amp;&amp; o) {
          o.style.visibility = <span class="string">'hidden'</span>;
        }
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">show</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (!data.visible) {
        data.visible = <span class="literal">true</span>;
        o.style.visibility = <span class="string">'visible'</span>;
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">moveTo</span><span class="params">(x,y)</span> {</span>

      <span class="keyword">var</span> location;

      <span class="keyword">if</span> (o) {

        x = Math.max(<span class="number">0</span>, x);
        y = Math.max(<span class="number">0</span>, y);

        data.lastX = x;
        data.lastY = y;</pre></div></div>
            
        </li>
        
        
        <li id="section-106">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-106">&#182;</a>
              </div>
              <p>location = game.objects.collision.xyToRowCol(x + (data.vX &gt;= 0 ? data.w : 0), y + (data.vY &gt;= 0 ? data.h : 0));</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        location = game.objects.collision.xyToRowCol(x, y);

        <span class="keyword">if</span> (game.objects.screen.isInView(location.col, location.row)) {


          <span class="keyword">if</span> (USE_TRANSFORM) {

            o.style[features.transform.prop] = <span class="string">'translate3d('</span> + Math.floor(x) + <span class="string">'px, '</span> + Math.floor(y) + <span class="string">'px, 0px)'</span>;

          } <span class="keyword">else</span> {

            o.style.left = Math.max(<span class="number">0</span>, Math.floor(x)) + <span class="string">'px'</span>;
            o.style.top = Math.max(<span class="number">0</span>, Math.floor(y)) + <span class="string">'px'</span>;

          }

          show();

        } <span class="keyword">else</span> {

          hide();

        }

        <span class="keyword">if</span> (location.col !== data.col || location.row !== data.row) {

          data.col = location.col;
          data.row = location.row;

          game.objects.spaceBallMap.registerLocation({
            object: objectInterface,
            id: data.id,
            col: data.col,
            row: data.row
          });

        }

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">moveBy</span><span class="params">(x,y)</span> {</span> <span class="comment">// TODO: labels for relative grid item values?</span></pre></div></div>
            
        </li>
        
        
        <li id="section-107">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-107">&#182;</a>
              </div>
              <p>move and do collision check?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      data.x += (x * game.objects.gameLoop.data.speedMultiplier);
      data.y += (y * game.objects.gameLoop.data.speedMultiplier);

      moveTo(data.x, data.y);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">bounce</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-108">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-108">&#182;</a>
              </div>
              <p>immediately move to exact grid coordinates, so we don&#39;t get double-collision issues...</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      moveTo(data.col * game.data.NODE_WIDTH, data.row * game.data.NODE_HEIGHT);</pre></div></div>
            
        </li>
        
        
        <li id="section-109">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-109">&#182;</a>
              </div>
              <p>reverse direction on a random axis.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      setDirection();

      moveBy(data.vX, data.vY);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">collisionCheck</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-110">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-110">&#182;</a>
              </div>
              <p>bounce if we hit a world boundary, a grid item, or another spaceball.</p>

            </div>
            
        </li>
        
        
        <li id="section-111">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-111">&#182;</a>
              </div>
              <p>TODO: allow wrap-around, if objects don&#39;t exist at the other end?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">var</span> item,
          location;</pre></div></div>
            
        </li>
        
        
        <li id="section-112">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-112">&#182;</a>
              </div>
              <p>non-standard formatting, in favour of lengthy if...else</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> ((data.vX &lt; <span class="number">0</span> &amp;&amp; data.x + data.vX &lt;= <span class="number">0</span>)
        || (data.vX &gt;= <span class="number">0</span> &amp;&amp; data.col &gt;= game.data.world_cols)
        || (data.vY &gt;= <span class="number">0</span> &amp;&amp; data.row &gt;= game.data.world_rows)
        || (data.vY &lt; <span class="number">0</span> &amp;&amp; data.y + data.vY &lt;= <span class="number">0</span>)) {
        <span class="keyword">return</span> bounce();
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-113">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-113">&#182;</a>
              </div>
              <p>check next block?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (data.vX &gt; <span class="number">0</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-114">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-114">&#182;</a>
              </div>
              <p>check right side</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        location = game.objects.collision.xyToRowCol(data.x + data.w, data.y);

      } <span class="keyword">else</span> <span class="keyword">if</span> (data.vY &gt; <span class="number">0</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-115">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-115">&#182;</a>
              </div>
              <p>check bottom side</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        location = game.objects.collision.xyToRowCol(data.x, data.y + data.h);

      }

      <span class="keyword">if</span> (!location) {</pre></div></div>
            
        </li>
        
        
        <li id="section-116">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-116">&#182;</a>
              </div>
              <p>check grid for blocks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        item = game.data.map[data.row][data.col] || <span class="literal">null</span>;

      } <span class="keyword">else</span> <span class="keyword">if</span> (!item) {

        item = game.data.map[location.row][location.col] || <span class="literal">null</span>;

      }</pre></div></div>
            
        </li>
        
        
        <li id="section-117">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-117">&#182;</a>
              </div>
              <p>this should be only a Block() instance.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (item &amp;&amp; !item.data.dead) {</pre></div></div>
            
        </li>
        
        
        <li id="section-118">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-118">&#182;</a>
              </div>
              <p>console.log(&#39;spaceball hit block&#39;);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">return</span> bounce();
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">setInitialPosition</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-119">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-119">&#182;</a>
              </div>
              <p>warp to a random, unoccupied space.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">var</span> row = data.row,
          col = data.col,
          x, y;

      x = (col * game.data.NODE_WIDTH);
      y = (row * game.data.NODE_HEIGHT);

      data.x = x;
      data.y = y;

      moveTo(x, y);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">animate</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (data.active) {</pre></div></div>
            
        </li>
        
        
        <li id="section-120">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-120">&#182;</a>
              </div>
              <p>increase frame count, move vX + vY</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        moveBy(data.vX, data.vY);</pre></div></div>
            
        </li>
        
        
        <li id="section-121">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-121">&#182;</a>
              </div>
              <p>and do collision check?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        collisionCheck();

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">startAttack</span><span class="params">()</span> {</span>

      setInitialPosition();

      setDirection();

      <span class="keyword">if</span> (!data.active) {
        data.active = <span class="literal">true</span>;
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">hittable</span><span class="params">()</span> {</span>

      <span class="keyword">return</span> data.active;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">pixelCollisionCheck</span><span class="params">(oOptions)</span> {</span>

      <span class="keyword">var</span> hit,
          collision = game.objects.collision;

      hit = collision.checkSprites({
         object1: oOptions,
         object2: {</pre></div></div>
            
        </li>
        
        
        <li id="section-122">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-122">&#182;</a>
              </div>
              <p>HACK: note re-use of ship pixel data here. It&#39;s close enough. :D</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>           type: <span class="string">'ship'</span>,
           x: data.x,
           y: data.y,
           w: data.w,
           h: data.h
         }
      });

      <span class="keyword">return</span> hit;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">()</span> {</span>

      <span class="keyword">var</span> velocity = (game.data.NODE_WIDTH/<span class="number">16</span>) * (Math.random() &gt; <span class="number">0.5</span> ? <span class="number">1</span> : -<span class="number">1</span>) * game.objects.gameLoop.data.GAME_SPEED;

      <span class="keyword">if</span> (!o) {

         o = spaceBallTemplate.cloneNode(<span class="literal">true</span>);

         <span class="keyword">if</span> (Math.random() &gt; <span class="number">0.5</span>) {
           data.vX = velocity;
         } <span class="keyword">else</span> {
           data.vY = velocity;
         }

      }

      startAttack();</pre></div></div>
            
        </li>
        
        
        <li id="section-123">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-123">&#182;</a>
              </div>
              <p>append to DOM</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      game.dom.worldFragment.appendChild(o);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">restore</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-124">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-124">&#182;</a>
              </div>
              <p>you can&#39;t kill a roach, man.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      init();</pre></div></div>
            
        </li>
        
        
        <li id="section-125">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-125">&#182;</a>
              </div>
              <p>show right away if it should be visible, too</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">if</span> (data.visible) {

        nodeParent.appendChild(o);
        o.style.display = <span class="string">'block'</span>;

      }

    }</pre></div></div>
            
        </li>
        
        
        <li id="section-126">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-126">&#182;</a>
              </div>
              <p>hack/convenience: start right away?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    init();</pre></div></div>
            
        </li>
        
        
        <li id="section-127">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-127">&#182;</a>
              </div>
              <p>hack/testing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    startAttack();

    objectInterface = {
      animate: animate,
      bounce: bounce,
      data: data,
      hittable: hittable,
      init: init,
      pixelCollisionCheck: pixelCollisionCheck,
      restore: restore,
      startAttack: startAttack
    };

    <span class="keyword">return</span> objectInterface;

  }

  <span class="function"><span class="keyword">function</span> <span class="title">Screen</span><span class="params">()</span> {</span>

    <span class="keyword">var</span> data, events, refreshVisibleGrid;

    <span class="keyword">var</span> lastVisibleCheck = {</pre></div></div>
            
        </li>
        
        
        <li id="section-128">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-128">&#182;</a>
              </div>
              <p>previous screen coordinates</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      x: <span class="literal">null</span>,
      y: <span class="literal">null</span>,
      screen_width: <span class="literal">null</span>,
      screen_height: <span class="literal">null</span>
    };

    data = {

      coords: {
        x: <span class="number">0</span>,
        y: <span class="number">0</span>,
        lastX: <span class="literal">null</span>,
        lastY: <span class="literal">null</span>,
        width: <span class="number">0</span>,
        height: <span class="number">0</span>
      },

      visibleGridInfo: {
        from: {
          row: <span class="literal">null</span>,
          col: <span class="literal">null</span>
        },
        to: {
          row: <span class="literal">null</span>,
          col: <span class="literal">null</span>
        },
        range: <span class="literal">null</span>
      }

    };

    events = {

      resize: <span class="keyword">function</span>() {</pre></div></div>
            
        </li>
        
        
        <li id="section-129">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-129">&#182;</a>
              </div>
              <p>note additional ORed legacy browser (IE 8, etc.) checks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        data.coords.width = window.innerWidth || (document.documentElement.clientWidth || document.body.clientWidth || document.body.scrollWidth);
        data.coords.height = window.innerHeight || (document.documentElement.clientHeight || document.body.clientHeight || document.body.scrollHeight);

        refreshVisibleGrid();

      }

    };

    refreshVisibleGrid = <span class="keyword">function</span>() {

      <span class="keyword">var</span> coords = data.coords,
          last = lastVisibleCheck,
          visible;</pre></div></div>
            
        </li>
        
        
        <li id="section-130">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-130">&#182;</a>
              </div>
              <p>TODO: make sure this check works.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (last.x === coords.x &amp;&amp; last.y === coords.y &amp;&amp; coords.screen_width === coords.width &amp;&amp; coords.screen_height === coords.height) {</pre></div></div>
            
        </li>
        
        
        <li id="section-131">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-131">&#182;</a>
              </div>
              <p>no change since last check</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">return</span> data.visibleGridInfo;

      }</pre></div></div>
            
        </li>
        
        
        <li id="section-132">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-132">&#182;</a>
              </div>
              <p>update previous screen coordinates</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      last.x = coords.x;
      last.y = coords.y;

      coords.screen_width = coords.width;
      coords.screen_height = coords.height;

      last.screen_width = coords.width;
      last.screen_height = coords.height;</pre></div></div>
            
        </li>
        
        
        <li id="section-133">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-133">&#182;</a>
              </div>
              <p>var visible_range = [];</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      visible = {
        from: game.objects.collision.xyToRowCol(coords.x, coords.y),
        to: game.objects.collision.xyToRowCol(coords.x + coords.width, coords.y + coords.height)
      };

      data.visibleGridInfo = {
        from: visible.from,
        to: visible.to</pre></div></div>
            
        </li>
        
        
        <li id="section-134">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-134">&#182;</a>
              </div>
              <p>range: visible_range</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      };</pre></div></div>
            
        </li>
        
        
        <li id="section-135">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-135">&#182;</a>
              </div>
              <p>console.log(&#39;refreshVisibleGrid: &#39; + data.visibleGridInfo.from.col + &#39; -&gt; &#39; + data.visibleGridInfo.to.col + &#39;, &#39; + data.visibleGridInfo.from.row + &#39; -&gt; &#39; + data.visibleGridInfo.to.row + &#39;)&#39;);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">return</span> data.visibleGridInfo;

    };

    <span class="function"><span class="keyword">function</span> <span class="title">moveTo</span><span class="params">(x, y)</span> {</span>

      x = Math.floor(x);
      y = Math.floor(y);

      <span class="keyword">if</span> (data.coords.lastX !== x || data.coords.lastY !== y) {

        data.coords.lastX = x;
        data.coords.lastY = y;

        data.coords.x = x;
        data.coords.y = y;</pre></div></div>
            
        </li>
        
        
        <li id="section-136">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-136">&#182;</a>
              </div>
              <p>scroll the world.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        window.scrollTo(x, y);

        refreshVisibleGrid();

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">centerAtPoint</span><span class="params">(x, y)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-137">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-137">&#182;</a>
              </div>
              <p>given x/y, set the mid-point of the screen there.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">var</span> targetX,
          targetY;

      <span class="keyword">if</span> (x &lt; data.coords.width/<span class="number">2</span>) {
        targetX = <span class="number">0</span>;
      } <span class="keyword">else</span> {
        targetX = parseInt(x - data.coords.width/<span class="number">2</span>, <span class="number">10</span>);
      } 

      <span class="keyword">if</span> (y &lt; data.coords.height/<span class="number">2</span>) {
        targetY = <span class="number">0</span>;
      } <span class="keyword">else</span> {
        targetY = parseInt(y - data.coords.height/<span class="number">2</span>, <span class="number">10</span>);
      }

<span class="comment">/*
      window.scrollTo(targetX, targetY);

      data.coords.lastX = targetX;
      data.coords.lastY = targetY;

      data.coords.x = targetX;
      data.coords.y = targetY;
*/</span>
      moveTo(targetX, targetY);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">moveBy</span><span class="params">(xMultiplier, yMultiplier)</span> {</span>

      <span class="keyword">var</span> oldX, oldY, newX, newY;

      oldX = data.coords.x;
      oldY = data.coords.y;

      newX = oldX + (game.data.NODE_WIDTH * xMultiplier);
      newY = oldY + (game.data.NODE_HEIGHT * yMultiplier);

      newX = Math.min(game.data.world_width, Math.max(<span class="number">0</span>, newX));
      newY = Math.min(game.data.world_height, Math.max(<span class="number">0</span>, newY));

      <span class="keyword">if</span> (newX === data.coords.lastX &amp;&amp; data.newY === data.coords.lastY) {
        <span class="keyword">return</span> <span class="literal">false</span>;
      }

      moveTo(newX, newY);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">isInView</span><span class="params">(col, row)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-138">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-138">&#182;</a>
              </div>
              <p>is this location on-screen?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">var</span> info = data.visibleGridInfo;</pre></div></div>
            
        </li>
        
        
        <li id="section-139">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-139">&#182;</a>
              </div>
              <p>console.log(&#39;isInView(&#39; + col +&#39;, &#39; + row + &#39; / &#39; + info.from.col + &#39; -&gt; &#39; + info.to.col + &#39;, &#39; + info.from.row + &#39; -&gt; &#39; + info.to.row + &#39;)&#39;);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">return</span> (col &gt;= info.from.col &amp;&amp; row &gt;= info.from.row &amp;&amp; col &lt;= info.to.col &amp;&amp; row &lt;= info.to.row);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">attachEvents</span><span class="params">()</span> {</span>

      utils.events.add(window, <span class="string">'resize'</span>, events.resize);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">()</span> {</span>

      attachEvents();

      events.resize();

    }

    <span class="keyword">return</span> {

      centerAtPoint: centerAtPoint,
      data: data,
      init: init,
      isInView: isInView,
      moveBy: moveBy,
      moveTo: moveTo,
      refreshVisibleGrid: refreshVisibleGrid

    };

  }

  <span class="function"><span class="keyword">function</span> <span class="title">stopEvent</span><span class="params">(e)</span> {</span>

    <span class="keyword">var</span> evt = e || window.event;

    <span class="keyword">if</span> (evt.preventDefault !== <span class="literal">undefined</span>) {

      evt.preventDefault();

    } <span class="keyword">else</span> {

      evt.cancelBubble = <span class="literal">true</span>;

    }

    <span class="keyword">return</span> <span class="literal">false</span>;

  }

  <span class="function"><span class="keyword">function</span> <span class="title">KeyboardMonitor</span><span class="params">()</span> {</span>

    <span class="keyword">var</span> keys,
        events,</pre></div></div>
            
        </li>
        
        
        <li id="section-140">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-140">&#182;</a>
              </div>
              <p>hash for keys being pressed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>       downKeys = {},</pre></div></div>
            
        </li>
        
        
        <li id="section-141">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-141">&#182;</a>
              </div>
              <p>meaningful labels for key values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>       keyMap = {
         <span class="string">'shift'</span>: <span class="number">16</span>,
         <span class="string">'ctrl'</span>: <span class="number">17</span>,
         <span class="string">'space'</span>: <span class="number">32</span>,
         <span class="string">'left'</span>: <span class="number">37</span>,
         <span class="string">'up'</span>: <span class="number">38</span>,
         <span class="string">'right'</span>: <span class="number">39</span>,
         <span class="string">'down'</span>: <span class="number">40</span>
       };

    events = {

      keydown: <span class="keyword">function</span>(e) {

        <span class="keyword">if</span> (keys[e.keyCode] &amp;&amp; keys[e.keyCode].down) {
          <span class="keyword">if</span> (downKeys[e.keyCode] === <span class="literal">undefined</span>) {
            downKeys[e.keyCode] = <span class="literal">true</span>;
            keys[e.keyCode].down(e);
          }
          <span class="keyword">if</span> (keys[e.keyCode].allowEvent === <span class="literal">undefined</span>) {
            <span class="keyword">return</span> stopEvent(e);
          }
        }

      },

      keyup: <span class="keyword">function</span>(e) {

        <span class="keyword">if</span> (downKeys[e.keyCode] !== <span class="literal">undefined</span> &amp;&amp; keys[e.keyCode]) {
          <span class="keyword">delete</span> downKeys[e.keyCode];
          <span class="keyword">if</span> (keys[e.keyCode].up) {
            keys[e.keyCode].up(e);
          }
          <span class="keyword">if</span> (keys[e.keyCode].allowEvent === <span class="literal">undefined</span>) {
            <span class="keyword">return</span> stopEvent(e);
          }
        }

      }

    };

    keys = {</pre></div></div>
            
        </li>
        
        
        <li id="section-142">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-142">&#182;</a>
              </div>
              <p>NOTE: Each function gets an (e) event argument.</p>

            </div>
            
        </li>
        
        
        <li id="section-143">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-143">&#182;</a>
              </div>
              <p>shift</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="string">'16'</span>: {

        allowEvent: <span class="literal">true</span>, <span class="comment">// don't use stopEvent()</span>

        down: <span class="keyword">function</span>() {

          game.objects.ship.startFire();

        },

        up: <span class="keyword">function</span>() {

          game.objects.ship.endFire();

        }

      },</pre></div></div>
            
        </li>
        
        
        <li id="section-144">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-144">&#182;</a>
              </div>
              <p>ctrl (alternate for shift key)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="string">'17'</span>: {

        allowEvent: <span class="literal">true</span>, <span class="comment">// don't use stopEvent()</span>

        down: <span class="keyword">function</span>() {

          game.objects.ship.startFire();

        },

        up: <span class="keyword">function</span>() {

          game.objects.ship.endFire();

        }

      },</pre></div></div>
            
        </li>
        
        
        <li id="section-145">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-145">&#182;</a>
              </div>
              <p>left</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="string">'37'</span>: {

        down: <span class="keyword">function</span>() {

          game.objects.ship.thrust(-<span class="number">1</span>, <span class="number">0</span>);

        },


        up: <span class="keyword">function</span>() {

          game.objects.ship.endThrust();

        }

      },</pre></div></div>
            
        </li>
        
        
        <li id="section-146">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-146">&#182;</a>
              </div>
              <p>up</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="string">'38'</span>: {

        down: <span class="keyword">function</span>() {

          game.objects.ship.thrust(<span class="number">0</span>, -<span class="number">1</span>);

        },


        up: <span class="keyword">function</span>() {

          game.objects.ship.endThrust();

        }

      },</pre></div></div>
            
        </li>
        
        
        <li id="section-147">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-147">&#182;</a>
              </div>
              <p>right</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="string">'39'</span>: {

        down: <span class="keyword">function</span>() {

          game.objects.ship.thrust(<span class="number">1</span>, <span class="number">0</span>);

        },


        up: <span class="keyword">function</span>() {

          game.objects.ship.endThrust();

        }

      },</pre></div></div>
            
        </li>
        
        
        <li id="section-148">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-148">&#182;</a>
              </div>
              <p>down</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="string">'40'</span>: {

        down: <span class="keyword">function</span>() {

          game.objects.ship.thrust(<span class="number">0</span>, <span class="number">1</span>);

        },


        up: <span class="keyword">function</span>() {

          game.objects.ship.endThrust();

        }

      },</pre></div></div>
            
        </li>
        
        
        <li id="section-149">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-149">&#182;</a>
              </div>
              <p>space bar!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="string">'32'</span>: {

        down: <span class="keyword">function</span>() {

          game.objects.smartbombController.fire();

        }

      }

    };

    <span class="function"><span class="keyword">function</span> <span class="title">isDown</span><span class="params">(labelOrCode)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-150">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-150">&#182;</a>
              </div>
              <p>check for a pressed key based on &#39;37&#39; or &#39;left&#39;, etc.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">return</span> (keyMap[labelOrCode] !== <span class="literal">undefined</span> ? downKeys[keyMap[labelOrCode]] : downKeys[labelOrCode]);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">releaseAll</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-151">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-151">&#182;</a>
              </div>
              <p>reset all pressed key states.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">var</span> item;
      <span class="keyword">for</span> (item <span class="keyword">in</span> downKeys) {
        <span class="keyword">if</span> (downKeys.hasOwnProperty(item)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-152">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-152">&#182;</a>
              </div>
              <p>simulate the keyup event</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          events.keyup({
            keyCode: item
          });
        }
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">attachEvents</span><span class="params">()</span> {</span>

      utils.events.add(document, <span class="string">'keydown'</span>, events.keydown);
      utils.events.add(document, <span class="string">'keyup'</span>, events.keyup);

    }</pre></div></div>
            
        </li>
        
        
        <li id="section-153">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-153">&#182;</a>
              </div>
              <p>init?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">()</span> {</span>

      attachEvents();

    }

    <span class="keyword">return</span> {

      init: init,
      isDown: isDown,
      releaseAll: releaseAll

    };

  }

  <span class="keyword">var</span> bigExplosionTemplate = document.createElement(<span class="string">'div'</span>);
  bigExplosionTemplate.className = <span class="string">'big-explosion'</span>;

  <span class="function"><span class="keyword">function</span> <span class="title">BigExplosion</span><span class="params">(oOptions)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-154">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-154">&#182;</a>
              </div>
              <p>a large boom.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="keyword">var</span> o;

    <span class="keyword">var</span> counter = <span class="number">0</span>;

    <span class="keyword">var</span> data = {

      active: <span class="literal">true</span>,
      animationModulus: oOptions.animationModulus,
      frame: <span class="number">0</span>,
      frameCount: <span class="number">5</span>,
      node: oOptions.node,
      x: oOptions.x,
      y: oOptions.y,
      w: <span class="number">96</span>,
      h: <span class="number">80</span>,
      vX: game.data.NODE_WIDTH/<span class="number">2</span> * oOptions.vX,
      vY: game.data.NODE_HEIGHT/<span class="number">2</span> * oOptions.vY

    };

    <span class="function"><span class="keyword">function</span> <span class="title">moveTo</span><span class="params">(x,y)</span> {</span>

      <span class="keyword">if</span> (o) {

        o.style.left = Math.floor(x) + <span class="string">'px'</span>;
        o.style.top = Math.floor(y) + <span class="string">'px'</span>;

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">moveBy</span><span class="params">(x,y)</span> {</span>

      data.x += x;
      data.y += y;

      moveTo(data.x, data.y);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">applyFrame</span><span class="params">(frame)</span> {</span>

      <span class="keyword">if</span> (o) {
        o.style.backgroundPosition = <span class="string">'0px '</span> + (frame * -data.h) + <span class="string">'px'</span>;
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">animate</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (data.active) {

        counter++;

        <span class="keyword">if</span> (data.vX !== <span class="number">0</span> || data.vY !== <span class="number">0</span>) {

          moveBy(data.vX, data.vY);</pre></div></div>
            
        </li>
        
        
        <li id="section-155">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-155">&#182;</a>
              </div>
              <p>flick(e)r</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          o.style.visibility = (Math.random() &gt; <span class="number">0.25</span> ? <span class="string">'visible'</span> : <span class="string">'hidden'</span>);

        }

        <span class="keyword">if</span> (counter % data.animationModulus === <span class="number">0</span>) {

          <span class="keyword">if</span> (data.frame &gt;= data.frameCount) {
            data.frame = <span class="number">0</span>;
            data.active = <span class="literal">false</span>;
          }</pre></div></div>
            
        </li>
        
        
        <li id="section-156">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-156">&#182;</a>
              </div>
              <p>apply background position</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          applyFrame(data.frame);

          data.frame++;

        }

      }

      <span class="keyword">return</span> data.active ? <span class="number">0</span> : <span class="number">1</span>;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">destruct</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (o) {
        o.parentNode.removeChild(o);
        o = <span class="literal">null</span>;
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">()</span> {</span>

      o = bigExplosionTemplate.cloneNode(<span class="literal">true</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-157">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-157">&#182;</a>
              </div>
              <p>set initial position</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      moveTo(data.x, data.y);

      data.node.appendChild(o);

    }

    init();

    <span class="keyword">return</span> {
      data: data,
      animate: animate,
      destruct: destruct,
      moveBy: moveBy,
      moveTo: moveTo
    };

  }

  <span class="function"><span class="keyword">function</span> <span class="title">LevelEndSequence</span><span class="params">(oOptions)</span> {</span>

    <span class="keyword">var</span> objects = {
        explosions: []
      },

      data = {
        active: <span class="literal">false</span>,
        waiting: <span class="literal">false</span>,
        node: oOptions.node,
        explosionCount: <span class="number">16</span>,
        maxRuntime: <span class="number">5000</span>,
        screenOffset: <span class="number">96</span>
      },

      runTime;

    <span class="function"><span class="keyword">function</span> <span class="title">makeNoise</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (features.audio) {

        <span class="keyword">if</span> (Math.random() &gt; <span class="number">0.85</span>) {
          soundSprites.playBoom(parseInt(Math.random()*<span class="number">10</span>, <span class="number">10</span>));</pre></div></div>
            
        </li>
        
        
        <li id="section-158">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-158">&#182;</a>
              </div>
              <p>TODO: pan</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        }

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">getRandomPosition</span><span class="params">()</span> {</span>

      <span class="keyword">return</span> {
        x: data.screenOffset + parseInt(Math.random() * (game.objects.screen.data.coords.width - data.screenOffset), <span class="number">10</span>),
        y: data.screenOffset + parseInt(Math.random() * (game.objects.screen.data.coords.width - data.screenOffset), <span class="number">10</span>)
      };

    }

    <span class="function"><span class="keyword">function</span> <span class="title">createExplosion</span><span class="params">()</span> {</span>

      <span class="keyword">var</span> position = getRandomPosition();

      objects.explosions.push(<span class="keyword">new</span> BigExplosion({
        node: data.node,
        animationModulus: <span class="number">3</span>,
        x: position.x,
        y: position.y,
        vX: <span class="number">0</span>,
        vY: <span class="number">0</span>
      }));

    }

    <span class="function"><span class="keyword">function</span> <span class="title">boom</span><span class="params">()</span> {</span>

      <span class="keyword">var</span> i,
          maxObjects = <span class="number">16</span>;

      <span class="keyword">if</span> (!data.active) {

        data.active = <span class="literal">true</span>;

        runTime = <span class="keyword">new</span> Date();</pre></div></div>
            
        </li>
        
        
        <li id="section-159">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-159">&#182;</a>
              </div>
              <p>create several explosions over time</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        createExplosion();

        <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;maxObjects; i++) {
          window.setTimeout(createExplosion, (i+<span class="number">1</span>)*<span class="number">50</span>);
          window.setTimeout(createExplosion, (i+<span class="number">1</span>)*<span class="number">50</span>);
        }

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">show</span><span class="params">()</span> {</span>

      data.node.style.display = <span class="string">'block'</span>;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">hide</span><span class="params">()</span> {</span>

      data.node.style.display = <span class="string">'none'</span>;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">destruct</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-160">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-160">&#182;</a>
              </div>
              <p>clean-up?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">var</span> i, j;

      <span class="keyword">for</span> (i=<span class="number">0</span>, j=objects.explosions.length; i&lt;j; i++) {
        objects.explosions[i].destruct();
      }

      objects.explosions = [];

    }

    <span class="function"><span class="keyword">function</span> <span class="title">end</span><span class="params">()</span> {</span>

      <span class="keyword">var</span> oEnd,
          oBody,
          oStats,
          statsData;</pre></div></div>
            
        </li>
        
        
        <li id="section-161">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-161">&#182;</a>
              </div>
              <p>complete.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (data.waiting) {
        <span class="keyword">return</span> <span class="literal">false</span>;
      }

      data.waiting = <span class="literal">true</span>;

      destruct();

      oEnd = document.getElementById(<span class="string">'level-passed-screen'</span>);
      oBody = oEnd.getElementsByTagName(<span class="string">'div'</span>)[<span class="number">0</span>];
      oStats = document.getElementById(<span class="string">'level-passed-stats'</span>);
      statsData = game.objects.statsController.getStats();

      oStats.innerHTML = [
        <span class="string">'&lt;br&gt;'</span>,
        <span class="string">'&lt;p&gt;Your score: '</span> + game.objects.gameController.getScore() + <span class="string">' points&lt;/p&gt;'</span>,
        <span class="string">'&lt;br&gt;'</span>,
        <span class="string">'&lt;div class="fixed"&gt;&lt;div class="icon type-2 block"&gt;&lt;/div&gt; Blocks: '</span> + statsData.block + <span class="string">'&lt;/div&gt;'</span>,
        <span class="string">'&lt;div class="fixed"&gt;&lt;div class="icon type-1 turret right"&gt;&lt;/div&gt; Turrets: '</span> + statsData.turret + <span class="string">'&lt;/div&gt;'</span>,
        <span class="string">'&lt;div class="fixed bad-guy smiley"&gt;&lt;div class="icon"&gt;&lt;/div&gt; Bad guys: '</span> + statsData.badGuy + <span class="string">'&lt;/div&gt;'</span>
      ].join(<span class="string">''</span>);

      oEnd.style.display = <span class="string">'block'</span>;

      oBody.style.marginTop = -parseInt(oBody.offsetHeight/<span class="number">2</span>, <span class="number">10</span>) + <span class="string">'px'</span>;

      game.objects.gameLoop.pause();

      document.onclick = <span class="keyword">function</span>() {

        document.onclick = <span class="literal">null</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-162">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-162">&#182;</a>
              </div>
              <p>increase game speed multiplier? this will probably break all kinds of stuff.
TODO: Look at this.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        game.objects.gameLoop.data.GAME_SPEED += <span class="number">0.25</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-163">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-163">&#182;</a>
              </div>
              <p>reset score, stats and so forth</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        oEnd.style.display = <span class="string">'none'</span>;

        data.waiting = <span class="literal">false</span>;
        data.active = <span class="literal">false</span>;
        hide();</pre></div></div>
            
        </li>
        
        
        <li id="section-164">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-164">&#182;</a>
              </div>
              <p>reset the whole (entire) game</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        survivor.reset();

        game.objects.gameLoop.resume();

      };

    }

    <span class="function"><span class="keyword">function</span> <span class="title">animate</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (data.waiting || !data.active) {
        <span class="keyword">return</span> <span class="literal">false</span>;
      }

      <span class="keyword">var</span> i, j,
          isComplete,
          position;

      <span class="keyword">for</span> (i=<span class="number">0</span>, j=objects.explosions.length; i&lt;j; i++) {

        isComplete = objects.explosions[i] &amp;&amp; objects.explosions[i].animate();

        <span class="keyword">if</span> (isComplete) {</pre></div></div>
            
        </li>
        
        
        <li id="section-165">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-165">&#182;</a>
              </div>
              <p>randomly delay via frame offset, reposition and recycle</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          objects.explosions[i].data.frame = -parseInt(Math.random() * <span class="number">5</span>, <span class="number">10</span>);
          position = getRandomPosition();
          objects.explosions[i].moveTo(position.x, position.y);
          objects.explosions[i].data.active = <span class="literal">true</span>;
          makeNoise();
        }

      }

      <span class="keyword">if</span> (<span class="keyword">new</span> Date() - runTime &gt; data.maxRuntime) {
        end();
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">start</span><span class="params">()</span> {</span>

      show();</pre></div></div>
            
        </li>
        
        
        <li id="section-166">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-166">&#182;</a>
              </div>
              <p>&quot;Jamie wants big boom.&quot; (-- Adam Savage, Mythbusters.)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      boom();

    }

    <span class="keyword">return</span> {
      animate: animate,
      data: data,
      start: start
    };

  }

  <span class="function"><span class="keyword">function</span> <span class="title">isFreeSpace</span><span class="params">(col, row)</span> {</span>

    <span class="comment">/**
     * determine if anything is occupying a map (grid) location.
     * TODO: also consider "in turret gunfire path."
     */</span>

    <span class="keyword">var</span> result;</pre></div></div>
            
        </li>
        
        
        <li id="section-167">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-167">&#182;</a>
              </div>
              <p>first, round down.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    col = Math.floor(col);
    row = Math.floor(row);</pre></div></div>
            
        </li>
        
        
        <li id="section-168">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-168">&#182;</a>
              </div>
              <p>and check...</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    result = (</pre></div></div>
            
        </li>
        
        
        <li id="section-169">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-169">&#182;</a>
              </div>
              <p>is not a hittable, static map object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      (!game.data.map[row][col] || (game.data.map[row][col] &amp;&amp; !game.data.map[row][col].hittable()))</pre></div></div>
            
        </li>
        
        
        <li id="section-170">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-170">&#182;</a>
              </div>
              <p>and is not a space inside a base</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      &amp;&amp; mapData[row].charAt(col) !== MAP_INSIDE_BASE_CHAR</pre></div></div>
            
        </li>
        
        
        <li id="section-171">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-171">&#182;</a>
              </div>
              <p>and is not a turret gunfire object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      &amp;&amp; !game.objects.turretGunfireMap.check(col, row)</pre></div></div>
            
        </li>
        
        
        <li id="section-172">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-172">&#182;</a>
              </div>
              <p>and is not a bad guy</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      &amp;&amp; !game.objects.badGuyMap.check(col, row)</pre></div></div>
            
        </li>
        
        
        <li id="section-173">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-173">&#182;</a>
              </div>
              <p>and is not a spaceball</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      &amp;&amp; !game.objects.spaceBallMap.check(col, row)

    );

    <span class="keyword">return</span> result;

  }

  <span class="function"><span class="keyword">function</span> <span class="title">findFreeSpace</span><span class="params">(col, row)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-174">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-174">&#182;</a>
              </div>
              <p>given a point, find nearest unoccupied neighbouring space.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="keyword">var</span> i, j,
        targetCol,
        targetRow,
        direction,
        directions;

    directions = [
      [-<span class="number">1</span>, -<span class="number">1</span>],
      [<span class="number">0</span>, -<span class="number">1</span>],
      [<span class="number">1</span>, -<span class="number">1</span>],
      [<span class="number">1</span>, <span class="number">0</span>],
      [<span class="number">1</span>, <span class="number">1</span>],
      [<span class="number">0</span>, <span class="number">1</span>],
      [-<span class="number">1</span>, <span class="number">1</span>],
      [-<span class="number">1</span>, <span class="number">0</span>]
    ];

    col = Math.floor(col);
    row = Math.floor(row);</pre></div></div>
            
        </li>
        
        
        <li id="section-175">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-175">&#182;</a>
              </div>
              <p>restrict to valid range, also</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    col = Math.max(<span class="number">0</span>, Math.min(col, game.data.world_cols));
    row = Math.max(<span class="number">0</span>, Math.min(row, game.data.world_rows));</pre></div></div>
            
        </li>
        
        
        <li id="section-176">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-176">&#182;</a>
              </div>
              <p>is the current space OK?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (isFreeSpace(col, row)) {

      <span class="keyword">return</span> [col, row];

    }

    <span class="keyword">for</span> (i=<span class="number">0</span>, j=directions.length; i&lt;j; i++) {

      targetCol = col + directions[i][<span class="number">0</span>];
      targetRow = row + directions[i][<span class="number">1</span>];</pre></div></div>
            
        </li>
        
        
        <li id="section-177">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-177">&#182;</a>
              </div>
              <p>stay within valid grid ranges, of course.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (targetCol &gt;= <span class="number">0</span> &amp;&amp; targetRow &gt;= <span class="number">0</span> &amp;&amp; targetCol &lt;= game.data.world_cols &amp;&amp; targetRow &lt;= game.data.world_rows) {

        <span class="keyword">if</span> (isFreeSpace(targetCol, targetRow)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-178">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-178">&#182;</a>
              </div>
              <p>use this one.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">return</span> [targetCol, targetRow];

        }

      }

    }</pre></div></div>
            
        </li>
        
        
        <li id="section-179">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-179">&#182;</a>
              </div>
              <p>edge case: all spaces occupied? try recursing with a random direction.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>   direction = directions[parseInt(Math.random()*directions.length, <span class="number">10</span>)];

   console.log(<span class="string">'recursing with '</span>, col + direction[<span class="number">0</span>], row + direction[<span class="number">1</span>]);

   <span class="keyword">return</span> findFreeSpace(col + direction[<span class="number">0</span>], row + direction[<span class="number">1</span>]);

  }</pre></div></div>
            
        </li>
        
        
        <li id="section-180">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-180">&#182;</a>
              </div>
              <p>hash of sprites</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="keyword">var</span> spriteData = {};

  <span class="function"><span class="keyword">function</span> <span class="title">SpriteData</span><span class="params">(oData)</span> {</span>

    <span class="comment">/**
     * the simplest, dumbest, least-efficient way of describing pixel data
     * for hit/collision detection purposes. at least it's fun to look at. :D
     */</span>

    <span class="keyword">var</span> data = {

      id: oData.id,
      pixelMap: oData.pixelMap,
      width: oData.width,
      height: oData.height

    };

    <span class="function"><span class="keyword">function</span> <span class="title">check</span><span class="params">(row, col)</span> {</span>

      <span class="keyword">return</span> (data.pixelMap[row] !== <span class="literal">undefined</span> &amp;&amp; data.pixelMap[row] &amp;&amp; data.pixelMap[row][col] !== <span class="literal">undefined</span> &amp;&amp; data.pixelMap[row][col]);

    }</pre></div></div>
            
        </li>
        
        
        <li id="section-181">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-181">&#182;</a>
              </div>
              <p>console.log(data);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="keyword">return</span> {
      check: check,
      data: data
    };

  }

  <span class="function"><span class="keyword">function</span> <span class="title">createSprites</span><span class="params">()</span> {</span>

    <span class="comment">/**
     * defines the sprite objects for pixel-level collision detection purposes.
     * it was either this, or using canvas to load + parse images.
     * this method is less-flexible, but should be faster (and more fun.)
     */</span>

    <span class="keyword">var</span> i, j,
        data;

      data = [{

        id: <span class="string">'ship'</span>,
        width: <span class="number">32</span>,
        height: <span class="number">32</span>,
        pixelMap: [
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]
        ]

      }, {

        id: <span class="string">'block-type-generic'</span>,
        width: <span class="number">32</span>,
        height: <span class="number">32</span>,
        pixelMap: [
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]
        ]

      }, {

        id: <span class="string">'wall-type-1-upRight'</span>,
        width: <span class="number">32</span>,
        height: <span class="number">32</span>,
        pixelMap: [

          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]

        ]

      }, {

        id: <span class="string">'wall-type-1-rightDown'</span>,
        width: <span class="number">32</span>,
        height: <span class="number">32</span>,
        pixelMap: [

          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]

        ]

      }, {

        id: <span class="string">'wall-type-1-downLeft'</span>,
        width: <span class="number">32</span>,
        height: <span class="number">32</span>,
        pixelMap: [

          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>

        ]

      }, {

        id: <span class="string">'wall-type-1-downRight'</span>,
        width: <span class="number">32</span>,
        height: <span class="number">32</span>,
        pixelMap: [

          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>

        ]

      }, {

        id: <span class="string">'wall-type-1-horizontal'</span>,
        width: <span class="number">32</span>,
        height: <span class="number">32</span>,
        pixelMap: [

          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],
          [<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],
          [<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],
          [<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>

        ]

      }, {

        id: <span class="string">'wall-type-1-vertical'</span>,
        width: <span class="number">32</span>,
        height: <span class="number">32</span>,
        pixelMap: [

          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]

        ]

      }, {

        id: <span class="string">'wall-type-generic-upRight'</span>,
        width: <span class="number">32</span>,
        height: <span class="number">32</span>,
        pixelMap: [

          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]

        ]

      }, {

        id: <span class="string">'wall-type-generic-rightDown'</span>,
        width: <span class="number">32</span>,
        height: <span class="number">32</span>,
        pixelMap: [

          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          [<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]

        ]

      }, {

        id: <span class="string">'wall-type-generic-downLeft'</span>,
        width: <span class="number">32</span>,
        height: <span class="number">32</span>,
        pixelMap: [

          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>

        ]

      }, {

        id: <span class="string">'wall-type-generic-downRight'</span>,
        width: <span class="number">32</span>,
        height: <span class="number">32</span>,
        pixelMap: [

          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]


        ]

      }, {

        id: <span class="string">'wall-type-generic-horizontal'</span>,
        width: <span class="number">32</span>,
        height: <span class="number">32</span>,
        pixelMap: [

          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          [<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],
          [<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],
          [<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],
          [<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>

        ]

      }, {

        id: <span class="string">'wall-type-generic-vertical'</span>,
        width: <span class="number">32</span>,
        height: <span class="number">32</span>,
        pixelMap: [

          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]

        ]

      }, {

        id: <span class="string">'turret-gunfire-horizontal'</span>,
        width: <span class="number">32</span>,
        height: <span class="number">32</span>,
        pixelMap: [

          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>

        ]

      }, {

        id: <span class="string">'turret-gunfire-vertical'</span>,
        width: <span class="number">32</span>,
        height: <span class="number">32</span>,
        pixelMap: [

          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>,
          <span class="literal">null</span>

        ]

      }, {

        id: <span class="string">'ship-gunfire'</span>,
        width: <span class="number">7</span>,
        height: <span class="number">7</span>,
        pixelMap: [

          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>],
          [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]

        ]

      }
      
    ];

    <span class="keyword">for</span> (i=<span class="number">0</span>, j=data.length; i&lt;j; i++) {
      spriteData[data[i].id] = <span class="keyword">new</span> SpriteData(data[i]);
    }

  }

  createSprites();


  <span class="function"><span class="keyword">function</span> <span class="title">Collision</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-182">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-182">&#182;</a>
              </div>
              <p>intersect/overlap detection</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="comment">/*
    var objects = {
      spriteData: spriteData
    };
*/</span>

    <span class="function"><span class="keyword">function</span> <span class="title">xyToRowCol</span><span class="params">(x, y)</span> {</span>

      <span class="keyword">var</span> result;

      result = {

        col: Math.max(<span class="number">0</span>, Math.min(game.data.world_cols, Math.floor(x/game.data.NODE_WIDTH))),
        row: Math.max(<span class="number">0</span>, Math.min(game.data.world_rows, Math.floor(y/game.data.NODE_HEIGHT)))

      };

      <span class="keyword">return</span> result;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">getIntersect</span><span class="params">(x,y)</span> {</span>

      <span class="keyword">var</span> location;

      <span class="keyword">if</span> (x === <span class="literal">undefined</span> || y === <span class="literal">undefined</span>) {
        console.log(<span class="string">'getIntersect(): WARN: x/y undefined'</span>);
        <span class="keyword">return</span> {
          location: <span class="literal">null</span>,
          mapItem: <span class="literal">null</span>
        };
      }

      location = xyToRowCol(x, y);

      <span class="keyword">return</span> {
        row: location.row,
        col: location.col
      };

    }

    <span class="function"><span class="keyword">function</span> <span class="title">check</span><span class="params">(point1, point2)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-183">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-183">&#182;</a>
              </div>
              <p>given two boxes, check for intersects.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">var</span> result;

      <span class="keyword">if</span> (point2.x &gt;= point1.x) {</pre></div></div>
            
        </li>
        
        
        <li id="section-184">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-184">&#182;</a>
              </div>
              <p>point 2 is to the right.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        <span class="keyword">if</span> (point1.x + point1.w &gt;= point2.x) {</pre></div></div>
            
        </li>
        
        
        <li id="section-185">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-185">&#182;</a>
              </div>
              <p>point 1 overlaps point 2 on x.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">if</span> (point1.y &lt; point2.y) {</pre></div></div>
            
        </li>
        
        
        <li id="section-186">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-186">&#182;</a>
              </div>
              <p>point 1 is above point 2.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="keyword">if</span> (point1.y + point1.h &gt;= point2.y) {</pre></div></div>
            
        </li>
        
        
        <li id="section-187">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-187">&#182;</a>
              </div>
              <p>point 1 overlaps point 2 on y.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>              result = <span class="literal">true</span>;
            }
          } <span class="keyword">else</span> {
            result = (point1.y &lt; point2.y + point2.h);
          }
        }

      } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-188">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-188">&#182;</a>
              </div>
              <p>point 1 is to the right.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        <span class="keyword">if</span> (point2.x + point2.w &gt;= point1.x) {</pre></div></div>
            
        </li>
        
        
        <li id="section-189">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-189">&#182;</a>
              </div>
              <p>point 2 overlaps point 1 on x.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">if</span> (point2.y &lt; point1.y) {</pre></div></div>
            
        </li>
        
        
        <li id="section-190">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-190">&#182;</a>
              </div>
              <p>point 2 is above point 1.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            result = (point2.y + point2.h &gt;= point1.y);
          } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-191">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-191">&#182;</a>
              </div>
              <p>point 2 is below point 1.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            result = (point1.y + point1.h &gt;= point2.y);
          }
        } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-192">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-192">&#182;</a>
              </div>
              <p>no overlap?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          result = <span class="literal">false</span>;
        }

      }

      <span class="keyword">return</span> result;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">checkSprites</span><span class="params">(oOptions)</span> {</span>

      <span class="comment">/*
        object1: {
          type: 'base-generic-wall-down-right',
          x: data.x,
          y: data.y,
          w: data.w,
          h: data.h
        },
        object2: oOptions.object // {spriteType, x, y, w, h}
      */</span>

      <span class="keyword">var</span> sprite1 = oOptions.object1,
          sprite2 = oOptions.object2,
          sprite1Data,
          sprite2Data,
          overlap;

      overlap = {

        sprite1: {

          xOffset: <span class="literal">null</span>,
          yOffset: <span class="literal">null</span>,

          from: {
            x: <span class="literal">null</span>,
            y: <span class="literal">null</span>
          },

          to: {
            x: <span class="literal">null</span>,
            y: <span class="literal">null</span>
          }

        },

        sprite2: {

          xOffset: <span class="literal">null</span>,
          yOffset: <span class="literal">null</span>,

          from: {
            x: <span class="literal">null</span>,
            y: <span class="literal">null</span>
          },

          to: {
            x: <span class="literal">null</span>,
            y: <span class="literal">null</span>
          }

        }

      };</pre></div></div>
            
        </li>
        
        
        <li id="section-193">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-193">&#182;</a>
              </div>
              <p>firstly, determine overlapping area.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">var</span> deltaX, deltaY, deltaW, deltaH;</pre></div></div>
            
        </li>
        
        
        <li id="section-194">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-194">&#182;</a>
              </div>
              <p>to be safe, round up.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      sprite1.x = parseInt(sprite1.x, <span class="number">10</span>);
      sprite1.y = parseInt(sprite1.y, <span class="number">10</span>);

      sprite2.x = parseInt(sprite2.x, <span class="number">10</span>);
      sprite2.y = parseInt(sprite2.y, <span class="number">10</span>);

      deltaX = Math.abs(sprite1.x - sprite2.x);
      deltaY = Math.abs(sprite1.y - sprite2.y);
      deltaW = Math.abs(sprite1.w - sprite2.w);
      deltaH = Math.abs(sprite1.h - sprite2.h);

      <span class="keyword">if</span> (sprite2.x &gt;= sprite1.x) {</pre></div></div>
            
        </li>
        
        
        <li id="section-195">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-195">&#182;</a>
              </div>
              <p>sprite 2 is to the right.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        <span class="keyword">if</span> (sprite1.x + sprite1.w &gt;= sprite2.x) {

          overlap.sprite1.xOffset = <span class="number">0</span>;
          overlap.sprite2.xOffset = deltaX;</pre></div></div>
            
        </li>
        
        
        <li id="section-196">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-196">&#182;</a>
              </div>
              <p>partial coverage of sprite 1.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
          <span class="keyword">if</span> (sprite1.y &lt; sprite2.y) {

            overlap.sprite1.yOffset = <span class="number">0</span>;
            overlap.sprite2.yOffset = deltaY;</pre></div></div>
            
        </li>
        
        
        <li id="section-197">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-197">&#182;</a>
              </div>
              <p>TODO: remove this check since it should always be true?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="keyword">if</span> (sprite1.y + sprite1.h &gt;= sprite2.y) {

              overlap.sprite1.yOffset = -deltaY;
              overlap.sprite2.yOffset = <span class="number">0</span>;

            } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-198">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-198">&#182;</a>
              </div>
              <p>edge case?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>              overlap.sprite1.yOffset = <span class="number">0</span>;
              overlap.sprite2.yOffset = -deltaY;

            }

          } <span class="keyword">else</span> {

            overlap.sprite1.yOffset = deltaY;
            overlap.sprite2.yOffset = <span class="number">0</span>;

          }

        }

      } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-199">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-199">&#182;</a>
              </div>
              <p>sprite 1 is to the right.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        <span class="keyword">if</span> (sprite2.x + sprite2.w &gt;= sprite1.x) {

          overlap.sprite2.xOffset = <span class="number">0</span>;
          overlap.sprite1.xOffset = deltaX;</pre></div></div>
            
        </li>
        
        
        <li id="section-200">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-200">&#182;</a>
              </div>
              <p>partial coverage of sprite 2.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
          <span class="keyword">if</span> (sprite2.y &lt; sprite1.y) {

            overlap.sprite2.yOffset = <span class="number">0</span>;
            overlap.sprite1.yOffset = deltaY;</pre></div></div>
            
        </li>
        
        
        <li id="section-201">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-201">&#182;</a>
              </div>
              <p>TODO: remove this check since it should always be true?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="keyword">if</span> (sprite2.y + sprite2.h &gt;= sprite1.y) {

              overlap.sprite2.yOffset = -deltaY;
              overlap.sprite1.yOffset = <span class="number">0</span>;

            } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-202">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-202">&#182;</a>
              </div>
              <p>edge case?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>              overlap.sprite2.yOffset = <span class="number">0</span>;
              overlap.sprite1.yOffset = -deltaY;

            }

          } <span class="keyword">else</span> {

            overlap.sprite2.yOffset = deltaY;
            overlap.sprite1.yOffset = <span class="number">0</span>;

          }

        }


      }

      <span class="keyword">if</span> (overlap.sprite1.xOffset === <span class="literal">null</span> || overlap.sprite2.xOffset === <span class="literal">null</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-203">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-203">&#182;</a>
              </div>
              <p>exception: null overlap case?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (PERFORMANCE_MODE || DEBUG_MODE) {
          console.log(<span class="string">'pixelCollisionCheck: null overlap/xOffset case'</span>);
        }
        <span class="keyword">return</span> <span class="literal">false</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-204">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-204">&#182;</a>
              </div>
              <p>now we know how the distances between boxes.</p>

            </div>
            
        </li>
        
        
        <li id="section-205">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-205">&#182;</a>
              </div>
              <p>console.log(&#39;checking&#39;, sprite1.type, sprite2.type);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      sprite1Data = spriteData[sprite1.type];
      sprite2Data = spriteData[sprite2.type];

      <span class="keyword">if</span> (!sprite1Data) {
        console.log(<span class="string">'WARN: No data for sprite type '</span> + sprite1.type);
      }

      <span class="keyword">if</span> (!sprite2Data) {
        console.log(<span class="string">'WARN: No data for sprite type '</span> + sprite2.type);
      }

      <span class="keyword">var</span> max_width = Math.max(sprite1Data.data.width, sprite2Data.data.width);
      <span class="keyword">var</span> max_height = Math.max(sprite1Data.data.height, sprite2Data.data.height);

      <span class="keyword">var</span> i, j, k, l;

      <span class="keyword">var</span> pixel_overlap = <span class="literal">false</span>;

      <span class="keyword">var</span> pixel_test;</pre></div></div>
            
        </li>
        
        
        <li id="section-206">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-206">&#182;</a>
              </div>
              <p>compare the sprites.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">var</span> s1X, s1Y, s2X, s2Y;

      <span class="keyword">for</span> (i=<span class="number">0</span>, j=max_height; i&lt;j &amp;&amp; !pixel_overlap; i++) {
        <span class="keyword">for</span> (k=<span class="number">0</span>, l=max_width; k&lt;l &amp;&amp; !pixel_overlap; k++) {
          s1X = k - overlap.sprite1.xOffset;
          s1Y = i - overlap.sprite1.yOffset;
          s2X = k - overlap.sprite2.xOffset;
          s2Y = i - overlap.sprite2.yOffset;
          <span class="keyword">if</span> (s1X &gt;= <span class="number">0</span> &amp;&amp; s1X &lt; sprite1Data.data.width &amp;&amp; s1Y &gt;= <span class="number">0</span> &amp;&amp; s1Y &lt; sprite1Data.data.height &amp;&amp; s2X &gt;= <span class="number">0</span> &amp;&amp; s2X &lt; sprite2Data.data.width &amp;&amp; s2Y &gt;= <span class="number">0</span> &amp;&amp; s2Y &lt; sprite2Data.data.height) {</pre></div></div>
            
        </li>
        
        
        <li id="section-207">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-207">&#182;</a>
              </div>
              <pre><code>       console.log(&#39;[ loop row/col &#39; + i + &#39;, &#39; + k +&#39;]: comparing &#39; + s1X + &#39;, &#39; + s1Y + &#39; to &#39; + s2X + &#39;, &#39; + s2Y);</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>            pixel_test = (sprite1Data.check(s1Y, s1X) &amp;&amp; sprite2Data.check(s2Y, s2X));
            <span class="keyword">if</span> (pixel_test) {
              <span class="keyword">if</span> (PERFORMANCE_MODE || DEBUG_MODE) {
                console.log(<span class="string">'FOUND HIT at loop row/col '</span> + i + <span class="string">', '</span> + k +<span class="string">', comparing '</span> + s1X + <span class="string">', '</span> + s1Y + <span class="string">' to '</span> + s2X + <span class="string">', '</span> + s2Y);
                console.log(<span class="string">'sprite1, sprite2'</span>, sprite1, sprite2);
                console.log(<span class="string">'delta X, Y, W, H: '</span> + deltaX + <span class="string">', '</span> + deltaY + <span class="string">', '</span> + deltaW + <span class="string">', '</span> + deltaH);
                console.log(<span class="string">'overlap data'</span>, overlap.sprite1, overlap.sprite2);
                console.log(sprite1Data.data, sprite2Data.data);
              }
              pixel_overlap = <span class="literal">true</span>;
            }
          }
        }
      }

      <span class="keyword">return</span> pixel_overlap;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">checkGrid</span><span class="params">(point)</span> {</span> <span class="comment">// { x, y, w, h, includeNeighbours }</span></pre></div></div>
            
        </li>
        
        
        <li id="section-208">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-208">&#182;</a>
              </div>
              <p>given a box, check either the midpoint or the four corners for intersects.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">var</span> i,
          intersects = [];

      <span class="keyword">if</span> (point.includeNeighbours) {</pre></div></div>
            
        </li>
        
        
        <li id="section-209">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-209">&#182;</a>
              </div>
              <p>build the hash of unique intersecting objects</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        intersects.push(getIntersect(point.x, point.y));
        intersects.push(getIntersect(point.x + point.w, point.y));
        intersects.push(getIntersect(point.x, point.y + point.h));
        intersects.push(getIntersect(point.x + point.w, point.y + point.h));

        <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;intersects.length; i++) {</pre></div></div>
            
        </li>
        
        
        <li id="section-210">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-210">&#182;</a>
              </div>
              <p>mark neighbouring offsets</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          intersects[i].isNeighbour = <span class="literal">true</span>;
        }

      }</pre></div></div>
            
        </li>
        
        
        <li id="section-211">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-211">&#182;</a>
              </div>
              <p>default case: go with the midpoint of the thing.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      intersects.push(getIntersect(point.x + (point.w/<span class="number">2</span>), point.y + (point.h/<span class="number">2</span>)));

      <span class="keyword">return</span> intersects;

    }

    <span class="keyword">return</span> {

      check: check,
      checkGrid: checkGrid,
      checkSprites: checkSprites,
      xyToRowCol: xyToRowCol

    };

  }

  <span class="keyword">var</span> fireTemplate = document.createElement(<span class="string">'div'</span>);
  fireTemplate.innerHTML = <span class="string">'&amp;bull;'</span>;
  fireTemplate.className = <span class="string">'ship-gunfire'</span>;

  <span class="keyword">var</span> shipGunfireCounter = <span class="number">0</span>;

  <span class="function"><span class="keyword">function</span> <span class="title">ShipGunfire</span><span class="params">(oOptions)</span> {</span>

    <span class="comment">/**
     * "pew pew pew" from the ship.
     * fires bi-directionally based on ship heading (up/down, left/right or diagonals.)
     * can kill bad guys and turrets.
     */</span>

    <span class="keyword">var</span> objectInterface;

    <span class="keyword">var</span> o = fireTemplate.cloneNode(<span class="literal">true</span>);

    <span class="keyword">var</span> data = {
      active: <span class="literal">false</span>,
      dead: <span class="literal">false</span>,
      visible: <span class="literal">false</span>,
      id: <span class="string">'shipGunfire'</span> + (shipGunfireCounter++),
      x: oOptions.x,
      y: oOptions.y,
      w: oOptions.w,
      h: oOptions.h,
      vX: game.data.NODE_WIDTH/<span class="number">2</span> * oOptions.vX,
      vY: game.data.NODE_HEIGHT/<span class="number">2</span> * oOptions.vY,
      row: <span class="literal">null</span>,
      col: <span class="literal">null</span>,
      lastX: <span class="literal">null</span>,
      lastY: <span class="literal">null</span>,
      lastCollisionX: <span class="literal">null</span>,
      lastCollisionY: <span class="literal">null</span>,
      lastCollisionResult: <span class="literal">null</span>
    };

    <span class="keyword">var</span> nodeParent = game.dom.world;</pre></div></div>
            
        </li>
        
        
        <li id="section-212">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-212">&#182;</a>
              </div>
              <p>die when fire hits end of screen?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="function"><span class="keyword">function</span> <span class="title">hide</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (!data.visible) {
        <span class="keyword">return</span> <span class="literal">false</span>;
      }
      data.visible = <span class="literal">false</span>;
      nodeParent.removeChild(o);
      o.style.visibility = <span class="string">'hidden'</span>;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">moveTo</span><span class="params">(x,y)</span> {</span>

      <span class="keyword">var</span> location;

      x = Math.floor(x);
      y = Math.floor(y);

      <span class="keyword">if</span> (o) {

        location = game.objects.collision.xyToRowCol(x, y);

        <span class="keyword">if</span> (USE_TRANSFORM) {

          o.style[features.transform.prop] = <span class="string">'translate3d('</span> + Math.floor(x) + <span class="string">'px, '</span> + Math.floor(y) + <span class="string">'px, 0px)'</span>;

        } <span class="keyword">else</span> {

          <span class="keyword">if</span> (data.lastX !== x) {
            o.style.left = x + <span class="string">'px'</span>;
          }

          <span class="keyword">if</span> (data.lastY !== y) {
            o.style.top = y + <span class="string">'px'</span>;
          }

        }

        data.lastX = x;
        data.lastY = y;

        <span class="keyword">if</span> (location.col !== data.col || location.row !== data.row) {

          data.col = location.col;
          data.row = location.row;

          game.objects.shipGunfireMap.registerLocation({
            object: objectInterface,
            id: data.id,
            col: data.col,
            row: data.row
          });

        }

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">show</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (!data.visible) {
        data.visible = <span class="literal">true</span>;
        <span class="keyword">if</span> (o) {
          nodeParent.appendChild(o);
          o.style.display = <span class="string">'block'</span>;
        }
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">reset</span><span class="params">()</span> {</span>

      hide();

      data.active = <span class="literal">false</span>;

      moveTo(<span class="number">0</span>,<span class="number">0</span>);

    }


    <span class="function"><span class="keyword">function</span> <span class="title">destruct</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-213">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-213">&#182;</a>
              </div>
              <p>remove from the dom, etc.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (o) {
        hide();
        o = <span class="literal">null</span>;
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">die</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-214">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-214">&#182;</a>
              </div>
              <p>called when end of screen hit, or object hit</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      data.dead = <span class="literal">true</span>;
      reset();
      destruct();

    }

    <span class="function"><span class="keyword">function</span> <span class="title">moveBy</span><span class="params">(x,y)</span> {</span> <span class="comment">// TODO: labels for relative grid item values?</span>

      <span class="keyword">var</span> screen = game.objects.screen;</pre></div></div>
            
        </li>
        
        
        <li id="section-215">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-215">&#182;</a>
              </div>
              <p>move and do collision check?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      data.x += x;
      data.y += y;

      <span class="keyword">if</span> (data.x &lt; <span class="number">0</span> || data.x &lt; screen.data.coords.x || data.x &gt; screen.data.coords.x + screen.data.coords.width || data.x + data.w &gt; game.data.world_width) {</pre></div></div>
            
        </li>
        
        
        <li id="section-216">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-216">&#182;</a>
              </div>
              <p>X-axis boundary check</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        die();

      } <span class="keyword">else</span> <span class="keyword">if</span> (data.y &lt; <span class="number">0</span> || data.y &lt; screen.data.coords.y || data.y &gt; screen.data.coords.y + screen.data.coords.height || data.y + data.h &gt; game.data.world_height) {</pre></div></div>
            
        </li>
        
        
        <li id="section-217">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-217">&#182;</a>
              </div>
              <p>Y-axis boundary check</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        die();

      } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-218">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-218">&#182;</a>
              </div>
              <p>all good</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        moveTo(data.x, data.y);

        show();

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">fire</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (!data.active) {
        data.active = <span class="literal">true</span>;
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">hittable</span><span class="params">()</span> {</span>

      <span class="keyword">return</span> data.active;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">collisionCheck</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-219">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-219">&#182;</a>
              </div>
              <p>did ship fire hit anything?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">var</span> i, j;
      <span class="keyword">var</span> intersects, item;
      <span class="keyword">var</span> hit = <span class="literal">false</span>;
      <span class="keyword">var</span> incrementPitch = <span class="literal">false</span>;
      <span class="keyword">var</span> mapObjectItem;
      <span class="keyword">var</span> passThrough;

      <span class="keyword">if</span> (!data.dead &amp;&amp; (data.lastCollisionX !== data.x || data.lastCollisionY !== data.y)) {

        data.lastCollisionX = data.x;
        data.lastCollisionY = data.y;</pre></div></div>
            
        </li>
        
        
        <li id="section-220">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-220">&#182;</a>
              </div>
              <p>check grid</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        intersects = game.objects.collision.checkGrid({
          x: data.x,
          y: data.y,
          w: data.w,
          h: data.h</pre></div></div>
            
        </li>
        
        
        <li id="section-221">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-221">&#182;</a>
              </div>
              <p>TODO: includeNeighbours: true ?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        });

        <span class="keyword">for</span> (i=<span class="number">0</span>, j=intersects.length; i&lt;j; i++) {

          item = game.data.map[intersects[i].row][intersects[i].col];

          <span class="keyword">if</span> (item &amp;&amp; item.hittable &amp;&amp; item.hittable()) {</pre></div></div>
            
        </li>
        
        
        <li id="section-222">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-222">&#182;</a>
              </div>
              <p>additional pixel-level collision check</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="keyword">if</span> (item.pixelCollisionCheck) {</pre></div></div>
            
        </li>
        
        
        <li id="section-223">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-223">&#182;</a>
              </div>
              <p>HACK (sorta): check current position, and (potentially) last two in-between coordinates
given bullet may &quot;skip&quot; walls or turret gunfire etc. otherwise
i.e., cover (almost) the full range of movement</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
              hit = item.pixelCollisionCheck({
                type: <span class="string">'ship-gunfire'</span>,
                x: data.x,
                y: data.y,
                w: data.w,
                h: data.h
              });

              <span class="keyword">if</span> (!hit) {</pre></div></div>
            
        </li>
        
        
        <li id="section-224">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-224">&#182;</a>
              </div>
              <p>move backwards a bit more and try again.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                hit = item.pixelCollisionCheck({
                  type: <span class="string">'ship-gunfire'</span>,
                  x: data.x - (data.vX * <span class="number">0.5</span>),
                  y: data.y - (data.vY * <span class="number">0.5</span>),
                  w: data.w,
                  h: data.h
                });

              }

              <span class="keyword">if</span> (!hit) {</pre></div></div>
            
        </li>
        
        
        <li id="section-225">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-225">&#182;</a>
              </div>
              <p>move backwards a bit less and try again.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                hit = item.pixelCollisionCheck({
                  type: <span class="string">'ship-gunfire'</span>,
                  x: data.x - (data.vX * <span class="number">0.25</span>),
                  y: data.y - (data.vY * <span class="number">0.25</span>),
                  w: data.w,
                  h: data.h
                });

              }

              <span class="keyword">if</span> (!hit) {</pre></div></div>
            
        </li>
        
        
        <li id="section-226">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-226">&#182;</a>
              </div>
              <p>move forwards just a bit and try again.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                hit = item.pixelCollisionCheck({
                  type: <span class="string">'ship-gunfire'</span>,
                  x: data.x + (data.vX * <span class="number">0.25</span>),
                  y: data.y + (data.vY * <span class="number">0.25</span>),
                  w: data.w,
                  h: data.h
                });

              }


            } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-227">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-227">&#182;</a>
              </div>
              <p>console.log(&#39;no pixel-level check on item, assuming dead&#39;);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
              console.log(<span class="string">'no pixel check on item:'</span>, item);

              hit = <span class="literal">true</span>;

            }

            <span class="keyword">if</span> (hit) {</pre></div></div>
            
        </li>
        
        
        <li id="section-228">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-228">&#182;</a>
              </div>
              <p>did we kill the thing?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>              item.hit();

              <span class="keyword">if</span> (item.data.dead) {
                incrementPitch = <span class="literal">true</span>;
              }</pre></div></div>
            
        </li>
        
        
        <li id="section-229">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-229">&#182;</a>
              </div>
              <p>kill the gunfire, too?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>              die();</pre></div></div>
            
        </li>
        
        
        <li id="section-230">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-230">&#182;</a>
              </div>
              <p>stop on the first one?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>              <span class="keyword">break</span>;

            }

          } <span class="keyword">else</span> <span class="keyword">if</span> (item &amp;&amp; !item.hit) {</pre></div></div>
            
        </li>
        
        
        <li id="section-231">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-231">&#182;</a>
              </div>
              <p>probably a wall or something else.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
            console.log(<span class="string">'WARN: Wall or other un-handled grid item hit case.'</span>);
            die();
            <span class="keyword">break</span>;

          }

        }</pre></div></div>
            
        </li>
        
        
        <li id="section-232">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-232">&#182;</a>
              </div>
              <p>non-&quot;grid&quot; items: bad guys, turret gunfire, spaceballs</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        <span class="keyword">if</span> (!hit) {</pre></div></div>
            
        </li>
        
        
        <li id="section-233">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-233">&#182;</a>
              </div>
              <p>check bad guys</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          hit = game.objects.badGuyController.collisionCheck();

          <span class="keyword">if</span> (hit) {</pre></div></div>
            
        </li>
        
        
        <li id="section-234">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-234">&#182;</a>
              </div>
              <p>we hit something, so mark the pitch to increase, and die</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="keyword">if</span> (item &amp;&amp; item.data.dead) {</pre></div></div>
            
        </li>
        
        
        <li id="section-235">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-235">&#182;</a>
              </div>
              <p>did the thing just die?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>              incrementPitch = <span class="literal">true</span>;
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-236">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-236">&#182;</a>
              </div>
              <p>let gunfire pass through bad guys, per original game rules.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            passThrough = <span class="literal">true</span>;
          }

        }

        <span class="keyword">if</span> (!hit) {</pre></div></div>
            
        </li>
        
        
        <li id="section-237">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-237">&#182;</a>
              </div>
              <p>check turret gunfire</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          mapObjectItem = game.objects.turretGunfireMap.check(data.row, data.col);

          <span class="keyword">if</span> (mapObjectItem &amp;&amp; mapObjectItem.collisionCheck()) {</pre></div></div>
            
        </li>
        
        
        <li id="section-238">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-238">&#182;</a>
              </div>
              <p>turret gunfire trumps ship gunfire.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
            <span class="keyword">if</span> (mapObjectItem.pixelCollisionCheck) {

              hit = mapObjectItem.pixelCollisionCheck({
                type: <span class="string">'ship-gunfire'</span>,
                x: data.x,
                y: data.y,
                w: data.w,
                h: data.h
              });

              <span class="keyword">if</span> (!hit) {</pre></div></div>
            
        </li>
        
        
        <li id="section-239">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-239">&#182;</a>
              </div>
              <p>move backwards a bit more and try again.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                hit = mapObjectItem.pixelCollisionCheck({
                  type: <span class="string">'ship-gunfire'</span>,
                  x: data.x - (data.vX * <span class="number">0.75</span>),
                  y: data.y - (data.vY * <span class="number">0.75</span>),
                  w: data.w,
                  h: data.h
                });

              }

              <span class="keyword">if</span> (!hit) {</pre></div></div>
            
        </li>
        
        
        <li id="section-240">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-240">&#182;</a>
              </div>
              <p>move backwards a bit more and try again.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                hit = mapObjectItem.pixelCollisionCheck({
                  type: <span class="string">'ship-gunfire'</span>,
                  x: data.x - (data.vX * <span class="number">0.5</span>),
                  y: data.y - (data.vY * <span class="number">0.5</span>),
                  w: data.w,
                  h: data.h
                });

              }

              <span class="keyword">if</span> (!hit) {</pre></div></div>
            
        </li>
        
        
        <li id="section-241">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-241">&#182;</a>
              </div>
              <p>move backwards a bit less and try again.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                hit = mapObjectItem.pixelCollisionCheck({
                  type: <span class="string">'ship-gunfire'</span>,
                  x: data.x - (data.vX * <span class="number">0.25</span>),
                  y: data.y - (data.vY * <span class="number">0.25</span>),
                  w: data.w,
                  h: data.h
                });

              }

            } <span class="keyword">else</span> {

              hit = <span class="literal">true</span>;

            }

          }

        }</pre></div></div>
            
        </li>
        
        
        <li id="section-242">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-242">&#182;</a>
              </div>
              <p>check spaceballs</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        <span class="keyword">if</span> (!hit) {

          mapObjectItem = game.objects.spaceBallMap.check(data.row, data.col);

          <span class="keyword">if</span> (mapObjectItem) {</pre></div></div>
            
        </li>
        
        
        <li id="section-243">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-243">&#182;</a>
              </div>
              <p>we have an object. do a collision check.</p>

            </div>
            
        </li>
        
        
        <li id="section-244">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-244">&#182;</a>
              </div>
              <p>console.log(&#39;spaceball found at &#39; + data.row, data.col);</p>

            </div>
            
        </li>
        
        
        <li id="section-245">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-245">&#182;</a>
              </div>
              <p>HACK: compare vs. ship object shape for collision. it&#39;s close enough.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
            hit = mapObjectItem.pixelCollisionCheck({
              type: <span class="string">'ship'</span>,
              x: data.x - (data.vX * <span class="number">0.5</span>),
              y: data.y - (data.vY * <span class="number">0.5</span>),
              w: data.w,
              h: data.h
            });</pre></div></div>
            
        </li>
        
        
        <li id="section-246">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-246">&#182;</a>
              </div>
              <p>console.log(&#39;result of collision check with spaceball&#39;, hit);</p>

            </div>
            
        </li>
        
        
        <li id="section-247">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-247">&#182;</a>
              </div>
              <p>hit = mapObjectItem.hittable();</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
          }

        }

        <span class="keyword">if</span> (hit &amp;&amp; !passThrough) {</pre></div></div>
            
        </li>
        
        
        <li id="section-248">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-248">&#182;</a>
              </div>
              <p>kill the gunfire, provided it wasn&#39;t a bad guy (which shots can kill and pass through)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          die();
        }

        data.lastCollisionResult = {
          <span class="string">'hit'</span>: hit,
          <span class="string">'incrementPitch'</span>: incrementPitch
        };

      }

      <span class="keyword">return</span> data.lastCollisionResult;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">animate</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-249">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-249">&#182;</a>
              </div>
              <p>may be inactive, or died and awaiting cleanup</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (!data.active) {
        <span class="keyword">return</span> <span class="literal">false</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-250">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-250">&#182;</a>
              </div>
              <p>increase frame count, move vX + vY</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      moveBy(data.vX, data.vY);</pre></div></div>
            
        </li>
        
        
        <li id="section-251">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-251">&#182;</a>
              </div>
              <p>and do collision check?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      collisionCheck();

    }

    fire();

    objectInterface = {
      animate: animate,
      collisionCheck: collisionCheck,
      data: data,
      die: die,
      hittable: hittable
    };

    <span class="keyword">return</span> objectInterface;

  }

  <span class="function"><span class="keyword">function</span> <span class="title">Ship</span><span class="params">()</span> {</span>

    <span class="keyword">var</span> o;

    <span class="keyword">var</span> audio = {
      explode: <span class="literal">null</span>,
      thrustStart: <span class="literal">null</span>,
      thrustLoop: <span class="literal">null</span>
    };

    <span class="keyword">var</span> data = {</pre></div></div>
            
        </li>
        
        
        <li id="section-252">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-252">&#182;</a>
              </div>
              <p>angle: 0,</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      accelMultiplier: <span class="number">0.015</span>,
      almostZero: <span class="number">0.02</span>,
      dead: <span class="literal">false</span>,
      dying: <span class="literal">false</span>,
      hidden: <span class="literal">false</span>,
      decelRate: <span class="number">0.8</span>,
      x: <span class="number">0</span>,
      y: <span class="number">0</span>,
      w: <span class="number">32</span>,
      h: <span class="number">32</span>,
      lastX: <span class="literal">null</span>,
      lastY: <span class="literal">null</span>,
      lastCollisionX: <span class="literal">null</span>,
      lastCollisionY: <span class="literal">null</span>,
      vX: <span class="number">0</span>,
      vxMax: <span class="number">0.25</span>,
      vY: <span class="number">0</span>,
      vyMax: <span class="number">0.25</span>,
      row: <span class="number">0</span>,
      col: <span class="number">0</span>,
      thrusting: <span class="literal">false</span>,
      thrustDirection: {
        up: <span class="literal">true</span>, <span class="comment">// the initial/default.</span>
        down: <span class="literal">false</span>,
        left: <span class="literal">false</span>,
        right: <span class="literal">false</span>
      },
      firing: <span class="literal">false</span>,
      smartbombs: DEFAULT_SMARTBOMBS <span class="comment">// by default, armed with these many...</span>
    };

    <span class="keyword">var</span> objects = {
      shipGunfire: [],
      explosion: <span class="literal">null</span>
    };

    <span class="keyword">var</span> css = {
      thrust: {
        up: <span class="string">'thrust-up'</span>,
        right: <span class="string">'thrust-right'</span>,
        down: <span class="string">'thrust-down'</span>,
        left: <span class="string">'thrust-left'</span>
      },
      thrusting: <span class="string">'thrusting'</span>,
      hidden: <span class="string">'hidden'</span>
    };

<span class="comment">/*
    function setPosition(oOptions) {

      var x, y;

      x = Math.floor(oOptions.x);
      y = Math.floor(oOptions.y);

      data.x = x;
      data.y = y;

      o.style.left = x + 'px';
      o.style.top = y + 'px';

    }
*/</span>

    <span class="function"><span class="keyword">function</span> <span class="title">hide</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (!data.hidden) {
        data.hidden = <span class="literal">true</span>;
        utils.css.add(o, css.hidden);
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">show</span><span class="params">()</span> {</span>
      <span class="keyword">if</span> (data.hidden) {
        data.hidden = <span class="literal">false</span>;
        window.setTimeout(<span class="keyword">function</span>() {
          <span class="keyword">if</span> (!data.hidden) {
            utils.css.remove(o, css.hidden);
          }
        }, <span class="number">10</span>);
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">reset</span><span class="params">()</span> {</span>

      data.dead = <span class="literal">false</span>;

      data.vX = <span class="number">0</span>;
      data.vY = <span class="number">0</span>;

      show();

    }

    <span class="function"><span class="keyword">function</span> <span class="title">moveTo</span><span class="params">(x,y)</span> {</span>

      <span class="keyword">var</span> deltaX, deltaY,
          screenW = game.objects.screen.data.coords.width,
          screenH = game.objects.screen.data.coords.height,
          screenX = game.objects.screen.data.coords.x,
          screenXAbs = Math.abs(screenX),
          screenY = game.objects.screen.data.coords.y,
          screenYAbs = Math.abs(screenY),
          screenWThird = screenW/<span class="number">3</span>,
          screenHThird = screenH/<span class="number">3</span>;

      <span class="keyword">var</span> vX = data.vX;
      <span class="keyword">var</span> vY = data.vY;

      x = Math.floor(x);
      y = Math.floor(y);

      deltaX = x - data.x;
      deltaY = y - data.y;

      <span class="keyword">if</span> (data.lastX === x &amp;&amp; data.lastY === y) {
        <span class="keyword">return</span> <span class="literal">false</span>;
      }

      <span class="keyword">if</span> (data.lastX !== x) {
        o.style.left = x + <span class="string">'px'</span>;
      }

      <span class="keyword">if</span> (data.lastY !== y) {
        o.style.top = y + <span class="string">'px'</span>;
      }

      data.lastX = x;
      data.lastY = y;

      data.x = x;
      data.y = y;</pre></div></div>
            
        </li>
        
        
        <li id="section-253">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-253">&#182;</a>
              </div>
              <p>console.log(deltaX, screenXAbs, screenW, screenWThird);</p>

            </div>
            
        </li>
        
        
        <li id="section-254">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-254">&#182;</a>
              </div>
              <p>are we near the screen boundary?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">if</span> (deltaX &gt; <span class="number">0</span> &amp;&amp; x &gt; (screenXAbs + screenW - screenWThird)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-255">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-255">&#182;</a>
              </div>
              <p>moving right</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        game.objects.screen.moveBy(vX, <span class="number">0</span>);

      } <span class="keyword">else</span> <span class="keyword">if</span> (deltaX &lt; <span class="number">0</span> &amp;&amp; x &lt; (screenXAbs + screenWThird)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-256">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-256">&#182;</a>
              </div>
              <p>moving left</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        game.objects.screen.moveBy(vX, <span class="number">0</span>);
      }

      <span class="keyword">if</span> (deltaY &gt; <span class="number">0</span> &amp;&amp; y &gt; (screenYAbs + screenH - screenHThird)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-257">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-257">&#182;</a>
              </div>
              <p>moving down</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        game.objects.screen.moveBy(<span class="number">0</span>, vY);

      } <span class="keyword">else</span> <span class="keyword">if</span> (deltaY &lt; <span class="number">0</span> &amp;&amp; y &lt; (screenYAbs + screenHThird)) {

        game.objects.screen.moveBy(<span class="number">0</span>, vY);

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">addDirection</span><span class="params">(direction, opposite)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-258">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-258">&#182;</a>
              </div>
              <p>adds one direction, optionally removing the other.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">if</span> (!data.thrustDirection[direction]) {
        data.thrustDirection[direction] = <span class="literal">true</span>;
        utils.css.add(o, css.thrust[direction]);
      }

      <span class="keyword">if</span> (opposite &amp;&amp; data.thrustDirection[opposite]) {
        data.thrustDirection[opposite] = <span class="literal">false</span>;
        utils.css.remove(o, css.thrust[opposite]);
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">removeDirection</span><span class="params">(direction)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-259">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-259">&#182;</a>
              </div>
              <p>removes one direction</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (data.thrustDirection[direction]) {
        data.thrustDirection[direction] = <span class="literal">false</span>;
        utils.css.remove(o, css.thrust[direction]);
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">thrust</span><span class="params">(xDirection, yDirection)</span> {</span>

      <span class="keyword">if</span> (data.dying || data.dead) {
        <span class="keyword">return</span> <span class="literal">false</span>;
      }

      <span class="keyword">if</span> (!data.thrusting) {</pre></div></div>
            
        </li>
        
        
        <li id="section-260">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-260">&#182;</a>
              </div>
              <p>initial start.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        utils.css.add(o, css.thrusting);

        <span class="keyword">if</span> (features.audio) {
          audio.thrustStart.play();
          audio.thrustLoop.play();
        }

      }

      data.thrusting = <span class="literal">true</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-261">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-261">&#182;</a>
              </div>
              <p>starts moving in a given direction.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      data.vX += xDirection * data.accelMultiplier * game.objects.gameLoop.data.GAME_SPEED;
      data.vY += yDirection * data.accelMultiplier * game.objects.gameLoop.data.GAME_SPEED;</pre></div></div>
            
        </li>
        
        
        <li id="section-262">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-262">&#182;</a>
              </div>
              <p>change ship UI based on pending direction change</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">if</span> (xDirection &gt; <span class="number">0</span>) {

        addDirection(<span class="string">'right'</span>, <span class="string">'left'</span>);

      } <span class="keyword">else</span> <span class="keyword">if</span> (xDirection &lt; <span class="number">0</span>) {

        addDirection(<span class="string">'left'</span>, <span class="string">'right'</span>);
        data.vX = Math.max(-data.vxMax, data.vX);

      } <span class="keyword">else</span> {

        removeDirection(<span class="string">'left'</span>);
        removeDirection(<span class="string">'right'</span>);

      }

      <span class="keyword">if</span> (yDirection &gt; <span class="number">0</span>) {

        addDirection(<span class="string">'down'</span>, <span class="string">'up'</span>);

      } <span class="keyword">else</span> <span class="keyword">if</span> (yDirection &lt; <span class="number">0</span>) {

        addDirection(<span class="string">'up'</span>, <span class="string">'down'</span>);

      } <span class="keyword">else</span> {

        removeDirection(<span class="string">'down'</span>);
        removeDirection(<span class="string">'up'</span>);

      }</pre></div></div>
            
        </li>
        
        
        <li id="section-263">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-263">&#182;</a>
              </div>
              <p>enforce velocity limits</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">if</span> (data.vX &gt; <span class="number">0</span>) {

        data.vX = Math.min(data.vxMax, data.vX);

      } <span class="keyword">else</span> <span class="keyword">if</span> (data.vX &lt; <span class="number">0</span>) {

        data.vX = Math.max(-data.vxMax, data.vX);

      }

      <span class="keyword">if</span> (data.vY &gt; <span class="number">0</span>) {

        data.vY = Math.min(data.vyMax, data.vY);

      } <span class="keyword">else</span> <span class="keyword">if</span> (data.vY &lt; <span class="number">0</span>) {

        data.vY = Math.max(-data.vyMax, data.vY);

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">endThrust</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (!data.thrusting) {
        <span class="keyword">return</span> <span class="literal">false</span>;
      }

      utils.css.remove(o, css.thrusting);

      data.thrusting = <span class="literal">false</span>;

      <span class="keyword">if</span> (features.audio) {</pre></div></div>
            
        </li>
        
        
        <li id="section-264">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-264">&#182;</a>
              </div>
              <p>initial start.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        audio.thrustStart.stop();
        audio.thrustLoop.stop();
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">isThrusting</span><span class="params">()</span> {</span>

      <span class="keyword">return</span> data.thrusting;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">stop</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-265">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-265">&#182;</a>
              </div>
              <p>kill movement and thrust, etc.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      endThrust();
      data.vX = <span class="number">0</span>;
      data.vY = <span class="number">0</span>;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">killGunFire</span><span class="params">()</span> {</span>

      <span class="keyword">var</span> i, j;

      <span class="keyword">for</span> (i=<span class="number">0</span>, j=objects.shipGunfire.length; i&lt;j; i++) {

        objects.shipGunfire[i].die();

      }</pre></div></div>
            
        </li>
        
        
        <li id="section-266">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-266">&#182;</a>
              </div>
              <p>clean out the array, too.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      objects.shipGunfire = [];

    }

    <span class="function"><span class="keyword">function</span> <span class="title">animateGunFire</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-267">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-267">&#182;</a>
              </div>
              <p>this array should be empty / zero when no gunfire is active, since objects self-destruct.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">var</span> i, j,
          items = objects.shipGunfire;

      <span class="keyword">if</span> (items.length) {</pre></div></div>
            
        </li>
        
        
        <li id="section-268">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-268">&#182;</a>
              </div>
              <p>console.log(&#39;animating &#39; + items.length + &#39; gunfire objects&#39;);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        <span class="keyword">for</span> (i=<span class="number">0</span>, j=items.length; i&lt;j; i++) {</pre></div></div>
            
        </li>
        
        
        <li id="section-269">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-269">&#182;</a>
              </div>
              <p>do yo&#39; thang.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          items[i].animate();
        }

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">startFire</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (data.firing) {
        <span class="keyword">return</span> <span class="literal">false</span>;
      }

      data.firing = <span class="literal">true</span>;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">endFire</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (!data.firing) {
        <span class="keyword">return</span> <span class="literal">false</span>;
      }

      data.firing = <span class="literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-270">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-270">&#182;</a>
              </div>
              <p>note: continue animating active elements, regardless of firing state.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    }

    <span class="function"><span class="keyword">function</span> <span class="title">fire</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (!data.firing || data.dying || data.dead) {
        <span class="keyword">return</span> <span class="literal">false</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-271">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-271">&#182;</a>
              </div>
              <p>for alignment with ship sprite...</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">var</span> xOffset = <span class="number">13</span>;
      <span class="keyword">var</span> yOffset = <span class="number">13</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-272">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-272">&#182;</a>
              </div>
              <p>create two new fire objects, on opposite axes.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">var</span> xDir = (data.thrustDirection.left ? -<span class="number">1</span> : (data.thrustDirection.right ? <span class="number">1</span> : <span class="number">0</span>));
      <span class="keyword">var</span> yDir = (data.thrustDirection.up ? -<span class="number">1</span> : (data.thrustDirection.down ? <span class="number">1</span> : <span class="number">0</span>));

      objects.shipGunfire.push(<span class="keyword">new</span> ShipGunfire({
        vX: xDir,
        vY: yDir,
        x: data.x + xOffset,
        y: data.y + yOffset,</pre></div></div>
            
        </li>
        
        
        <li id="section-273">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-273">&#182;</a>
              </div>
              <p>TODO: Review w/h</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        w: <span class="number">7</span>,
        h: <span class="number">7</span>
      }));</pre></div></div>
            
        </li>
        
        
        <li id="section-274">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-274">&#182;</a>
              </div>
              <p>mirror gunfire</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      objects.shipGunfire.push(<span class="keyword">new</span> ShipGunfire({
        vX: xDir * -<span class="number">1</span>,
        vY: yDir * -<span class="number">1</span>,
        x: data.x + xOffset,
        y: data.y + yOffset,
        w: <span class="number">7</span>,
        h: <span class="number">7</span>
      }));

    }

    <span class="function"><span class="keyword">function</span> <span class="title">maybeFire</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-275">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-275">&#182;</a>
              </div>
              <p>is the fire key being pressed? fire if so.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">if</span> (game.objects.keyboardMonitor.isDown(<span class="string">'shift'</span>) || game.objects.keyboardMonitor.isDown(<span class="string">'ctrl'</span>)) {
        fire();
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">decelerate</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-276">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-276">&#182;</a>
              </div>
              <p>simulate the effects of friction.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">var</span> isDown = game.objects.keyboardMonitor.isDown;

      <span class="keyword">if</span> (!isDown(<span class="string">'left'</span>) &amp;&amp; !isDown(<span class="string">'right'</span>)) {
        <span class="keyword">if</span> (Math.abs(data.vX) &gt; data.almostZero) {
          data.vX *= data.decelRate;
        } <span class="keyword">else</span> {
          data.vX = <span class="number">0</span>;
        }
      } <span class="keyword">else</span> <span class="keyword">if</span> ((isDown(<span class="string">'left'</span>) &amp;&amp; data.vX &gt; <span class="number">0</span>) || (isDown(<span class="string">'right'</span>) &amp;&amp; data.vX &lt; <span class="number">0</span>)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-277">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-277">&#182;</a>
              </div>
              <p>opposite direction thrust case</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        data.vX *= data.decelRate;
      }

      <span class="keyword">if</span> (!isDown(<span class="string">'up'</span>) &amp;&amp; !isDown(<span class="string">'down'</span>)) {
        <span class="keyword">if</span> (Math.abs(data.vY) &gt; data.almostZero) {
          data.vY *= data.decelRate;
        } <span class="keyword">else</span> {
          data.vY = <span class="number">0</span>;
        }
      } <span class="keyword">else</span> <span class="keyword">if</span> ((isDown(<span class="string">'up'</span>) &amp;&amp; data.vY &gt; <span class="number">0</span>) || (isDown(<span class="string">'down'</span>) &amp;&amp; data.vY &lt; <span class="number">0</span>)) {
        data.vY *= data.decelRate;
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">isAlive</span><span class="params">()</span> {</span>

      <span class="keyword">return</span> (!data.dying &amp;&amp; !data.dead);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">die</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (data.dying || data.dead) {</pre></div></div>
            
        </li>
        
        
        <li id="section-278">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-278">&#182;</a>
              </div>
              <p>already underway or done.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">return</span> <span class="literal">false</span>;
      }

      <span class="keyword">var</span> i, j,
          x = data.x,
          y = data.y,
          directions = [
           [-<span class="number">1</span>,-<span class="number">1</span>],
           [<span class="number">0</span>,-<span class="number">1</span>],
           [<span class="number">1</span>,-<span class="number">1</span>],
           [<span class="number">1</span>,<span class="number">0</span>],
           [<span class="number">1</span>,<span class="number">1</span>],
           [<span class="number">0</span>,<span class="number">1</span>],
           [-<span class="number">1</span>,<span class="number">1</span>],
           [-<span class="number">1</span>,<span class="number">0</span>] 
          ];

      data.dying = <span class="literal">true</span>;

      <span class="keyword">if</span> (features.audio) {
        audio.explode.play();
      }

      hide();</pre></div></div>
            
        </li>
        
        
        <li id="section-279">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-279">&#182;</a>
              </div>
              <p>gunfire should die at this point, too</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      killGunFire();</pre></div></div>
            
        </li>
        
        
        <li id="section-280">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-280">&#182;</a>
              </div>
              <p>create explosion object (if needed), position here and go boom.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (!objects.explosion) {

        objects.explosion = [];

        <span class="keyword">for</span> (i=<span class="number">0</span>, j=directions.length; i&lt;j; i++) {
          objects.explosion.push(<span class="keyword">new</span> BigExplosion({
            animationModulus: <span class="number">6</span>,
            node: game.dom.world,
            x: x,
            y: y,
            vX: directions[i][<span class="number">0</span>],
            vY: directions[i][<span class="number">1</span>]
          }));
        }

      }</pre></div></div>
            
        </li>
        
        
        <li id="section-281">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-281">&#182;</a>
              </div>
              <p>next animation loop will pick up from here.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    }

    <span class="function"><span class="keyword">function</span> <span class="title">findSafeRespawnLocation</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-282">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-282">&#182;</a>
              </div>
              <p>based on existing row/col, find nearby dead wall space (or open space) to occupy.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">var</span> freeSpace;

      freeSpace = findFreeSpace(data.col, data.row);</pre></div></div>
            
        </li>
        
        
        <li id="section-283">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-283">&#182;</a>
              </div>
              <p>hack: directly assign ship row/col, so they are picked up when moveBy() is later applied.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      game.objects.ship.data.col = freeSpace[<span class="number">0</span>];
      game.objects.ship.data.row = freeSpace[<span class="number">1</span>];</pre></div></div>
            
        </li>
        
        
        <li id="section-284">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-284">&#182;</a>
              </div>
              <p>prevent ship driving</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      game.objects.keyboardMonitor.releaseAll();</pre></div></div>
            
        </li>
        
        
        <li id="section-285">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-285">&#182;</a>
              </div>
              <p>also, stop any velocity that may be applied.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      game.objects.ship.stop();</pre></div></div>
            
        </li>
        
        
        <li id="section-286">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-286">&#182;</a>
              </div>
              <pre><code> hide();</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      moveTo(game.data.NODE_WIDTH * Math.floor(game.objects.ship.data.col), game.data.NODE_HEIGHT * Math.floor(game.objects.ship.data.row));</pre></div></div>
            
        </li>
        
        
        <li id="section-287">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-287">&#182;</a>
              </div>
              <pre><code> show();</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    }

    <span class="function"><span class="keyword">function</span> <span class="title">dieComplete</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-288">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-288">&#182;</a>
              </div>
              <p>minus one man. next screen, game over, etc.?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">var</span> isGameOver;

      isGameOver = game.objects.gameController.shipDied();

      <span class="keyword">if</span> (!isGameOver) {

        window.setTimeout(<span class="keyword">function</span>() {
          findSafeRespawnLocation();
          reset();
        }, <span class="number">500</span>);

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">animateExplosion</span><span class="params">()</span> {</span>

      <span class="keyword">var</span> i, j;
      <span class="keyword">var</span> inactive = <span class="number">0</span>;

      <span class="keyword">for</span> (i=<span class="number">0</span>, j=objects.explosion.length; i&lt;j; i++) {
        inactive += objects.explosion[i].animate();
      }

      <span class="keyword">if</span> (inactive &gt;= objects.explosion.length) {</pre></div></div>
            
        </li>
        
        
        <li id="section-289">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-289">&#182;</a>
              </div>
              <p>all objects have finished animating.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">for</span> (i=<span class="number">0</span>, j=objects.explosion.length; i&lt;j; i++) {
          objects.explosion[i].destruct();
        }

        objects.explosion = <span class="literal">null</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-290">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-290">&#182;</a>
              </div>
              <p>ship is now dead.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        data.dying = <span class="literal">false</span>;
        data.dead = <span class="literal">true</span>;

        dieComplete();

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">collisionCheck</span><span class="params">(point)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-291">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-291">&#182;</a>
              </div>
              <p>return true if ship intersects a given box with x/y/w/h.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">var</span> intersects = game.objects.collision.check(point, {
        x: data.x,
        y: data.y,
        w: data.w,
        h: data.h
      });

      <span class="keyword">return</span> intersects;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">gunfireCollisionCheck</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-292">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-292">&#182;</a>
              </div>
              <p>check ship fire for collision</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">var</span> i, j,
          items = objects.shipGunfire,
          result,
          results = [],
          hit = <span class="literal">false</span>,
          incrementPitch = <span class="literal">false</span>,
          audioPitch,
          toRemove = [];

      <span class="keyword">if</span> (items.length) {

        <span class="keyword">for</span> (i=<span class="number">0</span>, j=items.length; i&lt;j; i++) {

          result = objects.shipGunfire[i].collisionCheck();

          <span class="keyword">if</span> (result) {</pre></div></div>
            
        </li>
        
        
        <li id="section-293">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-293">&#182;</a>
              </div>
              <p>if there was a hit, allow pitch to increase.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="keyword">if</span> (result.incrementPitch) {
              incrementPitch = <span class="literal">true</span>;
            }

            <span class="keyword">if</span> (result.hit) {
              hit = <span class="literal">true</span>;
            }

            results.push(result);

          }</pre></div></div>
            
        </li>
        
        
        <li id="section-294">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-294">&#182;</a>
              </div>
              <p>is this now dead (or killed elsewhere, ie., hitting a bad guy), and needing clean-up?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="keyword">if</span> (objects.shipGunfire[i].data.dead) {
            toRemove.push(i);
          }

        }</pre></div></div>
            
        </li>
        
        
        <li id="section-295">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-295">&#182;</a>
              </div>
              <p>TODO: sound should only be played when hitting blocks.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (hit &amp;&amp; features.audio) {</pre></div></div>
            
        </li>
        
        
        <li id="section-296">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-296">&#182;</a>
              </div>
              <p>make noise.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          audioPitch = getAudioPitch();

          <span class="keyword">if</span> (features.audio) {

            soundSprites.playPop(audioPitch);

          }

        }

        <span class="keyword">if</span> (incrementPitch) {
          incrementAudioPitch();
        }

      }</pre></div></div>
            
        </li>
        
        
        <li id="section-297">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-297">&#182;</a>
              </div>
              <p>remove dead items from the array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (toRemove.length) {
        <span class="keyword">for</span> (i=toRemove.length-<span class="number">1</span>; i&gt;=<span class="number">0</span>; i--) {
          objects.shipGunfire.splice(toRemove[i], <span class="number">1</span>);
        }
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">gridCollisionCheck</span><span class="params">()</span> {</span>

      <span class="comment">/**
       * compares ship coords to grid, looks for collisions.
       */</span>

      <span class="keyword">var</span> i, j,
          intersects,
          item,
          hit,
          mapObjectItem;

      <span class="keyword">if</span> (data.x !== data.lastCollisionX || data.y !== data.lastCollisionY) {</pre></div></div>
            
        </li>
        
        
        <li id="section-298">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-298">&#182;</a>
              </div>
              <p>refresh and update collision</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        data.lastCollisionX = data.x;
        data.lastCollisionY = data.y;

        intersects = game.objects.collision.checkGrid({
          x: data.x,
          y: data.y,
          w: data.w,
          h: data.h,
          includeNeighbours: <span class="literal">true</span>
        });

        <span class="keyword">for</span> (i=<span class="number">0</span>, j=intersects.length; i&lt;j; i++) {

          item = game.data.map[intersects[i].row][intersects[i].col];

          <span class="keyword">if</span> (item) {

            <span class="keyword">if</span> (item.hittable &amp;&amp; item.hittable()) {</pre></div></div>
            
        </li>
        
        
        <li id="section-299">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-299">&#182;</a>
              </div>
              <p>is this an active item? alive, not dead etc.?</p>

            </div>
            
        </li>
        
        
        <li id="section-300">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-300">&#182;</a>
              </div>
              <p>additional pixel-level collision check?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
              <span class="keyword">if</span> (item.pixelCollisionCheck) {</pre></div></div>
            
        </li>
        
        
        <li id="section-301">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-301">&#182;</a>
              </div>
              <p>HACK (sorta): check current position, and (potentially) last two in-between coordinates
given bullet may &quot;skip&quot; walls otherwise
i.e., cover (almost) the full range of movement</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
                hit = item.pixelCollisionCheck({
                  type: <span class="string">'ship'</span>,
                  x: data.x,
                  y: data.y,
                  w: data.w,
                  h: data.h
                });

                <span class="keyword">if</span> (hit) {
                  console.log(<span class="string">'ship: pixel-level collision check with item'</span>, item);
                  <span class="keyword">return</span> game.objects.ship.die();
                }

              } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-302">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-302">&#182;</a>
              </div>
              <p>kill the ship?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                console.log(<span class="string">'ship collision: hittable grid item'</span>, item);

                <span class="keyword">return</span> game.objects.ship.die();

              }

            }

          } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-303">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-303">&#182;</a>
              </div>
              <p>check moving grid items</p>

            </div>
            
        </li>
        
        
        <li id="section-304">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-304">&#182;</a>
              </div>
              <pre><code>       if (!intersects[i].isNeighbour) {</code></pre>

            </div>
            
        </li>
        
        
        <li id="section-305">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-305">&#182;</a>
              </div>
              <p>look only at midpoint, exclude neighbours...</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
              mapObjectItem = game.objects.turretGunfireMap.check(intersects[i].row, intersects[i].col);

              <span class="keyword">if</span> (mapObjectItem) {</pre></div></div>
            
        </li>
        
        
        <li id="section-306">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-306">&#182;</a>
              </div>
              <p>console.log(&#39;found turret gunfire&#39;, mapObjectItem);</p>

            </div>
            
        </li>
        
        
        <li id="section-307">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-307">&#182;</a>
              </div>
              <p>additional pixel-level collision check</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                <span class="keyword">if</span> (mapObjectItem.pixelCollisionCheck) {

                  hit = mapObjectItem.pixelCollisionCheck({
                    type: <span class="string">'ship'</span>,
                    x: data.x,
                    y: data.y,
                    w: data.w,
                    h: data.h
                  });

                } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-308">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-308">&#182;</a>
              </div>
              <p>we have an object. do a collision check.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                  hit = mapObjectItem.collisionCheck();

                }

                <span class="keyword">if</span> (hit) {
                  console.log(<span class="string">'ship hit moving item'</span>, mapObjectItem);
                  <span class="keyword">return</span> game.objects.ship.die();
                }

              } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-309">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-309">&#182;</a>
              </div>
              <p>did we hit a spaceball?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                mapObjectItem = game.objects.spaceBallMap.check(intersects[i].row, intersects[i].col);

                <span class="keyword">if</span> (mapObjectItem) {</pre></div></div>
            
        </li>
        
        
        <li id="section-310">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-310">&#182;</a>
              </div>
              <p>console.log(&#39;found spaceball&#39;);</p>

            </div>
            
        </li>
        
        
        <li id="section-311">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-311">&#182;</a>
              </div>
              <p>we have an object. do a collision check.
hit = mapObjectItem.hittable();</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
                  hit = mapObjectItem.pixelCollisionCheck({
                    type: <span class="string">'ship'</span>,
                    x: data.x - (data.vX * <span class="number">0.5</span>),
                    y: data.y - (data.vY * <span class="number">0.5</span>),
                    w: data.w,
                    h: data.h
                  });

                  <span class="keyword">if</span> (hit) {
                    console.log(<span class="string">'spaceball hit ship'</span>);
                    <span class="keyword">return</span> game.objects.ship.die();
                  }

                }

              }</pre></div></div>
            
        </li>
        
        
        <li id="section-312">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-312">&#182;</a>
              </div>
              <pre><code>      }</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>
          }

        }

      } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-313">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-313">&#182;</a>
              </div>
              <p>ship not moving, but check other items for intersects (and smashy smashy)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        intersects = game.objects.collision.checkGrid({
          x: data.x,
          y: data.y,
          w: data.w,
          h: data.h,
          includeNeighbours: <span class="literal">true</span>
        });

        <span class="keyword">if</span> (intersects &amp;&amp; intersects.length) {

          <span class="keyword">for</span> (i=<span class="number">0</span>, j=intersects.length; i&lt;j; i++) {</pre></div></div>
            
        </li>
        
        
        <li id="section-314">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-314">&#182;</a>
              </div>
              <p>whether moving or not - did we hit turret gunfire?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
            mapObjectItem = game.objects.turretGunfireMap.check(intersects[i].row, intersects[i].col);

            <span class="keyword">if</span> (mapObjectItem) {</pre></div></div>
            
        </li>
        
        
        <li id="section-315">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-315">&#182;</a>
              </div>
              <p>console.log(&#39;found turret gunfire&#39;, mapObjectItem);</p>

            </div>
            
        </li>
        
        
        <li id="section-316">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-316">&#182;</a>
              </div>
              <p>additional pixel-level collision check</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>              <span class="keyword">if</span> (mapObjectItem.pixelCollisionCheck) {

                hit = mapObjectItem.pixelCollisionCheck({
                  type: <span class="string">'ship'</span>,
                  x: data.x,
                  y: data.y,
                  w: data.w,
                  h: data.h
                });

              } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-317">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-317">&#182;</a>
              </div>
              <p>we have an object. do a collision check.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                hit = mapObjectItem.collisionCheck();

              }

              <span class="keyword">if</span> (hit) {
                console.log(<span class="string">'ship hit turret gunfire'</span>);
                <span class="keyword">return</span> game.objects.ship.die();
              }

            } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-318">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-318">&#182;</a>
              </div>
              <p>don&#39;t check neighbouring locations, in this case...</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
              <span class="keyword">if</span> (!intersects[i].isNeighbour) {</pre></div></div>
            
        </li>
        
        
        <li id="section-319">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-319">&#182;</a>
              </div>
              <p>did we hit a spaceball?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                mapObjectItem = game.objects.spaceBallMap.check(intersects[i].row, intersects[i].col);

                <span class="keyword">if</span> (mapObjectItem) {

                  console.log(<span class="string">'found spaceball'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-320">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-320">&#182;</a>
              </div>
              <p>we have an object. do a collision check.
hit = mapObjectItem.hittable();</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
                  hit = mapObjectItem.pixelCollisionCheck({
                    type: <span class="string">'ship'</span>,
                    x: data.x - (data.vX * <span class="number">0.5</span>),
                    y: data.y - (data.vY * <span class="number">0.5</span>),
                    w: data.w,
                    h: data.h
                  });

                  <span class="keyword">if</span> (hit) {
                    <span class="keyword">return</span> game.objects.ship.die();
                  }

                }

              }

            }

          }

        }

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">moveBy</span><span class="params">(x,y)</span> {</span> <span class="comment">// TODO: Rename to be relative column distances or something</span>

      <span class="keyword">var</span> row, col,
          w = game.data.NODE_WIDTH,
          h = game.data.NODE_HEIGHT,
          targetX,
          targetY;

      col = Math.min(game.data.world_cols, Math.max(<span class="number">0</span>, data.col + x));
      row = Math.min(game.data.world_rows, Math.max(<span class="number">0</span>, data.row + y));

      <span class="keyword">if</span> (col !== data.col || row !== data.row) {</pre></div></div>
            
        </li>
        
        
        <li id="section-321">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-321">&#182;</a>
              </div>
              <p>broadcast event?        </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        data.col = col;
        data.row = row;

      }

      targetX = (w * data.col) + (w * (x/w));
      targetY = (h * data.row) + (h * (y/h));</pre></div></div>
            
        </li>
        
        
        <li id="section-322">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-322">&#182;</a>
              </div>
              <p>limit ship x/y to world dimensions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      targetX = Math.max(<span class="number">0</span>, Math.min(game.data.world_width, targetX));
      targetY = Math.max(<span class="number">0</span>, Math.min(game.data.world_height, targetY));

      moveTo(targetX, targetY);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">animate</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-323">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-323">&#182;</a>
              </div>
              <p>apply continued x/y velocities and move.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">var</span> k = game.objects.keyboardMonitor;

      <span class="keyword">var</span> x = <span class="number">0</span>;
      <span class="keyword">var</span> y = <span class="number">0</span>;

      <span class="keyword">if</span> (!data.dying &amp;&amp; !data.dead) {

        decelerate();

        <span class="keyword">if</span> (k.isDown(<span class="string">'up'</span>)) {
          y = -<span class="number">1</span>;
        }

        <span class="keyword">if</span> (k.isDown(<span class="string">'left'</span>)) {
          x = -<span class="number">1</span>;
        }

        <span class="keyword">if</span> (k.isDown(<span class="string">'right'</span>)) {
          x = <span class="number">1</span>;
        }

        <span class="keyword">if</span> (k.isDown(<span class="string">'down'</span>)) {
          y = <span class="number">1</span>;
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-324">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-324">&#182;</a>
              </div>
              <p>thrust if acceleration is needed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (x || y) {
          thrust(x, y);
        }

        moveBy(data.vX, data.vY);

        animateGunFire();</pre></div></div>
            
        </li>
        
        
        <li id="section-325">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-325">&#182;</a>
              </div>
              <p>collision checks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        gridCollisionCheck();

        gunfireCollisionCheck();

        game.objects.badGuyController.collisionCheck();

      } <span class="keyword">else</span> <span class="keyword">if</span> (data.dying) {</pre></div></div>
            
        </li>
        
        
        <li id="section-326">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-326">&#182;</a>
              </div>
              <p>animate explosions?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (!data.dead) {

          animateExplosion();

        }

      }
    
    }

    <span class="function"><span class="keyword">function</span> <span class="title">setDefaultPosition</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-327">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-327">&#182;</a>
              </div>
              <p>center relative to screen midsection?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">var</span> w, h, x, y, row, col;

      w = game.objects.screen.data.coords.width;
      h = game.objects.screen.data.coords.height;

      x = (parseInt(w/<span class="number">2</span>, <span class="number">10</span>) - game.data.NODE_WIDTH);
      y = (parseInt(h/<span class="number">2</span>, <span class="number">10</span>) - game.data.NODE_HEIGHT);</pre></div></div>
            
        </li>
        
        
        <li id="section-328">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-328">&#182;</a>
              </div>
              <p>HACK</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      x = <span class="number">32</span> * DEFAULT_HOME_COL;
      y = <span class="number">32</span> * DEFAULT_HOME_ROW;

      col = Math.floor(x/game.data.NODE_WIDTH);
      row = Math.floor(y/game.data.NODE_HEIGHT);

      data.col = col;
      data.row = row;</pre></div></div>
            
        </li>
        
        
        <li id="section-329">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-329">&#182;</a>
              </div>
              <p>round x/y now to nearest row/col</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      x = data.col * game.data.NODE_WIDTH;
      y = data.row * game.data.NODE_HEIGHT;

      moveTo(x,y);

      game.objects.screen.centerAtPoint(x, y);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">getNode</span><span class="params">()</span> {</span>

      <span class="keyword">return</span> o;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">initSound</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (features.audio) {

        audio.thrustStart = soundManager.createSound({
          id: <span class="string">'ship-thrust-start'</span>,
          url: <span class="string">'audio/ship-thrust-start.mp3'</span>,
          autoLoad: <span class="literal">true</span>
        });

        audio.thrustLoop = soundManager.createSound({
          id: <span class="string">'ship-thrust-loop'</span>,
          url: <span class="string">'audio/ship-thrust-loop.mp3'</span>,
          loops: <span class="number">999</span>,
          autoLoad: <span class="literal">true</span>
        });

        audio.explode = soundManager.createSound({
          id: <span class="string">'ship-explode'</span>,
          url: <span class="string">'audio/ship-explode.mp3'</span>,
          autoLoad: <span class="literal">true</span>
        });

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">()</span> {</span>

      o = document.createElement(<span class="string">'div'</span>);
      o.className = <span class="string">'ship'</span>;

      hide();

      game.dom.worldFragment.appendChild(o);

      show();

      initSound();

    }

    <span class="keyword">return</span> {

      animate: animate,
      collisionCheck: collisionCheck,
      data: data,
      decelerate: decelerate,
      die: die,
      isAlive: isAlive,
      fire: fire,
      endFire: endFire,
      maybeFire: maybeFire,
      objects: objects,
      startFire: startFire,
      init: init,
      isThrusting: isThrusting,
      endThrust: endThrust,
      moveBy: moveBy,
      moveTo: moveTo,
      getNode: getNode,
      reset: reset,
      stop: stop,
      thrust: thrust,
      setDefaultPosition: setDefaultPosition,
      findSafeRespawnLocation: findSafeRespawnLocation

    };

  }

  <span class="function"><span class="keyword">function</span> <span class="title">BaseWall</span><span class="params">(oOptions)</span> {</span>

    <span class="comment">/**
     * a component of a "base"
     * consisting of walls and turrets
     */</span>

    <span class="keyword">var</span> o;</pre></div></div>
            
        </li>
        
        
        <li id="section-330">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-330">&#182;</a>
              </div>
              <p>var frameCount = 0;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="keyword">var</span> css = {
      exploding: <span class="string">'exploding'</span>,
      exploded: <span class="string">'exploded'</span>
    };

    <span class="keyword">var</span> data = {
      col: oOptions.col,
      row: oOptions.row,
      x: oOptions.col * game.data.NODE_WIDTH,
      y: oOptions.row * game.data.NODE_HEIGHT,
      w: <span class="number">32</span>,
      h: <span class="number">32</span>,
      type: oOptions.type,
      subType: oOptions.subType,
      exploding: <span class="literal">false</span>,
      exploded: <span class="literal">false</span>,
      explosionFrame: <span class="number">0</span>,
      explosionFrames: <span class="number">6</span>
    };

    <span class="function"><span class="keyword">function</span> <span class="title">destruct</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (o) {

        o.parentNode.removeChild(o);
        o = <span class="literal">null</span>;

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">explode</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (!data.exploding) {
        data.exploding = <span class="literal">true</span>;
        utils.css.add(o, css.exploding);
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">explodeComplete</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (data.exploding) {
        data.exploding = <span class="literal">false</span>;
        data.exploded = <span class="literal">true</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-331">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-331">&#182;</a>
              </div>
              <p>utils.css.swap(o, css.exploding, css.exploded);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        utils.css.remove(o, css.exploding);
        utils.css.add(o, css.exploded);
      }

      destruct();

    }

    <span class="function"><span class="keyword">function</span> <span class="title">animate</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (!data.exploded &amp;&amp; data.exploding) {</pre></div></div>
            
        </li>
        
        
        <li id="section-332">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-332">&#182;</a>
              </div>
              <p>frameCount++;</p>

            </div>
            
        </li>
        
        
        <li id="section-333">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-333">&#182;</a>
              </div>
              <p>if (frameCount % 2 === 0) {</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
          o.style.backgroundPosition = <span class="string">'0px '</span> + (data.explosionFrame * -<span class="number">32</span>) + <span class="string">'px'</span>;
          data.explosionFrame++;
          <span class="keyword">if</span> (data.explosionFrame &gt;= data.explosionFrames) {
            data.explosionFrame = <span class="number">0</span>;
          }</pre></div></div>
            
        </li>
        
        
        <li id="section-334">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-334">&#182;</a>
              </div>
              <p>}</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      }

    }

<span class="comment">/*
    function getNode() {
      return o;
    }
*/</span>

    <span class="function"><span class="keyword">function</span> <span class="title">pixelCollisionCheck</span><span class="params">(oOptions)</span> {</span>

      <span class="keyword">var</span> hit;
      <span class="keyword">var</span> collision = game.objects.collision;

      <span class="keyword">var</span> wallType = (data.type + <span class="string">'-'</span> + data.subType).replace(<span class="string">' '</span>, <span class="string">'-'</span>);
      wallType = wallType.replace(<span class="regexp">/wall\-type\-[234]/i</span>, <span class="string">'wall-type-generic'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-335">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-335">&#182;</a>
              </div>
              <p>console.log(&#39;comparing &#39; + oOptions.type + &#39; &lt;-&gt; &#39; + wallType);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      hit = collision.checkSprites({
         object1: oOptions,
         object2: {
           type: wallType,
           x: data.x,
           y: data.y,
           w: data.w,
           h: data.h
         }
      });

      <span class="keyword">return</span> hit;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">hit</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-336">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-336">&#182;</a>
              </div>
              <p>walls absorb gunfire, do nothing.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      console.log(<span class="string">'wall hit, doing nothing'</span>);
    }

    <span class="function"><span class="keyword">function</span> <span class="title">hittable</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-337">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-337">&#182;</a>
              </div>
              <p>considered hittable until exploded.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">return</span> !data.exploded;
    }

    <span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (!o) {

        o = makeGridItem({
          x: data.col,
          y: data.row,
          type: data.type,
          subType: data.subType
        });

      }

      dom.worldFragment.appendChild(o);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">restore</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (data.exploded) {
        data.exploded = <span class="literal">false</span>;
      }

      init();

    }

    init();

    <span class="keyword">return</span> {
      animate: animate,
      data: data,</pre></div></div>
            
        </li>
        
        
        <li id="section-338">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-338">&#182;</a>
              </div>
              <p>die: die,</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      explode: explode,
      explodeComplete: explodeComplete,
      hit: hit,
      hittable: hittable,
      pixelCollisionCheck: pixelCollisionCheck,
      restore: restore
    };

  }

  <span class="function"><span class="keyword">function</span> <span class="title">ObjectMap</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-339">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-339">&#182;</a>
              </div>
              <p>2D array tracking references to game objects
for quick lookup (for collision purposes)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="keyword">var</span> map = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-340">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-340">&#182;</a>
              </div>
              <p>hash which tracks last row/col</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> lastLocation = {};

    <span class="function"><span class="keyword">function</span> <span class="title">check</span><span class="params">(row, col)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-341">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-341">&#182;</a>
              </div>
              <p>a dead-simple lookup.
TODO: consider safety check.</p>

            </div>
            
        </li>
        
        
        <li id="section-342">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-342">&#182;</a>
              </div>
              <p>first, round down to ensure we have an integer.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      row = Math.floor(row);
      col = Math.floor(col);

      <span class="keyword">return</span> map[row] !== <span class="literal">undefined</span> &amp;&amp; map[row][col] !== <span class="literal">undefined</span> ? map[row][col] : <span class="literal">null</span>;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">clearLocation</span><span class="params">(id)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-343">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-343">&#182;</a>
              </div>
              <p>given an object ID, remove its registered location in the map.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">var</span> previous;

      <span class="keyword">if</span> (lastLocation[id] !== <span class="literal">undefined</span>) {
        previous = lastLocation[id];
        <span class="keyword">if</span> (map[previous.row] &amp;&amp; map[previous.row][previous.col]) {
          map[previous.row][previous.col] = <span class="literal">null</span>;
        }
        <span class="keyword">delete</span> lastLocation[id];
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">registerLocation</span><span class="params">(oOptions)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-344">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-344">&#182;</a>
              </div>
              <p>register an object as being at x,y</p>

            </div>
            
        </li>
        
        
        <li id="section-345">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-345">&#182;</a>
              </div>
              <p>{ object, row, col }</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">var</span> o = oOptions.object,
          id = oOptions.id,
          col = oOptions.col,
          row = oOptions.row;

      <span class="keyword">if</span> (id === <span class="literal">undefined</span>) {
        console.log(<span class="string">'registerLocation: id required.'</span>);
        <span class="keyword">return</span> <span class="literal">false</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-346">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-346">&#182;</a>
              </div>
              <p>first, see if this object is already somewhere else, and remove it if so</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      clearLocation(id);</pre></div></div>
            
        </li>
        
        
        <li id="section-347">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-347">&#182;</a>
              </div>
              <p>register new location (TODO: if row/col ranges are valid?)</p>

            </div>
            
        </li>
        
        
        <li id="section-348">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-348">&#182;</a>
              </div>
              <p>console.log(&#39;registering &#39; + col + &#39;, &#39; + row);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">if</span> (map[row] === <span class="literal">undefined</span> || map[row][col] === <span class="literal">undefined</span>) {
        console.log(<span class="string">'registerLocation(): row/col '</span> + row + <span class="string">', '</span> + col + <span class="string">' is invalid?'</span>);
        <span class="keyword">return</span> <span class="literal">false</span>;
      }

      map[row][col] = o;</pre></div></div>
            
        </li>
        
        
        <li id="section-349">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-349">&#182;</a>
              </div>
              <p>and for future removal...</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      lastLocation[id] = {
        row: row,
        col: col
      };

    }

    <span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">()</span> {</span>

      <span class="keyword">var</span> i, j, k, l;

      <span class="keyword">for</span> (i=<span class="number">0</span>, j=game.data.world_rows; i&lt;j; i++) {
        map[i] = [];
        <span class="keyword">for</span> (k=<span class="number">0</span>, l=game.data.world_cols; k&lt;l; k++) {
          map[i][k] = <span class="literal">null</span>;
        }
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-350">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-350">&#182;</a>
              </div>
              <p>console.log(&#39;ObjectMap.init(): made map of &#39; + map.length + &#39; x &#39; + map[0].length);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    }

    <span class="function"><span class="keyword">function</span> <span class="title">reset</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-351">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-351">&#182;</a>
              </div>
              <p>just re-init empty array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      init();

    }

    init();

    <span class="keyword">return</span> {

      check: check,
      registerLocation: registerLocation,
      clearLocation: clearLocation,
      map: map,
      reset: reset

    };

  }

  <span class="keyword">var</span> turretGunfireTemplate = document.createElement(<span class="string">'div'</span>);
  <span class="keyword">var</span> turretGunfireTemplates = {
    up: <span class="literal">null</span>,
    down: <span class="literal">null</span>,
    left: <span class="literal">null</span>,
    right: <span class="literal">null</span>
  };

  <span class="keyword">var</span> turretGunfireCounter = <span class="number">0</span>;

  <span class="function"><span class="keyword">function</span> <span class="title">TurretGunfire</span><span class="params">(oOptions)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-352">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-352">&#182;</a>
              </div>
              <p>append to turret container element, relative to it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="keyword">var</span> o,
        data,
        objectInterface,
        directionsMap = {
          <span class="string">'left'</span>: <span class="string">'horizontal'</span>,
          <span class="string">'right'</span>: <span class="string">'horizontal'</span>,
          <span class="string">'up'</span>: <span class="string">'vertical'</span>,
          <span class="string">'down'</span>: <span class="string">'vertical'</span>
        },
        nodeParent = game.dom.world;

    data = {</pre></div></div>
            
        </li>
        
        
        <li id="section-353">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-353">&#182;</a>
              </div>
              <p>note use of worldFragment vs. parent (turret) node, testing performance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      active: <span class="literal">false</span>,
      dead: <span class="literal">false</span>,
      id: <span class="string">'turretGunfire'</span> + (turretGunfireCounter++),
      type: <span class="string">'turret-gunfire'</span>,
      subType: oOptions.direction,
      visible: <span class="literal">false</span>,
      x: oOptions.x,
      y: oOptions.y,
      w: oOptions.w,
      h: oOptions.h,
      turretX: oOptions.turretX,
      turretY: oOptions.turretY,
      xDirection: oOptions.vX,
      yDirection: oOptions.vY,
      vX: game.data.NODE_WIDTH/<span class="number">10</span> * oOptions.vX,
      vY: game.data.NODE_HEIGHT/<span class="number">10</span> * oOptions.vY,
      row: oOptions.row,
      col: oOptions.col,
      endRow: <span class="literal">null</span>,
      endCol: <span class="literal">null</span>,
      lastRow: <span class="literal">null</span>,
      lastCol: <span class="literal">null</span>,
      lastX: <span class="literal">null</span>,
      lastY: <span class="literal">null</span>,
      lastCollisionX: <span class="literal">null</span>,
      lastCollisionY: <span class="literal">null</span>,
      lastCollisionResult: <span class="literal">null</span>
    };

    <span class="function"><span class="keyword">function</span> <span class="title">hide</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (data.visible) {
        data.visible = <span class="literal">false</span>;
        <span class="keyword">if</span> (o &amp;&amp; nodeParent) {
          o.style.visibility = <span class="string">'hidden'</span>;
        }
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">show</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (!data.visible) {
        data.visible = <span class="literal">true</span>;
        <span class="keyword">if</span> (o &amp;&amp; nodeParent) {
          o.style.visibility = <span class="string">'visible'</span>;
        }
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">moveTo</span><span class="params">(x,y)</span> {</span>

      <span class="keyword">var</span> location, endX, endY;

      <span class="keyword">if</span> (!data.active) {
        <span class="keyword">return</span> <span class="literal">false</span>;
      }

      x = Math.floor(x);
      y = Math.floor(y);

      location = game.objects.collision.xyToRowCol(data.turretX + x, data.turretY + y);

      <span class="keyword">if</span> (o) {</pre></div></div>
            
        </li>
        
        
        <li id="section-354">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-354">&#182;</a>
              </div>
              <p>note position is relative to body, not parent turret node.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        <span class="keyword">if</span> (game.objects.screen.isInView(location.col, location.row)) {

          endX = data.turretX + x;
          endY = data.turretY + y;

          <span class="keyword">if</span> (USE_TRANSFORM) {

            o.style[features.transform.prop] = <span class="string">'translate3d('</span> + endX + <span class="string">'px, '</span> + endY + <span class="string">'px, 0px)'</span>;

          } <span class="keyword">else</span> {

            o.style.left = endX + <span class="string">'px'</span>;
            o.style.top = endY + <span class="string">'px'</span>;

          }

          show();

        } <span class="keyword">else</span> {

          hide();

        }

        data.lastX = x;
        data.lastY = y;

      }

      <span class="keyword">if</span> (location.col !== data.lastCol || location.row !== data.lastRow) {

        data.col = location.col;
        data.row = location.row;

        game.objects.turretGunfireMap.registerLocation({
          object: objectInterface,
          id: data.id,
          col: data.col,
          row: data.row
        });

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">moveBy</span><span class="params">(x, y)</span> {</span> <span class="comment">// TODO: labels for relative grid item values?</span></pre></div></div>
            
        </li>
        
        
        <li id="section-355">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-355">&#182;</a>
              </div>
              <p>move and do collision check?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      data.x += (x * game.objects.gameLoop.data.speedMultiplier * game.objects.gameLoop.data.GAME_SPEED);
      data.y += (y * game.objects.gameLoop.data.speedMultiplier * game.objects.gameLoop.data.GAME_SPEED);

      moveTo(data.x, data.y);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">reset</span><span class="params">()</span> {</span>

      hide();

      data.active = <span class="literal">false</span>;

      data.x = <span class="number">0</span>;
      data.y = <span class="number">0</span>;

      moveTo(data.x, data.y);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">expireCheck</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-356">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-356">&#182;</a>
              </div>
              <p>stop if it&#39;s about to hit a grid space occupied by a block (even if the block is dead.)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">var</span> shouldExpire;

      <span class="keyword">if</span> (data.xDirection === <span class="number">1</span>) {
        shouldExpire = (data.col &gt;= data.endCol);
      } <span class="keyword">else</span> <span class="keyword">if</span> (data.xDirection === -<span class="number">1</span>) {
        shouldExpire = (data.col &lt;= data.endCol);
      } <span class="keyword">else</span> <span class="keyword">if</span> (data.yDirection === <span class="number">1</span>) {
        shouldExpire = (data.row &gt;= data.endRow);
      } <span class="keyword">else</span> <span class="keyword">if</span> (data.yDirection === -<span class="number">1</span>) {
        shouldExpire = (data.row &lt;= data.endRow);
      }

      <span class="keyword">if</span> (shouldExpire) {
        reset();
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">findDestinationBlock</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-357">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-357">&#182;</a>
              </div>
              <p>based on start x/y and direction, figure out where the shot should end (before hitting a block.)
reference: data.endRow, data.endCol</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">if</span> (data.endCol !== <span class="literal">null</span> || data.endRow !== <span class="literal">null</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-358">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-358">&#182;</a>
              </div>
              <p>this has already been done.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">return</span> <span class="literal">false</span>;
      }

      <span class="keyword">var</span> col = data.col,
          row = data.row;

      <span class="keyword">do</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-359">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-359">&#182;</a>
              </div>
              <p>find the next occupied grid item.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        col += data.xDirection;
        row += data.yDirection;
      } <span class="keyword">while</span> (game.data.map[row][col] === <span class="literal">null</span> &amp;&amp; col &amp;&amp; row &amp;&amp; col &lt; game.data.world_cols &amp;&amp; row &lt; game.data.world_rows);</pre></div></div>
            
        </li>
        
        
        <li id="section-360">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-360">&#182;</a>
              </div>
              <p>if heading down or right, subtract one to prevent target overlap.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (data.xDirection === <span class="number">1</span>) {
        col--;
      } <span class="keyword">else</span> <span class="keyword">if</span> (data.yDirection === <span class="number">1</span>) {
        row--;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-361">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-361">&#182;</a>
              </div>
              <p>console.log(&#39;direction x/y, &#39; + data.xDirection + &#39;, &#39; + data.yDirection + &#39;, start / end: &#39;, data.col + &#39;, &#39; + data.row + &#39;, end: &#39; + col + &#39;, &#39; + row);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      data.endRow = row;
      data.endCol = col;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">fire</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (!data.dead &amp;&amp; !data.active) {
        findDestinationBlock();
        data.active = <span class="literal">true</span>;
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">collisionCheck</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-362">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-362">&#182;</a>
              </div>
              <p>if this object is being referenced, we already know there&#39;s a potential collision.
so just return the active state.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">return</span> (data.active &amp;&amp; data.visible);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">pixelCollisionCheck</span><span class="params">(oOptions)</span> {</span>

      <span class="keyword">var</span> hit;
      <span class="keyword">var</span> collision = game.objects.collision;

      hit = collision.checkSprites({
         object1: oOptions,
         object2: {
           type: data.type + <span class="string">'-'</span> + directionsMap[data.subType],
           x: data.turretX + data.x,
           y: data.turretY + data.y,
           w: data.w,
           h: data.h
         }
      });

      <span class="keyword">return</span> (hit &amp;&amp; data.active &amp;&amp; data.visible);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">animate</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-363">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-363">&#182;</a>
              </div>
              <p>may be inactive, or died and awaiting cleanup</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (!data.active) {
        <span class="keyword">return</span> <span class="literal">false</span>;
      }

      show();</pre></div></div>
            
        </li>
        
        
        <li id="section-364">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-364">&#182;</a>
              </div>
              <p>increase frame count, move vX + vY</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      moveBy(data.vX, data.vY);</pre></div></div>
            
        </li>
        
        
        <li id="section-365">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-365">&#182;</a>
              </div>
              <p>and do collision check?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      collisionCheck();</pre></div></div>
            
        </li>
        
        
        <li id="section-366">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-366">&#182;</a>
              </div>
              <p>should this shot &quot;expire&quot;?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      expireCheck();

    }

    <span class="function"><span class="keyword">function</span> <span class="title">die</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-367">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-367">&#182;</a>
              </div>
              <p>called when end of screen hit, or object hit (or turret dies)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      reset();

    }

<span class="comment">/*
    function destruct() {</pre></div></div>
            
        </li>
        
        
        <li id="section-368">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-368">&#182;</a>
              </div>
              <p>remove from the dom, etc.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      if (o) {
        hide();
        o = null;
      }
    }
*/

    function init() {


      if (!o) {

        if (!turretGunfireTemplates[oOptions.direction]) {</pre></div></div>
            
        </li>
        
        
        <li id="section-369">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-369">&#182;</a>
              </div>
              <p>make one, then clone for future re-use.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          o = turretGunfireTemplate.cloneNode(<span class="literal">true</span>);
          o.className = <span class="string">'turret-gunfire '</span> + oOptions.direction;
          turretGunfireTemplates[oOptions.direction] = o;

        } <span class="keyword">else</span> {

          o = turretGunfireTemplates[oOptions.direction].cloneNode(<span class="literal">true</span>);

        }

      }</pre></div></div>
            
        </li>
        
        
        <li id="section-370">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-370">&#182;</a>
              </div>
              <p>append to DOM
parentNode.appendChild(o);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      nodeParent.appendChild(o);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">restore</span><span class="params">()</span> {</span>

      data.dead = <span class="literal">false</span>;

      init();

    }</pre></div></div>
            
        </li>
        
        
        <li id="section-371">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-371">&#182;</a>
              </div>
              <p>hack/convenience: start right away?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    init();</pre></div></div>
            
        </li>
        
        
        <li id="section-372">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-372">&#182;</a>
              </div>
              <p>fire();</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    objectInterface = {
      animate: animate,
      collisionCheck: collisionCheck,
      data: data,
      die: die,
      fire: fire,
      init: init,
      pixelCollisionCheck: pixelCollisionCheck,
      reset: reset,
      restore: restore
    };

    <span class="keyword">return</span> objectInterface;

  }

  <span class="function"><span class="keyword">function</span> <span class="title">Turret</span><span class="params">(oOptions)</span> {</span>

    <span class="comment">/**
     * a component of a "base"
     * creates a TurretGunfire() instance
     */</span>

    <span class="keyword">var</span> o;</pre></div></div>
            
        </li>
        
        
        <li id="section-373">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-373">&#182;</a>
              </div>
              <p>var frameCount = 0;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="keyword">var</span> css = {
      exploding: <span class="string">'exploding'</span>,
      exploded: <span class="string">'exploded'</span>,
      dead: <span class="string">'dead'</span>
    };

    <span class="keyword">var</span> objects = {
      turretGunfire: <span class="literal">null</span>
    };

    <span class="keyword">var</span> directions = {
      x: {
        <span class="string">'left'</span>: -<span class="number">1</span>,
        <span class="string">'right'</span>: <span class="number">1</span>
      },
      y: {
        <span class="string">'up'</span>: -<span class="number">1</span>,
        <span class="string">'down'</span>: <span class="number">1</span>
      }
    };

    <span class="keyword">var</span> directionsMap = {
      <span class="string">'left'</span>: <span class="string">'vertical'</span>,
      <span class="string">'right'</span>: <span class="string">'vertical'</span>,
      <span class="string">'up'</span>: <span class="string">'horizontal'</span>,
      <span class="string">'down'</span>: <span class="string">'horizontal'</span>
    };

    <span class="keyword">var</span> _direction = oOptions.subType.split(<span class="string">' '</span>)[<span class="number">1</span>]; <span class="comment">// hack-ish :D</span>

    <span class="keyword">var</span> data = {
      col: oOptions.col,
      row: oOptions.row,
      direction: _direction,
      x: oOptions.col * game.data.NODE_WIDTH,
      y: oOptions.row * game.data.NODE_HEIGHT,
      w: game.data.NODE_WIDTH,
      h: game.data.NODE_HEIGHT,
      type: oOptions.type,
      subType: oOptions.subType,
      wallType: <span class="string">'wall'</span>, <span class="comment">// for pixel map references when dead</span>
      wallDirection: directionsMap[_direction],
      points: <span class="number">500</span>,
      dead: <span class="literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-374">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-374">&#182;</a>
              </div>
              <pre><code> firing: false,</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>      exploding: <span class="literal">false</span>,
      baseExploding: <span class="literal">false</span>,
      exploded: <span class="literal">false</span>,
      explosionFrame: <span class="number">0</span>,
      explosionFrames: <span class="number">6</span>
    };

<span class="comment">/*
    function getNode() {
      return o;
    }
*/</span></pre></div></div>
            
        </li>
        
        
        <li id="section-375">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-375">&#182;</a>
              </div>
              <p>events.gameLoop?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="function"><span class="keyword">function</span> <span class="title">maybeFire</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-376">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-376">&#182;</a>
              </div>
              <p>give &#39;er</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (!data.dead &amp;&amp; objects.turretGunfire) {
        objects.turretGunfire.fire();
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">createTurretGunfire</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (objects.turretGunfire) {
        <span class="keyword">return</span> <span class="literal">false</span>;
      }

      objects.turretGunfire = <span class="keyword">new</span> TurretGunfire({
        x: <span class="number">0</span>,
        y: <span class="number">0</span>,
        w: game.data.NODE_WIDTH,
        h: game.data.NODE_HEIGHT,
        turretX: data.x,
        turretY: data.y,
        col: data.col,
        row: data.row,
        vX: directions.x[data.direction] || <span class="number">0</span>,
        vY: directions.y[data.direction] || <span class="number">0</span>,
        direction: data.direction,
        node: o
      });

    }

    <span class="function"><span class="keyword">function</span> <span class="title">pixelCollisionCheck</span><span class="params">(oOptions)</span> {</span>

      <span class="keyword">if</span> (!data.dead) {</pre></div></div>
            
        </li>
        
        
        <li id="section-377">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-377">&#182;</a>
              </div>
              <p>hack: while alive, count all pixels as hittable and always return true.
only do pixel check when dead, and shown as a wall.
console.log(&#39;Turret pixelCollisionCheck: turret alive, force-returning true&#39;);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">return</span> <span class="literal">true</span>;
      }

      <span class="keyword">var</span> hit;
      <span class="keyword">var</span> collision = game.objects.collision;</pre></div></div>
            
        </li>
        
        
        <li id="section-378">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-378">&#182;</a>
              </div>
              <p>HACK: Note use of -type-generic-, slightly inaccurate when on -type-1 turrets that have become walls.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">var</span> wallType = (data.wallType + <span class="string">'-type-generic-'</span>+ data.wallDirection).replace(<span class="string">' '</span>, <span class="string">'-'</span>);

      hit = collision.checkSprites({
         object1: oOptions,
         object2: {
           type: wallType,
           x: data.x,
           y: data.y,
           w: data.w,
           h: data.h
         }
      });

      <span class="keyword">return</span> hit;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">explode</span><span class="params">(isBaseExplosion)</span> {</span>

      <span class="keyword">if</span> (isBaseExplosion) {
        data.baseExploding = <span class="literal">true</span>;
      }

      <span class="keyword">if</span> (data.dead &amp;&amp; !data.exploded &amp;&amp; !data.exploding) {
        data.exploding = <span class="literal">true</span>;
        utils.css.remove(o, css.dead); <span class="comment">// hack to allow bgposition to work again</span>
        utils.css.add(o, css.exploding);
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">die</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (data.dead) {
        <span class="keyword">return</span> <span class="literal">false</span>;
      }

      data.dead = <span class="literal">true</span>;

      explode();

      game.objects.gameController.addPoints(data.points);

      <span class="keyword">if</span> (features.audio) {</pre></div></div>
            
        </li>
        
        
        <li id="section-379">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-379">&#182;</a>
              </div>
              <p>make noise.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        incrementAudioPitch();
        soundSprites.playBoom(audioBoomScale[getAudioPitch()]);
      }

      game.objects.statsController.record(<span class="string">'turret'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-380">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-380">&#182;</a>
              </div>
              <p>don&#39;t let gunfire respawn?
objects.turretGunfire.data.dead = true;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    }

    <span class="function"><span class="keyword">function</span> <span class="title">dieComplete</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (o) {
        utils.css.add(o, css.dead);
      }

      data.exploding = <span class="literal">false</span>;

      <span class="keyword">if</span> (!data.baseExploding) {</pre></div></div>
            
        </li>
        
        
        <li id="section-381">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-381">&#182;</a>
              </div>
              <p>allow again, i.e., for base explosion.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        data.exploded = <span class="literal">false</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-382">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-382">&#182;</a>
              </div>
              <p>data.active = false;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    }

    <span class="function"><span class="keyword">function</span> <span class="title">hit</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-383">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-383">&#182;</a>
              </div>
              <p>boom.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      die();

    }

    <span class="function"><span class="keyword">function</span> <span class="title">stopGunfire</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (objects.turretGunfire) {
        objects.turretGunfire.die();
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">hittable</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-384">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-384">&#182;</a>
              </div>
              <p>considered hittable until exploded.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">return</span> !data.exploded;
    }

    <span class="function"><span class="keyword">function</span> <span class="title">destruct</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (o) {

        o.parentNode.removeChild(o);
        o = <span class="literal">null</span>;

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">explodeComplete</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (data.exploding) {

        data.exploding = <span class="literal">false</span>;
        data.exploded = <span class="literal">true</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-385">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-385">&#182;</a>
              </div>
              <p>utils.css.swap(o, css.exploding, css.exploded);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        utils.css.remove(o, css.exploding);

        dieComplete();

        <span class="keyword">if</span> (data.baseExploding) {

          stopGunfire();</pre></div></div>
            
        </li>
        
        
        <li id="section-386">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-386">&#182;</a>
              </div>
              <p>and self-destruct.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          utils.css.add(o, css.exploded);
          destruct();

        } <span class="comment">// else, only the turret is dead.</span>

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">animate</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-387">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-387">&#182;</a>
              </div>
              <p>called from main game loop
fire and animate</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">if</span> (objects.turretGunfire) {
        objects.turretGunfire.animate();
      }

      <span class="keyword">if</span> (data.exploding) {</pre></div></div>
            
        </li>
        
        
        <li id="section-388">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-388">&#182;</a>
              </div>
              <p>frameCount++;</p>

            </div>
            
        </li>
        
        
        <li id="section-389">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-389">&#182;</a>
              </div>
              <p>if (frameCount % 2 === 0) {</p>

            </div>
            
        </li>
        
        
        <li id="section-390">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-390">&#182;</a>
              </div>
              <p>individual turret + base destruction animation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
          o.style.backgroundPosition = <span class="string">'0px '</span> + (-<span class="number">32</span> * data.explosionFrame) + <span class="string">'px'</span>;

          data.explosionFrame++;

          <span class="keyword">if</span> (data.explosionFrame &gt;= data.explosionFrames) {

            data.explosionFrame = <span class="number">0</span>;

            <span class="keyword">if</span> (!data.baseExploding) {</pre></div></div>
            
        </li>
        
        
        <li id="section-391">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-391">&#182;</a>
              </div>
              <p>end the animation.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>              explodeComplete();

            }

          }</pre></div></div>
            
        </li>
        
        
        <li id="section-392">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-392">&#182;</a>
              </div>
              <p>}</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (!o) {

        o = makeGridItem({
          x: data.col,
          y: data.row,
          type: data.type,
          subType: data.subType
        });

      }

      createTurretGunfire();

      dom.worldFragment.appendChild(o);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">restore</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-393">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-393">&#182;</a>
              </div>
              <p>reset and re-init</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">if</span> (o) {</pre></div></div>
            
        </li>
        
        
        <li id="section-394">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-394">&#182;</a>
              </div>
              <p>additional hack: reset bgpos, let CSS take over</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        o.style.backgroundPosition = <span class="string">''</span>;
      }

      <span class="keyword">if</span> (data.dead) {
        data.dead = <span class="literal">false</span>;
        <span class="keyword">if</span> (o) {
          utils.css.remove(o, css.dead);
        }
      }

      <span class="keyword">if</span> (data.exploded) {
        data.exploded = <span class="literal">false</span>;
        <span class="keyword">if</span> (o) {
          utils.css.remove(o, css.exploded);
        }
      }

      data.baseExploding = <span class="literal">false</span>;
      data.exploding = <span class="literal">false</span>;
      data.explosionFrame = <span class="number">0</span>;

      init();

    }

    init();

    <span class="keyword">return</span> {
      animate: animate,
      data: data,
      die: die,
      destruct: destruct,
      explode: explode,
      explodeComplete: explodeComplete,
      hit: hit,
      hittable: hittable,
      maybeFire: maybeFire,
      objects: objects,
      pixelCollisionCheck: pixelCollisionCheck,
      restore: restore
    };

  }

  <span class="function"><span class="keyword">function</span> <span class="title">Base</span><span class="params">()</span> {</span>

    <span class="comment">/**
     * an object made up of walls and turrets
     * explodes once all turrets have been destroyed
     */</span>

    <span class="keyword">var</span> objects = {
      walls: [],
      turrets: []
    };

    <span class="keyword">var</span> data = {
      active: <span class="literal">false</span>,
      dead: <span class="literal">false</span>,
      deadTurretCount: <span class="number">0</span>,
      frame: <span class="number">0</span>,
      dying: <span class="literal">false</span>,
      points: <span class="number">10000</span>
    };

<span class="comment">/*
    var css = {

      wall: {
        base: 'wall',
        up: 'wall-up',
        down: 'wall-down',
        left: 'wall-left',
        right: 'wall-right'
      },

      turret: {
        base: 'turret',
        up: 'turret-up',
        down: 'turret-down',
        left: 'turret-left',
        right: 'turret-right'
      }

    };
*/</span>
    <span class="keyword">var</span> typeToConstructor = {
      <span class="string">'wall'</span>: BaseWall,
      <span class="string">'turret'</span>: Turret
    };

    <span class="keyword">var</span> typeToArray = {</pre></div></div>
            
        </li>
        
        
        <li id="section-395">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-395">&#182;</a>
              </div>
              <p>for storing in objects array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="string">'wall'</span>: objects.walls,
      <span class="string">'turret'</span>: objects.turrets
    };

    <span class="function"><span class="keyword">function</span> <span class="title">addItem</span><span class="params">(oOptions)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-396">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-396">&#182;</a>
              </div>
              <p>{type, subType, col, row}</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">var</span> itemType = oOptions.type,
          itemArray = typeToArray[itemType], <span class="comment">// eg. 'wall' -&gt; objects.walls[]</span>
          TargetClass = typeToConstructor[itemType],
          baseItemObject;

      baseItemObject = <span class="keyword">new</span> TargetClass(oOptions);
      itemArray.push(baseItemObject);</pre></div></div>
            
        </li>
        
        
        <li id="section-397">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-397">&#182;</a>
              </div>
              <p>mark as active, since an item was registered</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      data.active = <span class="literal">true</span>;

      <span class="keyword">return</span> baseItemObject;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">pulse</span><span class="params">()</span> {</span>

      <span class="keyword">var</span> i, j;

      <span class="keyword">if</span> (!data.active || data.dying || data.dead) {
        <span class="keyword">return</span> <span class="literal">false</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-398">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-398">&#182;</a>
              </div>
              <p>maybe fire</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">for</span> (i=<span class="number">0</span>, j=objects.turrets.length; i&lt;j; i++) {
        objects.turrets[i].maybeFire();
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">dieComplete</span><span class="params">()</span> {</span>

        <span class="keyword">var</span> i, j;

        <span class="keyword">if</span> (data.dead) {
          <span class="keyword">return</span> <span class="literal">false</span>;
        }

        data.dying = <span class="literal">false</span>;
        data.dead = <span class="literal">true</span>;
        data.frame = <span class="number">0</span>;

        <span class="keyword">for</span> (i=<span class="number">0</span>, j=objects.turrets.length; i&lt;j; i++) {
          objects.turrets[i].explodeComplete();
        }

        <span class="keyword">for</span> (i=<span class="number">0</span>, j=objects.walls.length; i&lt;j; i++) {
          objects.walls[i].explodeComplete();
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-399">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-399">&#182;</a>
              </div>
              <p>ensure the world background resets</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        game.dom.world.style.backgroundColor = <span class="string">'transparent'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-400">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-400">&#182;</a>
              </div>
              <p>notify the controller, perhaps finish the level etc</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        game.objects.baseController.events.baseDied();

    }

    <span class="function"><span class="keyword">function</span> <span class="title">dieExplosion</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-401">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-401">&#182;</a>
              </div>
              <p>mark all elements as dying, begin exploding animation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">var</span> i, j;

      <span class="keyword">for</span> (i=<span class="number">0</span>, j=objects.turrets.length; i&lt;j; i++) {
        objects.turrets[i].explode(<span class="literal">true</span>);
      }

      <span class="keyword">for</span> (i=<span class="number">0</span>, j=objects.walls.length; i&lt;j; i++) {
        objects.walls[i].explode();
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">die</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (!data.active || data.dying || data.dead) {
        <span class="keyword">return</span> <span class="literal">true</span>;
      }

      <span class="keyword">if</span> (features.audio) {
        soundManager.play(<span class="string">'base-explode'</span>);
      }

      data.dying = <span class="literal">true</span>;

      game.objects.gameController.addPoints(data.points);</pre></div></div>
            
        </li>
        
        
        <li id="section-402">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-402">&#182;</a>
              </div>
              <p>increase ship lives, smartbombs etc. as a reward</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      game.objects.gameController.data.lives += <span class="number">3</span>;
      game.objects.ship.data.smartbombs += <span class="number">2</span>;
      game.objects.gameController.refreshUI();

      game.objects.statsController.record(<span class="string">'base'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-403">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-403">&#182;</a>
              </div>
              <ul>
<li>BOOM *</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>      setTimeout(dieExplosion, <span class="number">950</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-404">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-404">&#182;</a>
              </div>
              <p>... and disappear.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      setTimeout(dieComplete, <span class="number">2500</span>);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">dieCheck</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-405">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-405">&#182;</a>
              </div>
              <p>if all turrets shot, then BOOM</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (!data.active || data.dying || data.dead) {
        <span class="keyword">return</span> <span class="literal">true</span>;
      }

      <span class="keyword">if</span> (objects.turrets.length &amp;&amp; data.deadTurretCount &gt;= objects.turrets.length) {</pre></div></div>
            
        </li>
        
        
        <li id="section-406">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-406">&#182;</a>
              </div>
              <p>boom!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        die();
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">reset</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-407">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-407">&#182;</a>
              </div>
              <p>bring the base back to life, per se</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">if</span> (data.active) {

        data.dead = <span class="literal">false</span>;
        data.deadTurretCount = <span class="number">0</span>;

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">animate</span><span class="params">()</span> {</span>

      <span class="keyword">var</span> i, j;

      <span class="keyword">if</span> (!data.active || (data.dead &amp;&amp; !data.dying)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-408">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-408">&#182;</a>
              </div>
              <p>nothing to do.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">return</span> <span class="literal">false</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-409">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-409">&#182;</a>
              </div>
              <p>animate turret gunfire, OR explosion / death sequence?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">if</span> (!data.dying) {</pre></div></div>
            
        </li>
        
        
        <li id="section-410">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-410">&#182;</a>
              </div>
              <p>reset...</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        data.deadTurretCount = <span class="number">0</span>;

        <span class="keyword">for</span> (i=<span class="number">0</span>, j=objects.turrets.length; i&lt;j; i++) {
          objects.turrets[i].animate();
          data.deadTurretCount += objects.turrets[i].data.dead;
        }

        dieCheck();

      } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-411">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-411">&#182;</a>
              </div>
              <p>base dying/explosion sequence</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        <span class="keyword">for</span> (i=<span class="number">0</span>, j=objects.turrets.length; i&lt;j; i++) {
          objects.turrets[i].animate();
        }

        <span class="keyword">for</span> (i=<span class="number">0</span>, j=objects.walls.length; i&lt;j; i++) {
          objects.walls[i].animate();
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-412">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-412">&#182;</a>
              </div>
              <p>flash screen colors, too, once explosion is active (hack)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        <span class="keyword">if</span> (objects.walls[<span class="number">0</span>].data.exploding) {

          game.dom.world.style.backgroundColor = (data.frame % <span class="number">2</span> === <span class="number">0</span> ? <span class="string">'#660000'</span> : <span class="string">'transparent'</span>);
          data.frame++;

        }

      }

    }

    <span class="keyword">return</span> {
      animate: animate,
      addItem: addItem,
      data: data,
      objects: objects,
      pulse: pulse,
      reset: reset
    };

  }

  <span class="function"><span class="keyword">function</span> <span class="title">BaseController</span><span class="params">()</span> {</span>

    <span class="comment">/**
     * all your Base() are belong to BaseController().
     * enumerates bases, updates and so forth.
     */</span>

    <span class="comment">/**
     * BASE TYPES
     * UTF8 box-drawing reference: http://en.wikipedia.org/wiki/Box-drawing_characters
     *
     * ┌ ─ ┬ ┐
     * │ ─ │ │
     * ├ ─ ┼ ┤
     * └ ─ ┴ ┘
     *
     * ╔ ═ ╦ ╗
     * ║   ║ ║
     * ╠ ═ ╬ ╣
     * ╚ ═ ╩ ╝
     *
     * ┏ ━ ┳ ┓
     * ┃ ━ ┃ ┃
     * ┣ ━ ╋ ┫
     * ┗ ━ ┻ ┛
     *
     * ╓ ─ ╥ ╖
     * ║ ─ ║ ║
     * ╟ ─ ╫ ╢
     * ╙ ─ ╨ ╜
     *
     */</span>

    <span class="keyword">var</span> baseItemMap = {</pre></div></div>
            
        </li>
        
        
        <li id="section-413">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-413">&#182;</a>
              </div>
              <p>type 1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="string">'┌'</span>: [<span class="string">'type-1'</span>, <span class="string">'wall'</span>, <span class="string">'upRight'</span>],
      <span class="string">'┐'</span>: [<span class="string">'type-1'</span>, <span class="string">'wall'</span>, <span class="string">'rightDown'</span>],
      <span class="string">'└'</span>: [<span class="string">'type-1'</span>, <span class="string">'wall'</span>, <span class="string">'downRight'</span>],
      <span class="string">'┘'</span>: [<span class="string">'type-1'</span>, <span class="string">'wall'</span>, <span class="string">'downLeft'</span>],
      <span class="string">'-'</span>: [<span class="string">'type-1'</span>, <span class="string">'wall'</span>, <span class="string">'horizontal'</span>], <span class="comment">// regular dash - used here to avoid conflict</span>
      <span class="string">'|'</span>: [<span class="string">'type-1'</span>, <span class="string">'wall'</span>, <span class="string">'vertical'</span>], <span class="comment">// regular pipe character</span>
      <span class="string">'┴'</span>: [<span class="string">'type-1'</span>, <span class="string">'turret'</span>, <span class="string">'up'</span>],
      <span class="string">'├'</span>: [<span class="string">'type-1'</span>, <span class="string">'turret'</span>, <span class="string">'right'</span>],
      <span class="string">'┬'</span>: [<span class="string">'type-1'</span>, <span class="string">'turret'</span>, <span class="string">'down'</span>],
      <span class="string">'┤'</span>: [<span class="string">'type-1'</span>, <span class="string">'turret'</span>, <span class="string">'left'</span>],</pre></div></div>
            
        </li>
        
        
        <li id="section-414">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-414">&#182;</a>
              </div>
              <p>type 2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="string">'╔'</span>: [<span class="string">'type-2'</span>, <span class="string">'wall'</span>, <span class="string">'upRight'</span>],
      <span class="string">'╗'</span>: [<span class="string">'type-2'</span>, <span class="string">'wall'</span>, <span class="string">'rightDown'</span>],
      <span class="string">'╚'</span>: [<span class="string">'type-2'</span>, <span class="string">'wall'</span>, <span class="string">'downRight'</span>],
      <span class="string">'╝'</span>: [<span class="string">'type-2'</span>, <span class="string">'wall'</span>, <span class="string">'downLeft'</span>],
      <span class="string">'═'</span>: [<span class="string">'type-2'</span>, <span class="string">'wall'</span>, <span class="string">'horizontal'</span>],
      <span class="string">'│'</span>: [<span class="string">'type-2'</span>, <span class="string">'wall'</span>, <span class="string">'vertical'</span>], <span class="comment">// not sure why ║ conflicted with type 4, but eh.</span>
      <span class="string">'╩'</span>: [<span class="string">'type-2'</span>, <span class="string">'turret'</span>, <span class="string">'up'</span>],
      <span class="string">'╠'</span>: [<span class="string">'type-2'</span>, <span class="string">'turret'</span>, <span class="string">'right'</span>],
      <span class="string">'╦'</span>: [<span class="string">'type-2'</span>, <span class="string">'turret'</span>, <span class="string">'down'</span>],
      <span class="string">'╣'</span>: [<span class="string">'type-2'</span>, <span class="string">'turret'</span>, <span class="string">'left'</span>],</pre></div></div>
            
        </li>
        
        
        <li id="section-415">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-415">&#182;</a>
              </div>
              <p>type 3</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="string">'┏'</span>: [<span class="string">'type-3'</span>, <span class="string">'wall'</span>, <span class="string">'upRight'</span>],
      <span class="string">'┓'</span>: [<span class="string">'type-3'</span>, <span class="string">'wall'</span>, <span class="string">'rightDown'</span>],
      <span class="string">'┗'</span>: [<span class="string">'type-3'</span>, <span class="string">'wall'</span>, <span class="string">'downRight'</span>],
      <span class="string">'┛'</span>: [<span class="string">'type-3'</span>, <span class="string">'wall'</span>, <span class="string">'downLeft'</span>],
      <span class="string">'━'</span>: [<span class="string">'type-3'</span>, <span class="string">'wall'</span>, <span class="string">'horizontal'</span>],
      <span class="string">'┃'</span>: [<span class="string">'type-3'</span>, <span class="string">'wall'</span>, <span class="string">'vertical'</span>],
      <span class="string">'┻'</span>: [<span class="string">'type-3'</span>, <span class="string">'turret'</span>, <span class="string">'up'</span>],
      <span class="string">'┣'</span>: [<span class="string">'type-3'</span>, <span class="string">'turret'</span>, <span class="string">'right'</span>],
      <span class="string">'┳'</span>: [<span class="string">'type-3'</span>, <span class="string">'turret'</span>, <span class="string">'down'</span>],
      <span class="string">'┫'</span>: [<span class="string">'type-3'</span>, <span class="string">'turret'</span>, <span class="string">'left'</span>],</pre></div></div>
            
        </li>
        
        
        <li id="section-416">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-416">&#182;</a>
              </div>
              <p>type 4</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="string">'╓'</span>: [<span class="string">'type-4'</span>, <span class="string">'wall'</span>, <span class="string">'upRight'</span>],
      <span class="string">'╖'</span>: [<span class="string">'type-4'</span>, <span class="string">'wall'</span>, <span class="string">'rightDown'</span>],
      <span class="string">'╙'</span>: [<span class="string">'type-4'</span>, <span class="string">'wall'</span>, <span class="string">'downRight'</span>],
      <span class="string">'╜'</span>: [<span class="string">'type-4'</span>, <span class="string">'wall'</span>, <span class="string">'downLeft'</span>],
      <span class="string">'─'</span>: [<span class="string">'type-4'</span>, <span class="string">'wall'</span>, <span class="string">'horizontal'</span>],
      <span class="string">'║'</span>: [<span class="string">'type-4'</span>, <span class="string">'wall'</span>, <span class="string">'vertical'</span>],
      <span class="string">'╨'</span>: [<span class="string">'type-4'</span>, <span class="string">'turret'</span>, <span class="string">'up'</span>],
      <span class="string">'╟'</span>: [<span class="string">'type-4'</span>, <span class="string">'turret'</span>, <span class="string">'right'</span>],
      <span class="string">'╥'</span>: [<span class="string">'type-4'</span>, <span class="string">'turret'</span>, <span class="string">'down'</span>],
      <span class="string">'╢'</span>: [<span class="string">'type-4'</span>, <span class="string">'turret'</span>, <span class="string">'left'</span>]

    };

    <span class="keyword">var</span> objects = {
      bases: [],
      basesHash: {}
    };

    <span class="keyword">var</span> data = {
      activeBaseCount: <span class="number">0</span>,
      deadBaseCount: <span class="number">0</span>
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-417">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-417">&#182;</a>
              </div>
              <p>events.loop? animate()?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> events = {

      animate: <span class="keyword">function</span>() {

        <span class="keyword">var</span> i, j;

        <span class="keyword">for</span> (i=<span class="number">0</span>, j=objects.bases.length; i&lt;j; i++) {
          objects.bases[i].animate();
        }

      },

      baseDied: <span class="keyword">function</span>() {

        <span class="comment">/**
         * callback for a base explosion.
         * if all basese are dead, end the level.
         * otherwise, advance the pulse stage.
         */</span>

        data.deadBaseCount++;

        <span class="keyword">if</span> (data.deadBaseCount &gt;= data.activeBaseCount) {</pre></div></div>
            
        </li>
        
        
        <li id="section-418">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-418">&#182;</a>
              </div>
              <p>end the level.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          game.objects.levelEndSequence.start();

        } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-419">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-419">&#182;</a>
              </div>
              <p>make the world faster, etc.?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          game.objects.gameLoop.nextPulseStage();</pre></div></div>
            
        </li>
        
        
        <li id="section-420">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-420">&#182;</a>
              </div>
              <p>and resume (seems redundant)
TODO: Remove this.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          game.objects.gameLoop.startTimer();

        }

      },

      pulse: <span class="keyword">function</span>() {

        <span class="keyword">var</span> i, j;

        <span class="keyword">for</span> (i=<span class="number">0</span>, j=objects.bases.length; i&lt;j; i++) {
          objects.bases[i].pulse();
        }

      }

    };

    <span class="function"><span class="keyword">function</span> <span class="title">createBase</span><span class="params">(type)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-421">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-421">&#182;</a>
              </div>
              <p>NOTE: Only one instance of each base type allowed.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">var</span> newBase = <span class="keyword">new</span> Base(type);
      objects.bases.push(newBase);
      objects.basesHash[type] = newBase;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">createBases</span><span class="params">()</span> {</span>

      createBase(<span class="string">'type-1'</span>);
      createBase(<span class="string">'type-2'</span>);
      createBase(<span class="string">'type-3'</span>);
      createBase(<span class="string">'type-4'</span>);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">addBaseItem</span><span class="params">(char, col, row)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-422">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-422">&#182;</a>
              </div>
              <p>given a map character, create and add a wall or turret on the proper base object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">var</span> itemData,
          baseType,
          baseItemObject;</pre></div></div>
            
        </li>
        
        
        <li id="section-423">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-423">&#182;</a>
              </div>
              <p>sanity check</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (baseItemMap[char] === <span class="literal">undefined</span>) {
        console.log(<span class="string">'addBaseItem('</span>+char+<span class="string">'): Illegal map character.'</span>);
        <span class="keyword">return</span> <span class="literal">false</span>;
      }

      itemData = baseItemMap[char];</pre></div></div>
            
        </li>
        
        
        <li id="section-424">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-424">&#182;</a>
              </div>
              <p>we now know what base style, type and &quot;direction&quot; of object we&#39;re dealing with.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      baseType = itemData[<span class="number">0</span>];</pre></div></div>
            
        </li>
        
        
        <li id="section-425">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-425">&#182;</a>
              </div>
              <p>console.log(&#39;adding base item for character &quot;&#39; + char + &#39;&quot; at row &#39; + row + &#39;, col &#39; + col + &#39;: &#39; + itemData.join(&#39;, &#39;));</p>

            </div>
            
        </li>
        
        
        <li id="section-426">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-426">&#182;</a>
              </div>
              <p>add one wall or turret to a base object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      baseItemObject = objects.basesHash[baseType].addItem({
        type: itemData[<span class="number">1</span>],
        subType: baseType + <span class="string">' '</span> + itemData[<span class="number">2</span>], <span class="comment">// eg. type-0 wall downRight</span>
        col: col,
        row: row
      });

      <span class="keyword">return</span> baseItemObject;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">isBaseItem</span><span class="params">(char)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-427">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-427">&#182;</a>
              </div>
              <p>is this a base map character?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">return</span> (char &amp;&amp; baseItemMap[char] !== <span class="literal">undefined</span>);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">findActiveBases</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-428">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-428">&#182;</a>
              </div>
              <p>after parsing map, find out which bases are actually &quot;in use.&quot;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">var</span> i, j;

      data.activeBaseCount = <span class="number">0</span>;

      <span class="keyword">for</span> (i=<span class="number">0</span>, j=objects.bases.length; i&lt;j; i++) {
        <span class="keyword">if</span> (objects.bases[i].data.active) {
          data.activeBaseCount++;
        }
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">reset</span><span class="params">()</span> {</span>

      <span class="keyword">var</span> i, j;</pre></div></div>
            
        </li>
        
        
        <li id="section-429">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-429">&#182;</a>
              </div>
              <p>revert all bases, etc.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      data.deadBaseCount = <span class="number">0</span>;

      <span class="keyword">for</span> (i=<span class="number">0</span>, j=objects.bases.length; i&lt;j; i++) {
        objects.bases[i].reset();
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">()</span> {</span>

      createBases();

    }

    <span class="keyword">return</span> {
      events: events,
      findActiveBases: findActiveBases,
      isBaseItem: isBaseItem,
      addBaseItem: addBaseItem,
      init: init,
      objects: objects,
      reset: reset
    };

  }

  <span class="function"><span class="keyword">function</span> <span class="title">FocusMonitor</span><span class="params">()</span> {</span>

    <span class="comment">/**
     * watches window blur/focus, pauses/resumes the game etc.
     */</span>

    <span class="keyword">var</span> events = {

      focus: <span class="keyword">function</span>() {

        objects.gameLoop.resume();

      },

      blur: <span class="keyword">function</span>() {

        objects.keyboardMonitor.releaseAll();
        objects.gameLoop.pause();

      }

    };

    <span class="function"><span class="keyword">function</span> <span class="title">addEvents</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-430">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-430">&#182;</a>
              </div>
              <p>release keys, mute audio and pause game on window blur</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (isIE) {

        utils.events.add(document, <span class="string">'focusin'</span>, events.focus);
        utils.events.add(document, <span class="string">'focusout'</span>, events.blur);

      } <span class="keyword">else</span> {

        utils.events.add(window, <span class="string">'focus'</span>, events.focus);
        utils.events.add(window, <span class="string">'blur'</span>, events.blur);

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">()</span> {</span>

      addEvents();

    }

    <span class="keyword">return</span> {

      init: init

    };

  }

  <span class="function"><span class="keyword">function</span> <span class="title">GameController</span><span class="params">()</span> {</span>

    <span class="keyword">var</span> data = {
      score: <span class="number">0</span>,
      lives: DEFAULT_LIVES
    };

    <span class="keyword">var</span> dom = {
      lives: <span class="literal">null</span>,
      points: <span class="literal">null</span>,
      smartbombs: <span class="literal">null</span>
    };

    <span class="function"><span class="keyword">function</span> <span class="title">getScore</span><span class="params">()</span> {</span>

      <span class="keyword">return</span> data.score;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">updatePoints</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (dom.points) {
        dom.points.innerHTML = data.score;
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">addPoints</span><span class="params">(points)</span> {</span>

      data.score += points;
      updatePoints();

    }

    <span class="function"><span class="keyword">function</span> <span class="title">updateLives</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (dom.lives) {
        dom.lives.innerHTML = data.lives;
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">updateSmartbombs</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (dom.smartbombs) {
        dom.smartbombs.innerHTML = game.objects.ship.data.smartbombs;
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">shipDied</span><span class="params">()</span> {</span>

      <span class="keyword">var</span> o,
          oStats,
          oStatsBody,
          statsData;

      <span class="keyword">var</span> isGameOver = <span class="literal">false</span>;

      data.lives--;

      updateLives();

      <span class="keyword">if</span> (data.lives &lt;= <span class="number">0</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-431">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-431">&#182;</a>
              </div>
              <p>game over man, game over!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        o = document.getElementById(<span class="string">'game-over-screen'</span>);
        oStats = document.getElementById(<span class="string">'game-over-stats'</span>);
        oStatsBody = o.getElementsByTagName(<span class="string">'div'</span>)[<span class="number">0</span>];
        statsData = game.objects.statsController.getStats();

        isGameOver = <span class="literal">true</span>;

        oStats.innerHTML = [
          <span class="string">'&lt;br&gt;'</span>,
          <span class="string">'&lt;p&gt;Your score: '</span> + objects.gameController.getScore() + <span class="string">' points&lt;/p&gt;'</span>,
          <span class="string">'&lt;br&gt;'</span>,
          <span class="string">'&lt;p&gt;Destruction report:&lt;/p&gt;'</span>,
          <span class="string">'&lt;div class="fixed"&gt;&lt;div class="icon type-2 block"&gt;&lt;/div&gt; Blocks: '</span> + statsData.block + <span class="string">'&lt;/div&gt;'</span>,
          <span class="string">'&lt;div class="fixed"&gt;&lt;div class="icon type-1 turret right"&gt;&lt;/div&gt; Turrets: '</span> + statsData.turret + <span class="string">'&lt;/div&gt;'</span>,
          <span class="string">'&lt;div class="fixed"&gt;&lt;div class="icon type-1 wall rightDown"&gt;&lt;/div&gt; Bases: '</span> + statsData.base + <span class="string">'&lt;/div&gt;'</span>,
          <span class="string">'&lt;div class="fixed bad-guy smiley"&gt;&lt;div class="icon"&gt;&lt;/div&gt; Bad guys: '</span> + statsData.badGuy + <span class="string">'&lt;/div&gt;'</span>
        ].join(<span class="string">''</span>);
        
        o.style.display = <span class="string">'block'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-432">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-432">&#182;</a>
              </div>
              <p>position</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        oStatsBody.style.marginTop = -parseInt(oStats.offsetHeight/<span class="number">2</span>, <span class="number">10</span>) + <span class="string">'px'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-433">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-433">&#182;</a>
              </div>
              <p>objects.gameLoop.pause();</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        document.onclick = <span class="keyword">function</span>() {</pre></div></div>
            
        </li>
        
        
        <li id="section-434">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-434">&#182;</a>
              </div>
              <p>game reset? title screen?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
          document.onclick = <span class="literal">null</span>;

          o.style.display = <span class="string">'none'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-435">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-435">&#182;</a>
              </div>
              <p>reset the whole (entire) game</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
          survivor.reset();

          objects.gameLoop.resume();

        };
        
      }

      <span class="keyword">return</span> isGameOver;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">refreshUI</span><span class="params">()</span> {</span>

      updateLives();
      updatePoints();
      updateSmartbombs();

    }

    <span class="function"><span class="keyword">function</span> <span class="title">reset</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-436">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-436">&#182;</a>
              </div>
              <p>assign defaults to data like lives, smartbombs etc.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      game.objects.ship.data.smartbombs = DEFAULT_SMARTBOMBS;
      data.score = <span class="number">0</span>;
      data.lives = DEFAULT_LIVES;

      refreshUI();

    }

    <span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">()</span> {</span>

      dom.lives = document.getElementById(<span class="string">'lives'</span>);
      dom.points = document.getElementById(<span class="string">'points'</span>);
      dom.smartbombs = document.getElementById(<span class="string">'smartbombs'</span>);

      refreshUI();

    }

    <span class="keyword">return</span> {

      addPoints: addPoints,
      data: data,
      init: init,
      getScore: getScore,
      refreshUI: refreshUI,
      reset: reset,
      shipDied: shipDied,
      updateSmartbombs: updateSmartbombs

    };

  }

  <span class="function"><span class="keyword">function</span> <span class="title">SmartbombController</span><span class="params">()</span> {</span>

    <span class="keyword">var</span> data = {
      active: <span class="literal">false</span>,
      flashColor: <span class="string">'#fff'</span>,
      frame: <span class="number">0</span>,
      frameCount: <span class="number">4</span>
    };

    <span class="function"><span class="keyword">function</span> <span class="title">animate</span><span class="params">()</span> {</span>

      <span class="keyword">if</span> (data.active) {

        data.frame++;

        <span class="keyword">if</span> (data.frame &lt;= data.frameCount) {

          game.dom.world.style.backgroundColor = (data.frame % <span class="number">2</span> === <span class="number">0</span> ? data.flashColor : <span class="string">'transparent'</span>);

        } <span class="keyword">else</span> {

          game.dom.world.style.backgroundColor = <span class="string">'transparent'</span>;

          data.frame = <span class="number">0</span>;

          data.active = <span class="literal">false</span>;

        }

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">fire</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-437">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-437">&#182;</a>
              </div>
              <p>play noise, decrement and so forth</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="keyword">if</span> (!data.active &amp;&amp; game.objects.ship.data.smartbombs &gt; <span class="number">0</span>) {

        data.active = <span class="literal">true</span>;

        game.objects.ship.data.smartbombs--;</pre></div></div>
            
        </li>
        
        
        <li id="section-438">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-438">&#182;</a>
              </div>
              <p>take out any active bad guys</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        game.objects.badGuyController.killAll();</pre></div></div>
            
        </li>
        
        
        <li id="section-439">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-439">&#182;</a>
              </div>
              <p>update the status bar UI</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        game.objects.gameController.updateSmartbombs();

      } <span class="keyword">else</span> {

        console.log(<span class="string">'no more smartbombs'</span>);

      }

    }

    <span class="keyword">return</span> {
      animate: animate,
      fire: fire
    };

  }

  <span class="function"><span class="keyword">function</span> <span class="title">StatsController</span><span class="params">()</span> {</span>

    <span class="keyword">var</span> data = {
      block: <span class="number">0</span>,
      badGuy: <span class="number">0</span>,
      turret: <span class="number">0</span>,
      base: <span class="number">0</span>
    };

    <span class="function"><span class="keyword">function</span> <span class="title">record</span><span class="params">(type, amount)</span> {</span>

      <span class="keyword">if</span> (data[type] !== <span class="literal">undefined</span>) {
        data[type] += (amount || <span class="number">1</span>);
      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">getStats</span><span class="params">()</span> {</span>
      <span class="keyword">return</span> data;
    }

    <span class="function"><span class="keyword">function</span> <span class="title">reset</span><span class="params">()</span> {</span>

      data.blocks = <span class="number">0</span>;
      data.badGuys = <span class="number">0</span>;
      data.turrets = <span class="number">0</span>;
      data.bases = <span class="number">0</span>;

    }    

    <span class="keyword">return</span> {
      getStats: getStats,
      record: record,
      reset: reset
    };

  }

  (<span class="function"><span class="keyword">function</span> <span class="title">debugPanel</span><span class="params">()</span> {</span>

    <span class="keyword">var</span> data = {

      timer: <span class="literal">null</span>,
      timerInterval: <span class="number">1000</span>

    };

    <span class="keyword">var</span> dom = {

      divCount: <span class="literal">null</span>,
      divBlockCount: <span class="literal">null</span>,
      divWallCount: <span class="literal">null</span>,
      divTurretCount: <span class="literal">null</span>,
      turretFireCount: <span class="literal">null</span>,
      spaceballCount: <span class="literal">null</span>,
      badGuyCount: <span class="literal">null</span>

    };

    <span class="function"><span class="keyword">function</span> <span class="title">handleChange</span><span class="params">(e)</span> {</span>

      e = e || window.event;

      <span class="keyword">if</span> (e.target &amp;&amp; e.target.type === <span class="string">'checkbox'</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-440">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-440">&#182;</a>
              </div>
              <p>depending on checked state, add or remove the target ID as a className on the world.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        utils.css[e.target.checked ? <span class="string">'add'</span> : <span class="string">'remove'</span>](game.dom.world, e.target.id);

      }

    }

    <span class="function"><span class="keyword">function</span> <span class="title">refreshStats</span><span class="params">()</span> {</span>

      <span class="keyword">var</span> i, j, k, l,
          onScreen = <span class="number">0</span>,
          bases;

      bases = game.objects.baseController.objects.bases;

      <span class="keyword">for</span> (i=<span class="number">0</span>, j=bases.length; i&lt;j; i++) {
        <span class="keyword">for</span> (k=<span class="number">0</span>, l=bases[i].objects.turrets.length; k&lt;l; k++) {
          <span class="keyword">if</span> (!bases[i].objects.turrets[k].objects.turretGunfire.data.dead &amp;&amp; game.objects.screen.isInView(bases[i].objects.turrets[k].objects.turretGunfire.data.col, bases[i].objects.turrets[k].objects.turretGunfire.data.row)) {
            onScreen++;
          }
        }
      }

      dom.divCount.innerHTML = document.querySelectorAll(<span class="string">'#world div'</span>).length;

      dom.divBlockCount.innerHTML = document.querySelectorAll(<span class="string">'#world div.block'</span>).length;

      dom.divWallCount.innerHTML = document.querySelectorAll(<span class="string">'#world div.wall'</span>).length - document.querySelectorAll(<span class="string">'#world div.wall.exploded'</span>).length;

      dom.divTurretCount.innerHTML = document.querySelectorAll(<span class="string">'#world div.turret'</span>).length;

      dom.turretFireCount.innerHTML = onScreen;

      onScreen = <span class="number">0</span>;

      <span class="keyword">for</span> (i=<span class="number">0</span>, j=game.objects.spaceBalls.length; i&lt;j; i++) {
        <span class="keyword">if</span> (game.objects.screen.isInView(game.objects.spaceBalls[i].data.col, game.objects.spaceBalls[i].data.row)) {
          onScreen++;
        }
      }

      dom.spaceballCount.innerHTML = onScreen;

      onScreen = <span class="number">0</span>;

      <span class="keyword">for</span> (i=<span class="number">0</span>, j=game.objects.badGuyController.objects.badGuys.length; i&lt;j; i++) {
        <span class="keyword">if</span> (game.objects.badGuyController.objects.badGuys[i].data.active &amp;&amp; game.objects.screen.isInView(game.objects.badGuyController.objects.badGuys[i].data.col, game.objects.badGuyController.objects.badGuys[i].data.row)) {
          onScreen++;
        }
      }

      dom.badGuyCount.innerHTML = onScreen;

    }

    <span class="function"><span class="keyword">function</span> <span class="title">startTimer</span><span class="params">()</span> {</span>

      data.timer = window.setInterval(refreshStats, data.timerInterval);

    }

    <span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">()</span> {</span>

      <span class="keyword">var</span> o, i, j,
          items;

      o = document.getElementById(<span class="string">'debug-panel'</span>);

      <span class="keyword">if</span> (!o) {
        <span class="keyword">return</span> <span class="literal">false</span>;
      }

      <span class="keyword">if</span> (!PERFORMANCE_MODE) {</pre></div></div>
            
        </li>
        
        
        <li id="section-441">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-441">&#182;</a>
              </div>
              <p>not needed - remove from the DOM altogether.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        o.parentNode.removeChild(o);

      } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-442">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-442">&#182;</a>
              </div>
              <p>reset checkboxes, etc.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        o.getElementsByTagName(<span class="string">'form'</span>)[<span class="number">0</span>].reset();

        items = o.getElementsByTagName(<span class="string">'input'</span>);

        <span class="keyword">for</span> (i=<span class="number">0</span>, j=items.length; i&lt;j; i++) {

          utils.events.add(items[i], <span class="string">'click'</span>, handleChange);

        }</pre></div></div>
            
        </li>
        
        
        <li id="section-443">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-443">&#182;</a>
              </div>
              <p>show the UI.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        o.style.display = <span class="string">'block'</span>;

        dom.divCount = document.getElementById(<span class="string">'debug-div-count'</span>);
        dom.divBlockCount = document.getElementById(<span class="string">'debug-div-block-count'</span>);
        dom.divWallCount = document.getElementById(<span class="string">'debug-div-wall-count'</span>);
        dom.divTurretCount = document.getElementById(<span class="string">'debug-div-turret-count'</span>);
        dom.turretFireCount = document.getElementById(<span class="string">'debug-turret-fire-count'</span>);
        dom.spaceballCount = document.getElementById(<span class="string">'debug-spaceball-count'</span>);
        dom.badGuyCount = document.getElementById(<span class="string">'debug-badguy-count'</span>);

        startTimer();

      }

    }

    init();


  }());

  <span class="function"><span class="keyword">function</span> <span class="title">createSpaceBalls</span><span class="params">()</span> {</span>

    <span class="keyword">var</span> i, j, k, l,
        x, tmp,
        spaceBallCount = DEFAULT_SPACEBALLS,
        freeSpaces = [],
        location,
        rows = data.map.length,
        cols = data.map[<span class="number">0</span>].length;</pre></div></div>
            
        </li>
        
        
        <li id="section-444">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-444">&#182;</a>
              </div>
              <p>check for space characters in the map character data.
these are safe spaces to occupy.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">for</span> (i=<span class="number">0</span>, j=cols; i&lt;j; i++) {
      <span class="keyword">for</span> (k=<span class="number">0</span>, l=rows; k&lt;l; k++) {
        <span class="keyword">if</span> (objects.mapData[k][i] === MAP_FREE_SPACE_CHAR || objects.mapData[k][i] === MAP_ALT_FREE_SPACE_CHAR) {
          freeSpaces.push({
            row: k,
            col: i
          });
        }
      }
    }

    <span class="keyword">if</span> (DEBUG_MODE) {</pre></div></div>
            
        </li>
        
        
        <li id="section-445">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-445">&#182;</a>
              </div>
              <p>highlight empty spaces</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      x = document.createElement(<span class="string">'div'</span>);
      x.style.position = <span class="string">'absolute'</span>;
      x.style.width = <span class="string">'31px'</span>;
      x.style.height = <span class="string">'31px'</span>;
      x.style.border = <span class="string">'1px solid #66ff66'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-446">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-446">&#182;</a>
              </div>
              <p>x.style.background = &#39;#006600&#39;;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">for</span> (i=<span class="number">0</span>, j=freeSpaces.length; i&lt;j; i++) {
        tmp = x.cloneNode(<span class="literal">false</span>);
        tmp.style.left = (freeSpaces[i].col * data.NODE_WIDTH) + <span class="string">'px'</span>;
        tmp.style.top = (freeSpaces[i].row * data.NODE_HEIGHT) + <span class="string">'px'</span>;
        dom.worldFragment.appendChild(tmp);
      }

    }

    <span class="keyword">for</span> (i=<span class="number">0</span>, j=spaceBallCount; i&lt;j; i++) {</pre></div></div>
            
        </li>
        
        
        <li id="section-447">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-447">&#182;</a>
              </div>
              <p>choose a random location...</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      location = parseInt(Math.random()*freeSpaces.length, <span class="number">10</span>);

      objects.spaceBalls.push(<span class="keyword">new</span> SpaceBall(freeSpaces[location]));</pre></div></div>
            
        </li>
        
        
        <li id="section-448">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-448">&#182;</a>
              </div>
              <p>and remove this item from the array (since it&#39;s now occupied)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      freeSpaces.splice(location, <span class="number">1</span>);
    
    }

  }

  <span class="function"><span class="keyword">function</span> <span class="title">getArgs</span><span class="params">(x)</span> {</span>

    <span class="keyword">return</span> _slice.call(x);

  }

  mapTypes = {
    <span class="string">'0'</span>: <span class="keyword">function</span>() { <span class="keyword">return</span> <span class="keyword">new</span> Block(mixin(getArgs(arguments)[<span class="number">0</span>], {type: <span class="string">'block'</span>, subType: <span class="string">'type-0'</span>})); },
    <span class="string">'1'</span>: <span class="keyword">function</span>() { <span class="keyword">return</span> <span class="keyword">new</span> Block(mixin(getArgs(arguments)[<span class="number">0</span>], {type: <span class="string">'block'</span>, subType: <span class="string">'type-1'</span>})); },
    <span class="string">'2'</span>: <span class="keyword">function</span>() { <span class="keyword">return</span> <span class="keyword">new</span> Block(mixin(getArgs(arguments)[<span class="number">0</span>], {type: <span class="string">'block'</span>, subType: <span class="string">'type-2'</span>})); },
    <span class="string">'3'</span>: <span class="keyword">function</span>() { <span class="keyword">return</span> <span class="keyword">new</span> Block(mixin(getArgs(arguments)[<span class="number">0</span>], {type: <span class="string">'block'</span>, subType: <span class="string">'type-3'</span>})); }
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-449">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-449">&#182;</a>
              </div>
              <p>user-provided map</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="keyword">if</span> (winloc.match(<span class="regexp">/mapData/</span>)) {

    <span class="keyword">var</span> str = decodeURI(winloc);

    mapData = str.substr(str.indexOf(<span class="string">'mapData'</span>)+<span class="number">8</span>).split(<span class="string">'/'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-450">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-450">&#182;</a>
              </div>
              <p>for now...</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    DEFAULT_HOME_ROW = <span class="number">1</span>;
    DEFAULT_HOME_COL = <span class="number">1</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-451">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-451">&#182;</a>
              </div>
              <p>and also, no spaceballs for custom levels.
this is because I&#39;m lazy and don&#39;t have an algorithm to identify completely-enclosed base areas
(see dotted characters in above map), which are used to indicate &quot;occupied&quot; space when placing spaceballs.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    DEFAULT_SPACEBALLS = <span class="number">0</span>;

  }

  objects.mapData = mapData;

  <span class="function"><span class="keyword">function</span> <span class="title">createGrid</span><span class="params">()</span> {</span>

    <span class="keyword">var</span> gridItems = [];

    <span class="keyword">var</span> i, j, k, l, char;

    j = mapData.length;

    console.log(<span class="string">'looping through '</span> + j + <span class="string">' rows of '</span> + mapData[<span class="number">0</span>].length + <span class="string">' characters'</span>);

    <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;j; i++) {</pre></div></div>
            
        </li>
        
        
        <li id="section-452">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-452">&#182;</a>
              </div>
              <p>data for one row</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      l = mapData[i].length;

      gridItems[i] = [];

      <span class="keyword">for</span> (k=<span class="number">0</span>; k&lt;l; k++) {</pre></div></div>
            
        </li>
        
        
        <li id="section-453">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-453">&#182;</a>
              </div>
              <p>find the character and create the relevant object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        char = mapData[i].charAt(k);

        <span class="keyword">if</span> (char !== <span class="string">' '</span> &amp;&amp; mapTypes[char] !== <span class="literal">undefined</span>) {

          gridItems[i].push(mapTypes[char]({
            <span class="string">'x'</span>: k,
            <span class="string">'y'</span>: i
          }));

        } <span class="keyword">else</span> <span class="keyword">if</span> (objects.baseController.isBaseItem(char)) {

          gridItems[i].push(objects.baseController.addBaseItem(char, k, i));

        } <span class="keyword">else</span> {

          gridItems[i].push(<span class="literal">null</span>);

        }

      }

    }

    objects.baseController.findActiveBases();</pre></div></div>
            
        </li>
        
        
        <li id="section-454">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-454">&#182;</a>
              </div>
              <p>set world dimensions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    game.data.world_width = (game.data.NODE_WIDTH * mapData[<span class="number">0</span>].length) + <span class="number">1</span>;
    game.data.world_height = (game.data.NODE_HEIGHT * mapData.length) + <span class="number">1</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-455">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-455">&#182;</a>
              </div>
              <p>record # of columns + rows</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    game.data.world_cols = mapData[<span class="number">0</span>].length - <span class="number">1</span>;
    game.data.world_rows = mapData.length - <span class="number">1</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-456">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-456">&#182;</a>
              </div>
              <p>apply to DOM</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    dom.world.style.width = game.data.world_width + <span class="string">'px'</span>;
    dom.world.style.height = game.data.world_height + <span class="string">'px'</span>;

    console.log(<span class="string">'world set to '</span> + game.data.world_width + <span class="string">' x '</span> + game.data.world_height);</pre></div></div>
            
        </li>
        
        
        <li id="section-457">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-457">&#182;</a>
              </div>
              <p>reset the window scroll, if any (may be remembered from last time)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    objects.screen.moveTo(<span class="number">0</span>,<span class="number">0</span>);

    <span class="keyword">return</span> gridItems;

  }

  <span class="function"><span class="keyword">function</span> <span class="title">createShip</span><span class="params">()</span> {</span>
    objects.ship = <span class="keyword">new</span> Ship();
    objects.ship.init();
  }

  <span class="function"><span class="keyword">function</span> <span class="title">makeRandomBadGuy</span><span class="params">(force)</span> {</span>
    <span class="keyword">var</span> isActive = objects.gameLoop.isActive();
    <span class="keyword">if</span> ((Math.random() &lt; <span class="number">0.75</span> || force) &amp;&amp; isActive) {
      console.log(<span class="string">'makeRandomBadGuy()'</span>);
      game.objects.badGuyController.createBadGuy();
    } <span class="keyword">else</span> <span class="keyword">if</span> (isActive) {
      console.log(<span class="string">'no bad guy this time around'</span>);
    }
    setTimeout(makeRandomBadGuy, <span class="number">10000</span> + parseInt(Math.random() * <span class="number">15000</span>, <span class="number">10</span>));
  }

  <span class="function"><span class="keyword">function</span> <span class="title">reset</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-458">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-458">&#182;</a>
              </div>
              <p>reset the maps</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    objects.turretGunfireMap.reset();
    objects.shipGunfireMap.reset();
    objects.badGuyMap.reset();
    objects.spaceBallMap.reset();</pre></div></div>
            
        </li>
        
        
        <li id="section-459">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-459">&#182;</a>
              </div>
              <p>reset and re-append objects to the grid as needed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="keyword">var</span> i, j, k, l;

    <span class="keyword">for</span> (i=<span class="number">0</span>, j=game.data.map.length; i&lt;j; i++) {
      <span class="keyword">for</span> (k=<span class="number">0</span>, l=game.data.map[i].length; k&lt;l; k++) {
        <span class="keyword">if</span> (game.data.map[i][k] &amp;&amp; game.data.map[i][k].restore) {
          game.data.map[i][k].restore();
        }
      }
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-460">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-460">&#182;</a>
              </div>
              <p>reset the spaceballs, too</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">for</span> (i=<span class="number">0</span>, j=game.objects.spaceBalls.length; i&lt;j; i++) {
      game.objects.spaceBalls[i].restore();
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-461">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-461">&#182;</a>
              </div>
              <p>reset the base controller, bringing all bases back to life</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    game.objects.baseController.reset();</pre></div></div>
            
        </li>
        
        
        <li id="section-462">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-462">&#182;</a>
              </div>
              <p>re-append ship, which will have been nuked as well</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    game.dom.worldFragment.appendChild(game.objects.ship.getNode());

    game.dom.world.appendChild(game.dom.worldFragment);</pre></div></div>
            
        </li>
        
        
        <li id="section-463">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-463">&#182;</a>
              </div>
              <p>set default heartbeat rate</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    game.objects.gameLoop.setPulseStage();

    game.objects.statsController.reset();

    game.objects.gameController.reset();

    game.objects.ship.setDefaultPosition();

    game.objects.ship.findSafeRespawnLocation();

    soundManager.play(<span class="string">'gamewarp-start'</span>);

    game.objects.ship.reset();

    objects.gameLoop.resume();

    console.log(<span class="string">'game reset complete'</span>);

  }

  <span class="function"><span class="keyword">function</span> <span class="title">assignRemixLink</span><span class="params">()</span> {</span>

    <span class="keyword">var</span> o = document.getElementById(<span class="string">'remix'</span>);

    <span class="keyword">if</span> (o) {

      <span class="keyword">if</span> (winloc.match(<span class="regexp">/mapData/i</span>)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-464">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-464">&#182;</a>
              </div>
              <p>assign the link including the mapData, replacing MAP_FREE_SPACE_CHAR with MAP_ALT_FREE_SPACE_CHAR</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        o.href = <span class="string">'editor.html#mapData='</span> + survivor.mapData.join(<span class="string">'/'</span>).replace(<span class="regexp">/\s/g</span>, MAP_ALT_FREE_SPACE_CHAR);

        o.innerHTML = <span class="string">'Remix this level'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-465">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-465">&#182;</a>
              </div>
              <p>show the &quot;play original game&quot; link, too</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        document.getElementById(<span class="string">'original'</span>).style.display = <span class="string">'inline'</span>;

      }

    }

  }

  <span class="function"><span class="keyword">function</span> <span class="title">assignHelpLink</span><span class="params">()</span> {</span>

    <span class="keyword">var</span> o = document.getElementById(<span class="string">'help'</span>);

    <span class="function"><span class="keyword">function</span> <span class="title">mouseDownHandler</span><span class="params">(e)</span> {</span>

      <span class="keyword">var</span> o,
          oBody;

      <span class="keyword">var</span> className = <span class="string">'show-help'</span>;

      <span class="keyword">var</span> is_showing = utils.css.has(document.body, className);

      <span class="keyword">if</span> (!is_showing) {

        utils.css.add(document.body, className);

        o = document.getElementById(<span class="string">'help-screen'</span>);
        oBody = o.getElementsByTagName(<span class="string">'div'</span>)[<span class="number">0</span>];

        oBody.style.marginTop = -parseInt(oBody.offsetHeight/<span class="number">2</span>, <span class="number">10</span>) + <span class="string">'px'</span>;

        game.objects.gameLoop.pause();

      } <span class="keyword">else</span> {

        utils.css.remove(document.body, className);

        game.objects.gameLoop.resume();

      }

      stopEvent(e);

      <span class="keyword">return</span> <span class="literal">false</span>;

    }

    <span class="keyword">if</span> (o) {

      o.onmousedown = mouseDownHandler;</pre></div></div>
            
        </li>
        
        
        <li id="section-466">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-466">&#182;</a>
              </div>
              <p>and get the help screen, too</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      document.getElementById(<span class="string">'help-screen'</span>).onclick = mouseDownHandler;

    }

  }

  <span class="function"><span class="keyword">function</span> <span class="title">initAudio</span><span class="params">()</span> {</span>

    <span class="keyword">var</span> i;

    features.audio = <span class="literal">true</span>;

    soundManager.createSound({
      id: <span class="string">'gamewarp-start'</span>,
      url: <span class="string">'audio/gamewarp-start.mp3'</span>
    }).play();

    soundManager.createSound({
      id: <span class="string">'heartbeat'</span>,
      url: <span class="string">'audio/heartbeat.mp3'</span>,
      multiShot: <span class="literal">true</span>,
      autoLoad: <span class="literal">true</span>
    });

    soundManager.createSound({
      id: <span class="string">'badguy-loop-0'</span>,
      url: <span class="string">'audio/badguy-loop-1.mp3'</span>,
      loops: <span class="number">999</span>,
      autoLoad: <span class="literal">true</span>
    });

    soundManager.createSound({
      id: <span class="string">'badguy-loop-1'</span>,
      url: <span class="string">'audio/badguy-loop-2.mp3'</span>,
      loops: <span class="number">999</span>,
      autoLoad: <span class="literal">true</span>
    });

    soundManager.createSound({
      id: <span class="string">'base-explode'</span>,
      url: <span class="string">'audio/base-explode.mp3'</span>,
      autoLoad: <span class="literal">true</span>
    });

    <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;soundSprites.boomSpriteCounterMax; i++) {
      soundManager.createSound({
        id: <span class="string">'boom-sprite-'</span>+i,
        url: <span class="string">'audio/boom-sprite.mp3'</span>,
        autoLoad: <span class="literal">true</span>
      });
    }

    <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;soundSprites.popSpriteCounterMax; i++) {
      soundManager.createSound({
        id: <span class="string">'pop-sprite-'</span>+i,
        url: <span class="string">'audio/pop-sprite.mp3'</span>,
        autoLoad: <span class="literal">true</span>
      });
    }

  }

  <span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">()</span> {</span>

    objects.gameLoop = <span class="keyword">new</span> GameLoop();

    <span class="keyword">if</span> (soundManager.ok() &amp;&amp; !IS_MUTED) {
      initAudio();
    }

    objects.collision = <span class="keyword">new</span> Collision();

    objects.screen = <span class="keyword">new</span> Screen();

    console.log(<span class="string">'creating BaseController()...'</span>);

    objects.baseController = <span class="keyword">new</span> BaseController();
    objects.baseController.init();

    console.log(<span class="string">'calling createGrid()'</span>);

    data.map = createGrid();

    objects.screen.init();

    objects.statsController = <span class="keyword">new</span> StatsController();</pre></div></div>
            
        </li>
        
        
        <li id="section-467">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-467">&#182;</a>
              </div>
              <p>2D array tracking references to moving objects</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    objects.turretGunfireMap = <span class="keyword">new</span> ObjectMap();
    objects.shipGunfireMap = <span class="keyword">new</span> ObjectMap();
    objects.badGuyMap = <span class="keyword">new</span> ObjectMap();
    objects.spaceBallMap = <span class="keyword">new</span> ObjectMap();

    console.log(<span class="string">'creating ship'</span>);

    createShip();

    console.log(<span class="string">'creating bad guys'</span>);

    setTimeout(makeRandomBadGuy, <span class="number">10000</span> + parseInt(Math.random() * <span class="number">15000</span>, <span class="number">10</span>));

    console.log(<span class="string">'making spaceballs'</span>);

    createSpaceBalls();</pre></div></div>
            
        </li>
        
        
        <li id="section-468">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-468">&#182;</a>
              </div>
              <p>shall we use GPU acceleration tricks based on Chrome&#39;s DevTools?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (USE_TRANSFORM) {
      console.log(<span class="string">'using Chrome-specific CSS3 transforms for GPU acceleration'</span>);
      utils.css.add(game.dom.world, <span class="string">'use-transform'</span>);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-469">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-469">&#182;</a>
              </div>
              <p>append fragment containing everything to DOM</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    dom.world.appendChild(dom.worldFragment);

    console.log(<span class="string">'world created'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-470">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-470">&#182;</a>
              </div>
              <p>position ship
hack - otherwise, window scroll doesn&#39;t quite exist yet or something and doesn&#39;t get picked up.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    window.setTimeout(<span class="keyword">function</span>() {
      objects.ship.setDefaultPosition();
      game.objects.ship.findSafeRespawnLocation();
    }, <span class="number">20</span>);

    console.log(<span class="string">'keyboard init'</span>);

    objects.keyboardMonitor = <span class="keyword">new</span> KeyboardMonitor();
    objects.keyboardMonitor.init();

    objects.focusMonitor = <span class="keyword">new</span> FocusMonitor();
    objects.focusMonitor.init();

    game.objects.levelEndSequence = <span class="keyword">new</span> LevelEndSequence({
      node: document.getElementById(<span class="string">'level-end-sequence'</span>)
    });

    objects.smartbombController = <span class="keyword">new</span> SmartbombController();

    objects.gameController = <span class="keyword">new</span> GameController();
    objects.gameController.init();

    assignRemixLink();

    assignHelpLink();</pre></div></div>
            
        </li>
        
        
        <li id="section-471">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-471">&#182;</a>
              </div>
              <p>start game loop</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    objects.gameLoop.init();

  }

  <span class="keyword">return</span> {
    init: init,
    mapData: mapData,
    reset: reset
  };

}

<span class="function"><span class="keyword">function</span> <span class="title">go_go_go</span><span class="params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-472">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-472">&#182;</a>
              </div>
              <p>function name: inside Flickr-circa-2004 joke.</p>

            </div>
            
        </li>
        
        
        <li id="section-473">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-473">&#182;</a>
              </div>
              <p>hackish: bypass loading / intro screens if noIntro, or if mapData and offline (file://) etc.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="keyword">var</span> tweeter = document.getElementById(<span class="string">'tweeter'</span>);

  <span class="keyword">var</span> bypassIntro = (
        document.location.href.match(<span class="regexp">/nointro/i</span>)
        || (document.referrer &amp;&amp; document.referrer.match(<span class="regexp">/editor/i</span>))
        || ((!document.location.protocol.match(<span class="regexp">/http/i</span>) &amp;&amp; document.location.href.match(<span class="regexp">/mapdata/i</span>)))
      ),
      l0 = document.getElementById(<span class="string">'loading0'</span>),
      l1 = document.getElementById(<span class="string">'loading1'</span>),
      l2 = document.getElementById(<span class="string">'loading2'</span>);

  document.getElementById(<span class="string">'cursor'</span>).style.display = <span class="string">'none'</span>;

  <span class="function"><span class="keyword">function</span> <span class="title">startGame</span><span class="params">()</span> {</span>

    <span class="keyword">if</span> (soundManager.ok()) {
      soundManager.stop(<span class="string">'valkyries'</span>);
    }

    survivor = <span class="keyword">new</span> Survivor();
    survivor.init();
    document.getElementById(<span class="string">'world-container'</span>).style.display = <span class="string">'block'</span>;

  }

  <span class="function"><span class="keyword">function</span> <span class="title">hideGameTitleScreen</span><span class="params">()</span> {</span>

    <span class="keyword">var</span> boot = document.getElementById(<span class="string">'boot-screen'</span>);
    <span class="keyword">var</span> title = document.getElementById(<span class="string">'title-screen'</span>);

    boot.parentNode.removeChild(boot);
    title.parentNode.removeChild(title);

  }

  <span class="function"><span class="keyword">function</span> <span class="title">showGameTitleScreen</span><span class="params">()</span> {</span>

    <span class="keyword">var</span> title = document.getElementById(<span class="string">'title-screen'</span>);
    <span class="keyword">var</span> c64 = document.getElementById(<span class="string">'c64'</span>);

    title.style.display = <span class="string">'block'</span>;

    c64.parentNode.removeChild(c64);

    <span class="keyword">if</span> (soundManager.ok() &amp;&amp; !IS_MUTED) {
      soundManager.createSound({
        id: <span class="string">'valkyries'</span>,
        url: <span class="string">'audio/valkyries.mp3'</span>,
        autoPlay: <span class="literal">true</span>
      });
    }

    title.onclick = <span class="keyword">function</span>() {
      hideGameTitleScreen();
      startGame();
    };

  }

  <span class="keyword">if</span> (bypassIntro) {</pre></div></div>
            
        </li>
        
        
        <li id="section-474">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-474">&#182;</a>
              </div>
              <p>go directly to the game.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    hideGameTitleScreen();
    startGame();</pre></div></div>
            
        </li>
        
        
        <li id="section-475">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-475">&#182;</a>
              </div>
              <p>and show the &quot;tweeter&quot; link, encouraging creators to share (maybe)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> (tweeter &amp;&amp; !winloc.match(<span class="regexp">/temp/i</span>)) {

      tweeter.style.display = <span class="string">'inline'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-476">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-476">&#182;</a>
              </div>
              <p>old-skool.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      tweeter.onclick = <span class="keyword">function</span>(e) {

        <span class="keyword">var</span> webCirca1999,
            msg,
            serviceURL,
            str,
            mapData,
            xhr;

        str = decodeURI(winloc);

        mapData = str.substr(str.indexOf(<span class="string">'mapData'</span>)+<span class="number">8</span>);

        serviceURL = <span class="string">'https://twitter.com/share/?text='</span>;

        msg = <span class="string">'I designed an 80\'s-era arcade game level. Think you can beat it? Play and remix it here.'</span>;

        xhr = <span class="keyword">new</span> window.XMLHttpRequest();

        xhr.onreadystatechange = <span class="keyword">function</span>() {

          <span class="keyword">var</span> json;

          <span class="keyword">if</span> (xhr.readyState !== <span class="number">4</span>) {
            <span class="keyword">return</span>;
          }

          <span class="keyword">if</span> (xhr.status !== <span class="number">200</span> &amp;&amp; xhr.status !== <span class="number">304</span>) {
            console(<span class="string">'HTTP error '</span> + xhr.status);
            <span class="keyword">return</span>;
          }

          json = JSON.parse(xhr.responseText);

          <span class="keyword">if</span> (json &amp;&amp; json.data &amp;&amp; json.data.url) {</pre></div></div>
            
        </li>
        
        
        <li id="section-477">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-477">&#182;</a>
              </div>
              <p>go to the proper sharing URL</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            webCirca1999.go(serviceURL + encodeURIComponent(msg) + <span class="string">'&amp;url='</span> + json.data.url);

          }

        };</pre></div></div>
            
        </li>
        
        
        <li id="section-478">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-478">&#182;</a>
              </div>
              <p>open ze window</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        webCirca1999 = window.open(<span class="string">'shorturl/blank.html'</span>, <span class="string">'survivorTweetWindow'</span>, <span class="string">'width=640,height=250'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-479">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-479">&#182;</a>
              </div>
              <p>get the short URL</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        xhr.open(<span class="string">'GET'</span>, <span class="string">'shorturl/?url='</span> + mapData, <span class="literal">true</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-480">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-480">&#182;</a>
              </div>
              <p>true = post? I forget.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        xhr.send();</pre></div></div>
            
        </li>
        
        
        <li id="section-481">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-481">&#182;</a>
              </div>
              <p>hack?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (e.preventDefault) {
          e.preventDefault();
        } <span class="keyword">else</span> {
          e.returnValue = <span class="literal">false</span>;
          e.cancelBubble = <span class="literal">true</span>;
        }

        <span class="keyword">return</span> <span class="literal">false</span>;

      };

    }

    <span class="keyword">return</span> <span class="literal">false</span>;

  }</pre></div></div>
            
        </li>
        
        
        <li id="section-482">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-482">&#182;</a>
              </div>
              <p>first, make the noise.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="keyword">if</span> (soundManager.ok() &amp;&amp; !navigator.userAgent.match(<span class="regexp">/mobile/i</span>) &amp;&amp; !IS_MUTED) {

    <span class="comment">/**
     * Audio sample credit / thank-you: YouTube user "daddlertl2", last active 2 years ago (as of February 2012)
     * http://youtu.be/_K7MUkxjeaM
     * video "C64-Diskette wird formatiert (mit Basic Befehl) " uploaded May 1, 2009
     * (gappy audio track from video fixed for use in this project)
     */</span>

    <span class="keyword">var</span> _1541 = soundManager.createSound({
      id: <span class="string">'c64-1541-format'</span>,
      url: <span class="string">'audio/1541-formatting-sound-short.mp3'</span>
    });

    _1541.onPosition(<span class="number">800</span>, <span class="keyword">function</span>() {
      <span class="comment">/**
       * SEARCHING FOR SURVIVOR-2012
       * at this point, the Commodore 1541-II floppy drive's head knocking sound is playing.
       * and yes, technically this alignment process is usually heard only when formatting disks.
       * if you heard that and were frowning in disappointment at the mis-use, yes, you are technically correct.
       * if you are both technically correct and reading this comment, then you win approximately one internets.
       */</span>
      l1.style.display = <span class="string">'block'</span>;
    });

    _1541.onPosition(<span class="number">2000</span>, <span class="keyword">function</span>() {
      <span class="comment">/**
       * LOADING
       */</span>
      l2.style.display = <span class="string">'block'</span>;
    });

    _1541.onPosition(<span class="number">5000</span>, <span class="keyword">function</span>() {
      <span class="comment">/**
       * READY.
       * RUN
       */</span>
      document.getElementById(<span class="string">'go_go_go'</span>).style.display = <span class="string">'block'</span>;
    });

    _1541.onPosition(<span class="number">6000</span>, showGameTitleScreen);

    _1541.play();

    l0.style.display = <span class="string">'block'</span>;

  } <span class="keyword">else</span> {

    l0.style.display = <span class="string">'block'</span>;
    l1.style.display = <span class="string">'block'</span>;
    l2.style.display = <span class="string">'block'</span>;

    document.getElementById(<span class="string">'go_go_go'</span>).style.display = <span class="string">'block'</span>;

    window.setTimeout(showGameTitleScreen, <span class="number">2500</span>);

  }

}

soundManager.setup({
  preferFlash: <span class="literal">false</span>
});

<span class="keyword">if</span> (!window.location.protocol.match(<span class="regexp">/http/i</span>) || document.domain.match(<span class="regexp">/schillmania\.com/i</span>)) {

  soundManager.onready(<span class="keyword">function</span>() {
    <span class="keyword">if</span> (document.referrer &amp;&amp; document.referrer.match(<span class="regexp">/editor/i</span>)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-483">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-483">&#182;</a>
              </div>
              <p>if coming from the editor, skip straight to the goods.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      go_go_go();
    } <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-484">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-484">&#182;</a>
              </div>
              <p>let &quot;READY.&quot; show for a second.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      setTimeout(go_go_go, <span class="number">1000</span>);
    }
  });

  soundManager.ontimeout(go_go_go);

} <span class="keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-485">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-485">&#182;</a>
              </div>
              <p>no sound effects for external use.
let &quot;READY.&quot; show for a second.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  console.log(<span class="string">'Note: sound effects are disabled.'</span>);
  setTimeout(go_go_go, <span class="number">1000</span>);

}</pre></div></div>
            
        </li>
        
        
        <li id="section-486">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-486">&#182;</a>
              </div>
              <p>invocation closure</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>}(window));</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
